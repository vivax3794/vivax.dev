[{"data":1,"prerenderedAt":9327},["Reactive",2],{"content-query-CiZKCkh2q6":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"body":10,"_type":9322,"_id":9323,"_source":9324,"_file":9325,"_extension":9326},"/blog/compiler_6","blog",false,"","Compiler part 5 - Variables","So in todays blog post we will be implementing variables. This is what will make this more than a overgrown calculator and start looking more like a real programming lang.",{"type":11,"children":12,"toc":9306},"root",[13,21,26,39,46,51,58,169,174,322,335,347,533,538,664,670,675,680,686,691,697,718,765,800,808,836,844,849,857,864,876,990,995,1453,1458,2004,2009,2015,2020,2025,2033,2038,2046,2074,2080,2100,2400,2411,2428,2933,2938,3383,3389,3394,3990,4018,4300,4305,4517,4522,4800,4805,4921,4926,5569,5574,6161,6166,6737,6742,7146,7152,7157,7500,7513,8117,8136,8487,8492,8684,8693,8698,8704,8723,8728,8733,8871,8876,9138,9143,9148,9269,9274,9280,9300],{"type":14,"tag":15,"props":16,"children":18},"element","h1",{"id":17},"compiler-part-5-variables",[19],{"type":20,"value":8},"text",{"type":14,"tag":22,"props":23,"children":24},"p",{},[25],{"type":20,"value":9},{"type":14,"tag":22,"props":27,"children":28},{},[29,31],{"type":20,"value":30},"And as always here is the repo: ",{"type":14,"tag":32,"props":33,"children":37},"a",{"href":34,"rel":35},"https://github.com/vivax3794/viv_script_blog/tree/fdf3c7cca395f51b801e7f4363841b0e0b05e01d",[36],"nofollow",[38],{"type":20,"value":34},{"type":14,"tag":40,"props":41,"children":43},"h3",{"id":42},"how-shall-we-keep-track-of-scope",[44],{"type":20,"value":45},"How shall we keep track of scope",{"type":14,"tag":22,"props":47,"children":48},{},[49],{"type":20,"value":50},"So the question of scope, how big should scopes be? We can do what python does and have function scope, or like rust with blog scope. what do I mean with this?",{"type":14,"tag":52,"props":53,"children":55},"h4",{"id":54},"how-rust-and-python-do-it",[56],{"type":20,"value":57},"How rust and python do it.",{"type":14,"tag":59,"props":60,"children":64},"pre",{"code":61,"language":62,"meta":7,"className":63,"style":7},"def foo():\n    y = True\n    if y:\n        x = 123\n    print(x)\n    # x and y go out of scope\n","python","language-python shiki shiki-themes github-dark",[65],{"type":14,"tag":66,"props":67,"children":68},"code",{"__ignoreMap":7},[69,93,113,127,145,159],{"type":14,"tag":70,"props":71,"children":74},"span",{"class":72,"line":73},"line",1,[75,81,87],{"type":14,"tag":70,"props":76,"children":78},{"style":77},"--shiki-default:#F97583",[79],{"type":20,"value":80},"def",{"type":14,"tag":70,"props":82,"children":84},{"style":83},"--shiki-default:#B392F0",[85],{"type":20,"value":86}," foo",{"type":14,"tag":70,"props":88,"children":90},{"style":89},"--shiki-default:#E1E4E8",[91],{"type":20,"value":92},"():\n",{"type":14,"tag":70,"props":94,"children":96},{"class":72,"line":95},2,[97,102,107],{"type":14,"tag":70,"props":98,"children":99},{"style":89},[100],{"type":20,"value":101},"    y ",{"type":14,"tag":70,"props":103,"children":104},{"style":77},[105],{"type":20,"value":106},"=",{"type":14,"tag":70,"props":108,"children":110},{"style":109},"--shiki-default:#79B8FF",[111],{"type":20,"value":112}," True\n",{"type":14,"tag":70,"props":114,"children":116},{"class":72,"line":115},3,[117,122],{"type":14,"tag":70,"props":118,"children":119},{"style":77},[120],{"type":20,"value":121},"    if",{"type":14,"tag":70,"props":123,"children":124},{"style":89},[125],{"type":20,"value":126}," y:\n",{"type":14,"tag":70,"props":128,"children":130},{"class":72,"line":129},4,[131,136,140],{"type":14,"tag":70,"props":132,"children":133},{"style":89},[134],{"type":20,"value":135},"        x ",{"type":14,"tag":70,"props":137,"children":138},{"style":77},[139],{"type":20,"value":106},{"type":14,"tag":70,"props":141,"children":142},{"style":109},[143],{"type":20,"value":144}," 123\n",{"type":14,"tag":70,"props":146,"children":148},{"class":72,"line":147},5,[149,154],{"type":14,"tag":70,"props":150,"children":151},{"style":109},[152],{"type":20,"value":153},"    print",{"type":14,"tag":70,"props":155,"children":156},{"style":89},[157],{"type":20,"value":158},"(x)\n",{"type":14,"tag":70,"props":160,"children":162},{"class":72,"line":161},6,[163],{"type":14,"tag":70,"props":164,"children":166},{"style":165},"--shiki-default:#6A737D",[167],{"type":20,"value":168},"    # x and y go out of scope\n",{"type":14,"tag":22,"props":170,"children":171},{},[172],{"type":20,"value":173},"in python this works, while in rust this wont:",{"type":14,"tag":59,"props":175,"children":179},{"code":176,"language":177,"meta":7,"className":178,"style":7},"fn bar() {\n    let y = true;\n    if y {\n        let x = 123;\n    } // x goes out of scope\n    println!(\"{x}\"); // Error, x is not in scope\n} // y goes out of scope\n","rust","language-rust shiki shiki-themes github-dark",[180],{"type":14,"tag":66,"props":181,"children":182},{"__ignoreMap":7},[183,201,228,240,266,279,308],{"type":14,"tag":70,"props":184,"children":185},{"class":72,"line":73},[186,191,196],{"type":14,"tag":70,"props":187,"children":188},{"style":77},[189],{"type":20,"value":190},"fn",{"type":14,"tag":70,"props":192,"children":193},{"style":83},[194],{"type":20,"value":195}," bar",{"type":14,"tag":70,"props":197,"children":198},{"style":89},[199],{"type":20,"value":200},"() {\n",{"type":14,"tag":70,"props":202,"children":203},{"class":72,"line":95},[204,209,214,218,223],{"type":14,"tag":70,"props":205,"children":206},{"style":77},[207],{"type":20,"value":208},"    let",{"type":14,"tag":70,"props":210,"children":211},{"style":89},[212],{"type":20,"value":213}," y ",{"type":14,"tag":70,"props":215,"children":216},{"style":77},[217],{"type":20,"value":106},{"type":14,"tag":70,"props":219,"children":220},{"style":109},[221],{"type":20,"value":222}," true",{"type":14,"tag":70,"props":224,"children":225},{"style":89},[226],{"type":20,"value":227},";\n",{"type":14,"tag":70,"props":229,"children":230},{"class":72,"line":115},[231,235],{"type":14,"tag":70,"props":232,"children":233},{"style":77},[234],{"type":20,"value":121},{"type":14,"tag":70,"props":236,"children":237},{"style":89},[238],{"type":20,"value":239}," y {\n",{"type":14,"tag":70,"props":241,"children":242},{"class":72,"line":129},[243,248,253,257,262],{"type":14,"tag":70,"props":244,"children":245},{"style":77},[246],{"type":20,"value":247},"        let",{"type":14,"tag":70,"props":249,"children":250},{"style":89},[251],{"type":20,"value":252}," x ",{"type":14,"tag":70,"props":254,"children":255},{"style":77},[256],{"type":20,"value":106},{"type":14,"tag":70,"props":258,"children":259},{"style":109},[260],{"type":20,"value":261}," 123",{"type":14,"tag":70,"props":263,"children":264},{"style":89},[265],{"type":20,"value":227},{"type":14,"tag":70,"props":267,"children":268},{"class":72,"line":147},[269,274],{"type":14,"tag":70,"props":270,"children":271},{"style":89},[272],{"type":20,"value":273},"    }",{"type":14,"tag":70,"props":275,"children":276},{"style":165},[277],{"type":20,"value":278}," // x goes out of scope\n",{"type":14,"tag":70,"props":280,"children":281},{"class":72,"line":161},[282,287,292,298,303],{"type":14,"tag":70,"props":283,"children":284},{"style":83},[285],{"type":20,"value":286},"    println!",{"type":14,"tag":70,"props":288,"children":289},{"style":89},[290],{"type":20,"value":291},"(",{"type":14,"tag":70,"props":293,"children":295},{"style":294},"--shiki-default:#9ECBFF",[296],{"type":20,"value":297},"\"{x}\"",{"type":14,"tag":70,"props":299,"children":300},{"style":89},[301],{"type":20,"value":302},");",{"type":14,"tag":70,"props":304,"children":305},{"style":165},[306],{"type":20,"value":307}," // Error, x is not in scope\n",{"type":14,"tag":70,"props":309,"children":311},{"class":72,"line":310},7,[312,317],{"type":14,"tag":70,"props":313,"children":314},{"style":89},[315],{"type":20,"value":316},"}",{"type":14,"tag":70,"props":318,"children":319},{"style":165},[320],{"type":20,"value":321}," // y goes out of scope\n",{"type":14,"tag":22,"props":323,"children":324},{},[325,327,333],{"type":20,"value":326},"In rust this wont work because ",{"type":14,"tag":66,"props":328,"children":330},{"className":329},[],[331],{"type":20,"value":332},"x",{"type":20,"value":334}," goes out of scope at the end of the if block.\nHow does rust deal with something like this then? Well for one we need a else case, because if the condition doesn't run then x might be undefined!",{"type":14,"tag":22,"props":336,"children":337},{},[338,340,345],{"type":20,"value":339},"And we can then make a mutable ",{"type":14,"tag":66,"props":341,"children":343},{"className":342},[],[344],{"type":20,"value":332},{"type":20,"value":346}," out side the if.",{"type":14,"tag":59,"props":348,"children":350},{"code":349,"language":177,"meta":7,"className":178,"style":7},"fn bar() {\n    let y = true;\n    let mut x = -1;\n    if y {\n        x = 123;\n    } else {\n        x = 3794\n    }\n    println!(\"{x}\");\n} // x and y goes out of scope\n",[351],{"type":14,"tag":66,"props":352,"children":353},{"__ignoreMap":7},[354,369,392,426,437,456,474,490,499,520],{"type":14,"tag":70,"props":355,"children":356},{"class":72,"line":73},[357,361,365],{"type":14,"tag":70,"props":358,"children":359},{"style":77},[360],{"type":20,"value":190},{"type":14,"tag":70,"props":362,"children":363},{"style":83},[364],{"type":20,"value":195},{"type":14,"tag":70,"props":366,"children":367},{"style":89},[368],{"type":20,"value":200},{"type":14,"tag":70,"props":370,"children":371},{"class":72,"line":95},[372,376,380,384,388],{"type":14,"tag":70,"props":373,"children":374},{"style":77},[375],{"type":20,"value":208},{"type":14,"tag":70,"props":377,"children":378},{"style":89},[379],{"type":20,"value":213},{"type":14,"tag":70,"props":381,"children":382},{"style":77},[383],{"type":20,"value":106},{"type":14,"tag":70,"props":385,"children":386},{"style":109},[387],{"type":20,"value":222},{"type":14,"tag":70,"props":389,"children":390},{"style":89},[391],{"type":20,"value":227},{"type":14,"tag":70,"props":393,"children":394},{"class":72,"line":115},[395,399,404,408,412,417,422],{"type":14,"tag":70,"props":396,"children":397},{"style":77},[398],{"type":20,"value":208},{"type":14,"tag":70,"props":400,"children":401},{"style":77},[402],{"type":20,"value":403}," mut",{"type":14,"tag":70,"props":405,"children":406},{"style":89},[407],{"type":20,"value":252},{"type":14,"tag":70,"props":409,"children":410},{"style":77},[411],{"type":20,"value":106},{"type":14,"tag":70,"props":413,"children":414},{"style":77},[415],{"type":20,"value":416}," -",{"type":14,"tag":70,"props":418,"children":419},{"style":109},[420],{"type":20,"value":421},"1",{"type":14,"tag":70,"props":423,"children":424},{"style":89},[425],{"type":20,"value":227},{"type":14,"tag":70,"props":427,"children":428},{"class":72,"line":129},[429,433],{"type":14,"tag":70,"props":430,"children":431},{"style":77},[432],{"type":20,"value":121},{"type":14,"tag":70,"props":434,"children":435},{"style":89},[436],{"type":20,"value":239},{"type":14,"tag":70,"props":438,"children":439},{"class":72,"line":147},[440,444,448,452],{"type":14,"tag":70,"props":441,"children":442},{"style":89},[443],{"type":20,"value":135},{"type":14,"tag":70,"props":445,"children":446},{"style":77},[447],{"type":20,"value":106},{"type":14,"tag":70,"props":449,"children":450},{"style":109},[451],{"type":20,"value":261},{"type":14,"tag":70,"props":453,"children":454},{"style":89},[455],{"type":20,"value":227},{"type":14,"tag":70,"props":457,"children":458},{"class":72,"line":161},[459,464,469],{"type":14,"tag":70,"props":460,"children":461},{"style":89},[462],{"type":20,"value":463},"    } ",{"type":14,"tag":70,"props":465,"children":466},{"style":77},[467],{"type":20,"value":468},"else",{"type":14,"tag":70,"props":470,"children":471},{"style":89},[472],{"type":20,"value":473}," {\n",{"type":14,"tag":70,"props":475,"children":476},{"class":72,"line":310},[477,481,485],{"type":14,"tag":70,"props":478,"children":479},{"style":89},[480],{"type":20,"value":135},{"type":14,"tag":70,"props":482,"children":483},{"style":77},[484],{"type":20,"value":106},{"type":14,"tag":70,"props":486,"children":487},{"style":109},[488],{"type":20,"value":489}," 3794\n",{"type":14,"tag":70,"props":491,"children":493},{"class":72,"line":492},8,[494],{"type":14,"tag":70,"props":495,"children":496},{"style":89},[497],{"type":20,"value":498},"    }\n",{"type":14,"tag":70,"props":500,"children":502},{"class":72,"line":501},9,[503,507,511,515],{"type":14,"tag":70,"props":504,"children":505},{"style":83},[506],{"type":20,"value":286},{"type":14,"tag":70,"props":508,"children":509},{"style":89},[510],{"type":20,"value":291},{"type":14,"tag":70,"props":512,"children":513},{"style":294},[514],{"type":20,"value":297},{"type":14,"tag":70,"props":516,"children":517},{"style":89},[518],{"type":20,"value":519},");\n",{"type":14,"tag":70,"props":521,"children":523},{"class":72,"line":522},10,[524,528],{"type":14,"tag":70,"props":525,"children":526},{"style":89},[527],{"type":20,"value":316},{"type":14,"tag":70,"props":529,"children":530},{"style":165},[531],{"type":20,"value":532}," // x and y goes out of scope\n",{"type":14,"tag":22,"props":534,"children":535},{},[536],{"type":20,"value":537},"Although in rust this is better written using a if-expression, because it avoids the mut.",{"type":14,"tag":59,"props":539,"children":541},{"code":540,"language":177,"meta":7,"className":178,"style":7},"fn bar() {\n    let y = true;\n    let x = if y {123} else {3794};\n    println!(\"{x}\");\n}\n",[542],{"type":14,"tag":66,"props":543,"children":544},{"__ignoreMap":7},[545,560,583,637,656],{"type":14,"tag":70,"props":546,"children":547},{"class":72,"line":73},[548,552,556],{"type":14,"tag":70,"props":549,"children":550},{"style":77},[551],{"type":20,"value":190},{"type":14,"tag":70,"props":553,"children":554},{"style":83},[555],{"type":20,"value":195},{"type":14,"tag":70,"props":557,"children":558},{"style":89},[559],{"type":20,"value":200},{"type":14,"tag":70,"props":561,"children":562},{"class":72,"line":95},[563,567,571,575,579],{"type":14,"tag":70,"props":564,"children":565},{"style":77},[566],{"type":20,"value":208},{"type":14,"tag":70,"props":568,"children":569},{"style":89},[570],{"type":20,"value":213},{"type":14,"tag":70,"props":572,"children":573},{"style":77},[574],{"type":20,"value":106},{"type":14,"tag":70,"props":576,"children":577},{"style":109},[578],{"type":20,"value":222},{"type":14,"tag":70,"props":580,"children":581},{"style":89},[582],{"type":20,"value":227},{"type":14,"tag":70,"props":584,"children":585},{"class":72,"line":115},[586,590,594,598,603,608,613,618,622,627,632],{"type":14,"tag":70,"props":587,"children":588},{"style":77},[589],{"type":20,"value":208},{"type":14,"tag":70,"props":591,"children":592},{"style":89},[593],{"type":20,"value":252},{"type":14,"tag":70,"props":595,"children":596},{"style":77},[597],{"type":20,"value":106},{"type":14,"tag":70,"props":599,"children":600},{"style":77},[601],{"type":20,"value":602}," if",{"type":14,"tag":70,"props":604,"children":605},{"style":89},[606],{"type":20,"value":607}," y {",{"type":14,"tag":70,"props":609,"children":610},{"style":109},[611],{"type":20,"value":612},"123",{"type":14,"tag":70,"props":614,"children":615},{"style":89},[616],{"type":20,"value":617},"} ",{"type":14,"tag":70,"props":619,"children":620},{"style":77},[621],{"type":20,"value":468},{"type":14,"tag":70,"props":623,"children":624},{"style":89},[625],{"type":20,"value":626}," {",{"type":14,"tag":70,"props":628,"children":629},{"style":109},[630],{"type":20,"value":631},"3794",{"type":14,"tag":70,"props":633,"children":634},{"style":89},[635],{"type":20,"value":636},"};\n",{"type":14,"tag":70,"props":638,"children":639},{"class":72,"line":129},[640,644,648,652],{"type":14,"tag":70,"props":641,"children":642},{"style":83},[643],{"type":20,"value":286},{"type":14,"tag":70,"props":645,"children":646},{"style":89},[647],{"type":20,"value":291},{"type":14,"tag":70,"props":649,"children":650},{"style":294},[651],{"type":20,"value":297},{"type":14,"tag":70,"props":653,"children":654},{"style":89},[655],{"type":20,"value":519},{"type":14,"tag":70,"props":657,"children":658},{"class":72,"line":147},[659],{"type":14,"tag":70,"props":660,"children":661},{"style":89},[662],{"type":20,"value":663},"}\n",{"type":14,"tag":52,"props":665,"children":667},{"id":666},"what-should-we-do",[668],{"type":20,"value":669},"What should we do?",{"type":14,"tag":22,"props":671,"children":672},{},[673],{"type":20,"value":674},"The benefit of rusts smaller scopes is that you can never have a undefined var, like we saw in the first rust snippet. We could do similar to python, and check that every branch declares a variable, some python linters actually do this.",{"type":14,"tag":22,"props":676,"children":677},{},[678],{"type":20,"value":679},"But that is a lot of work, and it is easier to have smaller scope. But then we run into the issue of what if we do want to affect vars in the outer scope.\nOne easy option is having separate syntax for declaring and modifying variables.\nAnd that is what we will do. And we will make it simple and have all vars be mutable.",{"type":14,"tag":40,"props":681,"children":683},{"id":682},"how-should-we-handle-types",[684],{"type":20,"value":685},"How should we handle types",{"type":14,"tag":22,"props":687,"children":688},{},[689],{"type":20,"value":690},"We already know the type of the expression so we can use that to determine the type. And then on writes check that the type matches.",{"type":14,"tag":40,"props":692,"children":694},{"id":693},"how-should-we-store-vars-in-the-llvm",[695],{"type":20,"value":696},"How should we store vars in the LLVM",{"type":14,"tag":22,"props":698,"children":699},{},[700,702,708,710,716],{"type":20,"value":701},"We are going to be storing them on the stack, same way we did during the short circuiting logic. where we used ",{"type":14,"tag":66,"props":703,"children":705},{"className":704},[],[706],{"type":20,"value":707},"alloca",{"type":20,"value":709}," to allocate the ",{"type":14,"tag":66,"props":711,"children":713},{"className":712},[],[714],{"type":20,"value":715},"result",{"type":20,"value":717}," value on the stack so we could modify it in the different branches, like we did in rust above.",{"type":14,"tag":22,"props":719,"children":720},{},[721,723,728,730,735,737,742,744,750,752,757,759],{"type":20,"value":722},"Think of ",{"type":14,"tag":66,"props":724,"children":726},{"className":725},[],[727],{"type":20,"value":707},{"type":20,"value":729}," vs not-",{"type":14,"tag":66,"props":731,"children":733},{"className":732},[],[734],{"type":20,"value":707},{"type":20,"value":736}," like this, ",{"type":14,"tag":66,"props":738,"children":740},{"className":739},[],[741],{"type":20,"value":707},{"type":20,"value":743}," is ",{"type":14,"tag":66,"props":745,"children":747},{"className":746},[],[748],{"type":20,"value":749},"let mut",{"type":20,"value":751},", no ",{"type":14,"tag":66,"props":753,"children":755},{"className":754},[],[756],{"type":20,"value":707},{"type":20,"value":758}," is just ",{"type":14,"tag":66,"props":760,"children":762},{"className":761},[],[763],{"type":20,"value":764},"let",{"type":14,"tag":22,"props":766,"children":767},{},[768,770,775,777,783,785,791,793,798],{"type":20,"value":769},"Another important thing is that you likely noticed during out short-cutting logic that we never free the ",{"type":14,"tag":66,"props":771,"children":773},{"className":772},[],[774],{"type":20,"value":707},{"type":20,"value":776},", because it does it for us, ",{"type":14,"tag":778,"props":779,"children":780},"em",{},[781],{"type":20,"value":782},"at the end of the function",{"type":20,"value":784},", and that means that we should ",{"type":14,"tag":786,"props":787,"children":788},"strong",{},[789],{"type":20,"value":790},"not",{"type":20,"value":792}," have ",{"type":14,"tag":66,"props":794,"children":796},{"className":795},[],[797],{"type":20,"value":707},{"type":20,"value":799}," in a loop.",{"type":14,"tag":59,"props":801,"children":803},{"code":802},"fn foo() {\n    while true {\n        let x = 1;\n    }\n}\n",[804],{"type":14,"tag":66,"props":805,"children":806},{"__ignoreMap":7},[807],{"type":20,"value":802},{"type":14,"tag":22,"props":809,"children":810},{},[811,813,818,820,826,828,834],{"type":20,"value":812},"lets imagine ",{"type":14,"tag":66,"props":814,"children":816},{"className":815},[],[817],{"type":20,"value":707},{"type":20,"value":819}," as ",{"type":14,"tag":66,"props":821,"children":823},{"className":822},[],[824],{"type":20,"value":825},"malloc",{"type":20,"value":827},", and ",{"type":14,"tag":66,"props":829,"children":831},{"className":830},[],[832],{"type":20,"value":833},"free(*)",{"type":20,"value":835}," to mean \"free everything\"\nThe naive way would be.",{"type":14,"tag":59,"props":837,"children":839},{"code":838},"fn foo() {\n    while true {\n        x = malloc(...);\n        x.store(1);\n    }\n    free(*);\n}\n",[840],{"type":14,"tag":66,"props":841,"children":842},{"__ignoreMap":7},[843],{"type":20,"value":838},{"type":14,"tag":22,"props":845,"children":846},{},[847],{"type":20,"value":848},"And you can see that this will leak a LOT of memory.\nmeanwhile what we should do is collect all vars that will be created in a function beforehand and then allocate them at the start of the function:",{"type":14,"tag":59,"props":850,"children":852},{"code":851},"fn foo() {\n    x = malloc(...);\n    while true {\n        x.store(1);\n    }\n    free(*);\n}\n",[853],{"type":14,"tag":66,"props":854,"children":855},{"__ignoreMap":7},[856],{"type":20,"value":851},{"type":14,"tag":858,"props":859,"children":861},"h2",{"id":860},"changing-how-main-is-done",[862],{"type":20,"value":863},"Changing how main is done.",{"type":14,"tag":22,"props":865,"children":866},{},[867,869,874],{"type":20,"value":868},"Since all this logic needs to be applied to all functions, including main, we are going to make main just a normal function on the ",{"type":14,"tag":786,"props":870,"children":871},{},[872],{"type":20,"value":873},"IR",{"type":20,"value":875}," level.",{"type":14,"tag":59,"props":877,"children":879},{"code":878,"language":177,"meta":7,"className":178,"style":7},"// ir.rs\n#[derive(Debug)]\npub enum ToplevelStatement {\n    Function { name: String, body: Vec\u003CStatement> },\n}\n",[880],{"type":14,"tag":66,"props":881,"children":882},{"__ignoreMap":7},[883,891,909,931,983],{"type":14,"tag":70,"props":884,"children":885},{"class":72,"line":73},[886],{"type":14,"tag":70,"props":887,"children":888},{"style":165},[889],{"type":20,"value":890},"// ir.rs\n",{"type":14,"tag":70,"props":892,"children":893},{"class":72,"line":95},[894,899,904],{"type":14,"tag":70,"props":895,"children":896},{"style":89},[897],{"type":20,"value":898},"#[derive(",{"type":14,"tag":70,"props":900,"children":901},{"style":83},[902],{"type":20,"value":903},"Debug",{"type":14,"tag":70,"props":905,"children":906},{"style":89},[907],{"type":20,"value":908},")]\n",{"type":14,"tag":70,"props":910,"children":911},{"class":72,"line":115},[912,917,922,927],{"type":14,"tag":70,"props":913,"children":914},{"style":77},[915],{"type":20,"value":916},"pub",{"type":14,"tag":70,"props":918,"children":919},{"style":77},[920],{"type":20,"value":921}," enum",{"type":14,"tag":70,"props":923,"children":924},{"style":83},[925],{"type":20,"value":926}," ToplevelStatement",{"type":14,"tag":70,"props":928,"children":929},{"style":89},[930],{"type":20,"value":473},{"type":14,"tag":70,"props":932,"children":933},{"class":72,"line":129},[934,939,944,949,954,959,963,968,973,978],{"type":14,"tag":70,"props":935,"children":936},{"style":83},[937],{"type":20,"value":938},"    Function",{"type":14,"tag":70,"props":940,"children":941},{"style":89},[942],{"type":20,"value":943}," { name",{"type":14,"tag":70,"props":945,"children":946},{"style":77},[947],{"type":20,"value":948},":",{"type":14,"tag":70,"props":950,"children":951},{"style":83},[952],{"type":20,"value":953}," String",{"type":14,"tag":70,"props":955,"children":956},{"style":89},[957],{"type":20,"value":958},", body",{"type":14,"tag":70,"props":960,"children":961},{"style":77},[962],{"type":20,"value":948},{"type":14,"tag":70,"props":964,"children":965},{"style":83},[966],{"type":20,"value":967}," Vec",{"type":14,"tag":70,"props":969,"children":970},{"style":89},[971],{"type":20,"value":972},"\u003C",{"type":14,"tag":70,"props":974,"children":975},{"style":83},[976],{"type":20,"value":977},"Statement",{"type":14,"tag":70,"props":979,"children":980},{"style":89},[981],{"type":20,"value":982},"> },\n",{"type":14,"tag":70,"props":984,"children":985},{"class":72,"line":147},[986],{"type":14,"tag":70,"props":987,"children":988},{"style":89},[989],{"type":20,"value":663},{"type":14,"tag":22,"props":991,"children":992},{},[993],{"type":20,"value":994},"And then in our type analyzer we will include \"main\" as the function name:",{"type":14,"tag":59,"props":996,"children":998},{"code":997,"language":177,"meta":7,"className":178,"style":7},"// type_analyzer.rs\npub fn resolve_top_level_statement(\n    statement: &ast::ToplevelStatement,\n) -> anyhow::Result\u003Cir::ToplevelStatement> {\n    match statement {\n        ast::ToplevelStatement::MainFunction(statements) => {\n            let mut ir_statements = Vec::new();\n\n            for statement in statements {\n                let ir_statement = resolve_statement(statement)?;\n\n                ir_statements.push(ir_statement);\n            }\n\n            Ok(ir::ToplevelStatement::Function {\n                name: String::from(\"main\"),\n                body: ir_statements,\n            })\n        }\n    }\n}\n",[999],{"type":14,"tag":66,"props":1000,"children":1001},{"__ignoreMap":7},[1002,1010,1032,1069,1114,1127,1166,1205,1214,1237,1273,1281,1305,1314,1322,1361,1401,1419,1428,1437,1445],{"type":14,"tag":70,"props":1003,"children":1004},{"class":72,"line":73},[1005],{"type":14,"tag":70,"props":1006,"children":1007},{"style":165},[1008],{"type":20,"value":1009},"// type_analyzer.rs\n",{"type":14,"tag":70,"props":1011,"children":1012},{"class":72,"line":95},[1013,1017,1022,1027],{"type":14,"tag":70,"props":1014,"children":1015},{"style":77},[1016],{"type":20,"value":916},{"type":14,"tag":70,"props":1018,"children":1019},{"style":77},[1020],{"type":20,"value":1021}," fn",{"type":14,"tag":70,"props":1023,"children":1024},{"style":83},[1025],{"type":20,"value":1026}," resolve_top_level_statement",{"type":14,"tag":70,"props":1028,"children":1029},{"style":89},[1030],{"type":20,"value":1031},"(\n",{"type":14,"tag":70,"props":1033,"children":1034},{"class":72,"line":115},[1035,1040,1044,1049,1054,1059,1064],{"type":14,"tag":70,"props":1036,"children":1037},{"style":89},[1038],{"type":20,"value":1039},"    statement",{"type":14,"tag":70,"props":1041,"children":1042},{"style":77},[1043],{"type":20,"value":948},{"type":14,"tag":70,"props":1045,"children":1046},{"style":77},[1047],{"type":20,"value":1048}," &",{"type":14,"tag":70,"props":1050,"children":1051},{"style":83},[1052],{"type":20,"value":1053},"ast",{"type":14,"tag":70,"props":1055,"children":1056},{"style":77},[1057],{"type":20,"value":1058},"::",{"type":14,"tag":70,"props":1060,"children":1061},{"style":83},[1062],{"type":20,"value":1063},"ToplevelStatement",{"type":14,"tag":70,"props":1065,"children":1066},{"style":89},[1067],{"type":20,"value":1068},",\n",{"type":14,"tag":70,"props":1070,"children":1071},{"class":72,"line":129},[1072,1077,1082,1087,1091,1096,1101,1105,1109],{"type":14,"tag":70,"props":1073,"children":1074},{"style":89},[1075],{"type":20,"value":1076},") ",{"type":14,"tag":70,"props":1078,"children":1079},{"style":77},[1080],{"type":20,"value":1081},"->",{"type":14,"tag":70,"props":1083,"children":1084},{"style":83},[1085],{"type":20,"value":1086}," anyhow",{"type":14,"tag":70,"props":1088,"children":1089},{"style":77},[1090],{"type":20,"value":1058},{"type":14,"tag":70,"props":1092,"children":1093},{"style":83},[1094],{"type":20,"value":1095},"Result",{"type":14,"tag":70,"props":1097,"children":1098},{"style":89},[1099],{"type":20,"value":1100},"\u003Cir",{"type":14,"tag":70,"props":1102,"children":1103},{"style":77},[1104],{"type":20,"value":1058},{"type":14,"tag":70,"props":1106,"children":1107},{"style":83},[1108],{"type":20,"value":1063},{"type":14,"tag":70,"props":1110,"children":1111},{"style":89},[1112],{"type":20,"value":1113},"> {\n",{"type":14,"tag":70,"props":1115,"children":1116},{"class":72,"line":147},[1117,1122],{"type":14,"tag":70,"props":1118,"children":1119},{"style":77},[1120],{"type":20,"value":1121},"    match",{"type":14,"tag":70,"props":1123,"children":1124},{"style":89},[1125],{"type":20,"value":1126}," statement {\n",{"type":14,"tag":70,"props":1128,"children":1129},{"class":72,"line":161},[1130,1135,1139,1143,1147,1152,1157,1162],{"type":14,"tag":70,"props":1131,"children":1132},{"style":83},[1133],{"type":20,"value":1134},"        ast",{"type":14,"tag":70,"props":1136,"children":1137},{"style":77},[1138],{"type":20,"value":1058},{"type":14,"tag":70,"props":1140,"children":1141},{"style":83},[1142],{"type":20,"value":1063},{"type":14,"tag":70,"props":1144,"children":1145},{"style":77},[1146],{"type":20,"value":1058},{"type":14,"tag":70,"props":1148,"children":1149},{"style":83},[1150],{"type":20,"value":1151},"MainFunction",{"type":14,"tag":70,"props":1153,"children":1154},{"style":89},[1155],{"type":20,"value":1156},"(statements) ",{"type":14,"tag":70,"props":1158,"children":1159},{"style":77},[1160],{"type":20,"value":1161},"=>",{"type":14,"tag":70,"props":1163,"children":1164},{"style":89},[1165],{"type":20,"value":473},{"type":14,"tag":70,"props":1167,"children":1168},{"class":72,"line":310},[1169,1174,1178,1183,1187,1191,1195,1200],{"type":14,"tag":70,"props":1170,"children":1171},{"style":77},[1172],{"type":20,"value":1173},"            let",{"type":14,"tag":70,"props":1175,"children":1176},{"style":77},[1177],{"type":20,"value":403},{"type":14,"tag":70,"props":1179,"children":1180},{"style":89},[1181],{"type":20,"value":1182}," ir_statements ",{"type":14,"tag":70,"props":1184,"children":1185},{"style":77},[1186],{"type":20,"value":106},{"type":14,"tag":70,"props":1188,"children":1189},{"style":83},[1190],{"type":20,"value":967},{"type":14,"tag":70,"props":1192,"children":1193},{"style":77},[1194],{"type":20,"value":1058},{"type":14,"tag":70,"props":1196,"children":1197},{"style":83},[1198],{"type":20,"value":1199},"new",{"type":14,"tag":70,"props":1201,"children":1202},{"style":89},[1203],{"type":20,"value":1204},"();\n",{"type":14,"tag":70,"props":1206,"children":1207},{"class":72,"line":492},[1208],{"type":14,"tag":70,"props":1209,"children":1211},{"emptyLinePlaceholder":1210},true,[1212],{"type":20,"value":1213},"\n",{"type":14,"tag":70,"props":1215,"children":1216},{"class":72,"line":501},[1217,1222,1227,1232],{"type":14,"tag":70,"props":1218,"children":1219},{"style":77},[1220],{"type":20,"value":1221},"            for",{"type":14,"tag":70,"props":1223,"children":1224},{"style":89},[1225],{"type":20,"value":1226}," statement ",{"type":14,"tag":70,"props":1228,"children":1229},{"style":77},[1230],{"type":20,"value":1231},"in",{"type":14,"tag":70,"props":1233,"children":1234},{"style":89},[1235],{"type":20,"value":1236}," statements {\n",{"type":14,"tag":70,"props":1238,"children":1239},{"class":72,"line":522},[1240,1245,1250,1254,1259,1264,1269],{"type":14,"tag":70,"props":1241,"children":1242},{"style":77},[1243],{"type":20,"value":1244},"                let",{"type":14,"tag":70,"props":1246,"children":1247},{"style":89},[1248],{"type":20,"value":1249}," ir_statement ",{"type":14,"tag":70,"props":1251,"children":1252},{"style":77},[1253],{"type":20,"value":106},{"type":14,"tag":70,"props":1255,"children":1256},{"style":83},[1257],{"type":20,"value":1258}," resolve_statement",{"type":14,"tag":70,"props":1260,"children":1261},{"style":89},[1262],{"type":20,"value":1263},"(statement)",{"type":14,"tag":70,"props":1265,"children":1266},{"style":77},[1267],{"type":20,"value":1268},"?",{"type":14,"tag":70,"props":1270,"children":1271},{"style":89},[1272],{"type":20,"value":227},{"type":14,"tag":70,"props":1274,"children":1276},{"class":72,"line":1275},11,[1277],{"type":14,"tag":70,"props":1278,"children":1279},{"emptyLinePlaceholder":1210},[1280],{"type":20,"value":1213},{"type":14,"tag":70,"props":1282,"children":1284},{"class":72,"line":1283},12,[1285,1290,1295,1300],{"type":14,"tag":70,"props":1286,"children":1287},{"style":89},[1288],{"type":20,"value":1289},"                ir_statements",{"type":14,"tag":70,"props":1291,"children":1292},{"style":77},[1293],{"type":20,"value":1294},".",{"type":14,"tag":70,"props":1296,"children":1297},{"style":83},[1298],{"type":20,"value":1299},"push",{"type":14,"tag":70,"props":1301,"children":1302},{"style":89},[1303],{"type":20,"value":1304},"(ir_statement);\n",{"type":14,"tag":70,"props":1306,"children":1308},{"class":72,"line":1307},13,[1309],{"type":14,"tag":70,"props":1310,"children":1311},{"style":89},[1312],{"type":20,"value":1313},"            }\n",{"type":14,"tag":70,"props":1315,"children":1317},{"class":72,"line":1316},14,[1318],{"type":14,"tag":70,"props":1319,"children":1320},{"emptyLinePlaceholder":1210},[1321],{"type":20,"value":1213},{"type":14,"tag":70,"props":1323,"children":1325},{"class":72,"line":1324},15,[1326,1331,1335,1340,1344,1348,1352,1357],{"type":14,"tag":70,"props":1327,"children":1328},{"style":83},[1329],{"type":20,"value":1330},"            Ok",{"type":14,"tag":70,"props":1332,"children":1333},{"style":89},[1334],{"type":20,"value":291},{"type":14,"tag":70,"props":1336,"children":1337},{"style":83},[1338],{"type":20,"value":1339},"ir",{"type":14,"tag":70,"props":1341,"children":1342},{"style":77},[1343],{"type":20,"value":1058},{"type":14,"tag":70,"props":1345,"children":1346},{"style":83},[1347],{"type":20,"value":1063},{"type":14,"tag":70,"props":1349,"children":1350},{"style":77},[1351],{"type":20,"value":1058},{"type":14,"tag":70,"props":1353,"children":1354},{"style":83},[1355],{"type":20,"value":1356},"Function",{"type":14,"tag":70,"props":1358,"children":1359},{"style":89},[1360],{"type":20,"value":473},{"type":14,"tag":70,"props":1362,"children":1364},{"class":72,"line":1363},16,[1365,1370,1374,1378,1382,1387,1391,1396],{"type":14,"tag":70,"props":1366,"children":1367},{"style":89},[1368],{"type":20,"value":1369},"                name",{"type":14,"tag":70,"props":1371,"children":1372},{"style":77},[1373],{"type":20,"value":948},{"type":14,"tag":70,"props":1375,"children":1376},{"style":83},[1377],{"type":20,"value":953},{"type":14,"tag":70,"props":1379,"children":1380},{"style":77},[1381],{"type":20,"value":1058},{"type":14,"tag":70,"props":1383,"children":1384},{"style":83},[1385],{"type":20,"value":1386},"from",{"type":14,"tag":70,"props":1388,"children":1389},{"style":89},[1390],{"type":20,"value":291},{"type":14,"tag":70,"props":1392,"children":1393},{"style":294},[1394],{"type":20,"value":1395},"\"main\"",{"type":14,"tag":70,"props":1397,"children":1398},{"style":89},[1399],{"type":20,"value":1400},"),\n",{"type":14,"tag":70,"props":1402,"children":1404},{"class":72,"line":1403},17,[1405,1410,1414],{"type":14,"tag":70,"props":1406,"children":1407},{"style":89},[1408],{"type":20,"value":1409},"                body",{"type":14,"tag":70,"props":1411,"children":1412},{"style":77},[1413],{"type":20,"value":948},{"type":14,"tag":70,"props":1415,"children":1416},{"style":89},[1417],{"type":20,"value":1418}," ir_statements,\n",{"type":14,"tag":70,"props":1420,"children":1422},{"class":72,"line":1421},18,[1423],{"type":14,"tag":70,"props":1424,"children":1425},{"style":89},[1426],{"type":20,"value":1427},"            })\n",{"type":14,"tag":70,"props":1429,"children":1431},{"class":72,"line":1430},19,[1432],{"type":14,"tag":70,"props":1433,"children":1434},{"style":89},[1435],{"type":20,"value":1436},"        }\n",{"type":14,"tag":70,"props":1438,"children":1440},{"class":72,"line":1439},20,[1441],{"type":14,"tag":70,"props":1442,"children":1443},{"style":89},[1444],{"type":20,"value":498},{"type":14,"tag":70,"props":1446,"children":1448},{"class":72,"line":1447},21,[1449],{"type":14,"tag":70,"props":1450,"children":1451},{"style":89},[1452],{"type":20,"value":663},{"type":14,"tag":22,"props":1454,"children":1455},{},[1456],{"type":20,"value":1457},"And then we use this name in the code gen:",{"type":14,"tag":59,"props":1459,"children":1461},{"code":1460,"language":177,"meta":7,"className":178,"style":7},"// code_gen.rs\nfn compile_top_level_statement(&self, statement: &ir::ToplevelStatement) {\n    match statement {\n        ir::ToplevelStatement::Function {\n            name,\n            body: statements,\n        } => {\n            let i32_type = self.context.i32_type();\n            let function_type = i32_type.fn_type(&[], false);\n            let function = self.module.add_function(name, function_type, None);\n            let entry_block = self.context.append_basic_block(function, \"entry\");\n            self.builder.position_at_end(entry_block);\n\n            for statement in statements {\n                self.compile_statement(statement);\n            }\n\n            self.builder\n                .build_return(Some(&i32_type.const_int(0, false)));\n        }\n    }\n}\n",[1462],{"type":14,"tag":66,"props":1463,"children":1464},{"__ignoreMap":7},[1465,1473,1529,1540,1568,1576,1593,1609,1652,1704,1756,1807,1838,1845,1864,1886,1893,1900,1916,1982,1989,1996],{"type":14,"tag":70,"props":1466,"children":1467},{"class":72,"line":73},[1468],{"type":14,"tag":70,"props":1469,"children":1470},{"style":165},[1471],{"type":20,"value":1472},"// code_gen.rs\n",{"type":14,"tag":70,"props":1474,"children":1475},{"class":72,"line":95},[1476,1480,1485,1489,1494,1499,1504,1508,1512,1516,1520,1524],{"type":14,"tag":70,"props":1477,"children":1478},{"style":77},[1479],{"type":20,"value":190},{"type":14,"tag":70,"props":1481,"children":1482},{"style":83},[1483],{"type":20,"value":1484}," compile_top_level_statement",{"type":14,"tag":70,"props":1486,"children":1487},{"style":89},[1488],{"type":20,"value":291},{"type":14,"tag":70,"props":1490,"children":1491},{"style":77},[1492],{"type":20,"value":1493},"&",{"type":14,"tag":70,"props":1495,"children":1496},{"style":109},[1497],{"type":20,"value":1498},"self",{"type":14,"tag":70,"props":1500,"children":1501},{"style":89},[1502],{"type":20,"value":1503},", statement",{"type":14,"tag":70,"props":1505,"children":1506},{"style":77},[1507],{"type":20,"value":948},{"type":14,"tag":70,"props":1509,"children":1510},{"style":77},[1511],{"type":20,"value":1048},{"type":14,"tag":70,"props":1513,"children":1514},{"style":83},[1515],{"type":20,"value":1339},{"type":14,"tag":70,"props":1517,"children":1518},{"style":77},[1519],{"type":20,"value":1058},{"type":14,"tag":70,"props":1521,"children":1522},{"style":83},[1523],{"type":20,"value":1063},{"type":14,"tag":70,"props":1525,"children":1526},{"style":89},[1527],{"type":20,"value":1528},") {\n",{"type":14,"tag":70,"props":1530,"children":1531},{"class":72,"line":115},[1532,1536],{"type":14,"tag":70,"props":1533,"children":1534},{"style":77},[1535],{"type":20,"value":1121},{"type":14,"tag":70,"props":1537,"children":1538},{"style":89},[1539],{"type":20,"value":1126},{"type":14,"tag":70,"props":1541,"children":1542},{"class":72,"line":129},[1543,1548,1552,1556,1560,1564],{"type":14,"tag":70,"props":1544,"children":1545},{"style":83},[1546],{"type":20,"value":1547},"        ir",{"type":14,"tag":70,"props":1549,"children":1550},{"style":77},[1551],{"type":20,"value":1058},{"type":14,"tag":70,"props":1553,"children":1554},{"style":83},[1555],{"type":20,"value":1063},{"type":14,"tag":70,"props":1557,"children":1558},{"style":77},[1559],{"type":20,"value":1058},{"type":14,"tag":70,"props":1561,"children":1562},{"style":83},[1563],{"type":20,"value":1356},{"type":14,"tag":70,"props":1565,"children":1566},{"style":89},[1567],{"type":20,"value":473},{"type":14,"tag":70,"props":1569,"children":1570},{"class":72,"line":147},[1571],{"type":14,"tag":70,"props":1572,"children":1573},{"style":89},[1574],{"type":20,"value":1575},"            name,\n",{"type":14,"tag":70,"props":1577,"children":1578},{"class":72,"line":161},[1579,1584,1588],{"type":14,"tag":70,"props":1580,"children":1581},{"style":89},[1582],{"type":20,"value":1583},"            body",{"type":14,"tag":70,"props":1585,"children":1586},{"style":77},[1587],{"type":20,"value":948},{"type":14,"tag":70,"props":1589,"children":1590},{"style":89},[1591],{"type":20,"value":1592}," statements,\n",{"type":14,"tag":70,"props":1594,"children":1595},{"class":72,"line":310},[1596,1601,1605],{"type":14,"tag":70,"props":1597,"children":1598},{"style":89},[1599],{"type":20,"value":1600},"        } ",{"type":14,"tag":70,"props":1602,"children":1603},{"style":77},[1604],{"type":20,"value":1161},{"type":14,"tag":70,"props":1606,"children":1607},{"style":89},[1608],{"type":20,"value":473},{"type":14,"tag":70,"props":1610,"children":1611},{"class":72,"line":492},[1612,1616,1621,1625,1630,1634,1639,1643,1648],{"type":14,"tag":70,"props":1613,"children":1614},{"style":77},[1615],{"type":20,"value":1173},{"type":14,"tag":70,"props":1617,"children":1618},{"style":89},[1619],{"type":20,"value":1620}," i32_type ",{"type":14,"tag":70,"props":1622,"children":1623},{"style":77},[1624],{"type":20,"value":106},{"type":14,"tag":70,"props":1626,"children":1627},{"style":109},[1628],{"type":20,"value":1629}," self",{"type":14,"tag":70,"props":1631,"children":1632},{"style":77},[1633],{"type":20,"value":1294},{"type":14,"tag":70,"props":1635,"children":1636},{"style":89},[1637],{"type":20,"value":1638},"context",{"type":14,"tag":70,"props":1640,"children":1641},{"style":77},[1642],{"type":20,"value":1294},{"type":14,"tag":70,"props":1644,"children":1645},{"style":83},[1646],{"type":20,"value":1647},"i32_type",{"type":14,"tag":70,"props":1649,"children":1650},{"style":89},[1651],{"type":20,"value":1204},{"type":14,"tag":70,"props":1653,"children":1654},{"class":72,"line":501},[1655,1659,1664,1668,1673,1677,1682,1686,1690,1695,1700],{"type":14,"tag":70,"props":1656,"children":1657},{"style":77},[1658],{"type":20,"value":1173},{"type":14,"tag":70,"props":1660,"children":1661},{"style":89},[1662],{"type":20,"value":1663}," function_type ",{"type":14,"tag":70,"props":1665,"children":1666},{"style":77},[1667],{"type":20,"value":106},{"type":14,"tag":70,"props":1669,"children":1670},{"style":89},[1671],{"type":20,"value":1672}," i32_type",{"type":14,"tag":70,"props":1674,"children":1675},{"style":77},[1676],{"type":20,"value":1294},{"type":14,"tag":70,"props":1678,"children":1679},{"style":83},[1680],{"type":20,"value":1681},"fn_type",{"type":14,"tag":70,"props":1683,"children":1684},{"style":89},[1685],{"type":20,"value":291},{"type":14,"tag":70,"props":1687,"children":1688},{"style":77},[1689],{"type":20,"value":1493},{"type":14,"tag":70,"props":1691,"children":1692},{"style":89},[1693],{"type":20,"value":1694},"[], ",{"type":14,"tag":70,"props":1696,"children":1697},{"style":109},[1698],{"type":20,"value":1699},"false",{"type":14,"tag":70,"props":1701,"children":1702},{"style":89},[1703],{"type":20,"value":519},{"type":14,"tag":70,"props":1705,"children":1706},{"class":72,"line":522},[1707,1711,1716,1720,1724,1728,1733,1737,1742,1747,1752],{"type":14,"tag":70,"props":1708,"children":1709},{"style":77},[1710],{"type":20,"value":1173},{"type":14,"tag":70,"props":1712,"children":1713},{"style":89},[1714],{"type":20,"value":1715}," function ",{"type":14,"tag":70,"props":1717,"children":1718},{"style":77},[1719],{"type":20,"value":106},{"type":14,"tag":70,"props":1721,"children":1722},{"style":109},[1723],{"type":20,"value":1629},{"type":14,"tag":70,"props":1725,"children":1726},{"style":77},[1727],{"type":20,"value":1294},{"type":14,"tag":70,"props":1729,"children":1730},{"style":89},[1731],{"type":20,"value":1732},"module",{"type":14,"tag":70,"props":1734,"children":1735},{"style":77},[1736],{"type":20,"value":1294},{"type":14,"tag":70,"props":1738,"children":1739},{"style":83},[1740],{"type":20,"value":1741},"add_function",{"type":14,"tag":70,"props":1743,"children":1744},{"style":89},[1745],{"type":20,"value":1746},"(name, function_type, ",{"type":14,"tag":70,"props":1748,"children":1749},{"style":83},[1750],{"type":20,"value":1751},"None",{"type":14,"tag":70,"props":1753,"children":1754},{"style":89},[1755],{"type":20,"value":519},{"type":14,"tag":70,"props":1757,"children":1758},{"class":72,"line":1275},[1759,1763,1768,1772,1776,1780,1784,1788,1793,1798,1803],{"type":14,"tag":70,"props":1760,"children":1761},{"style":77},[1762],{"type":20,"value":1173},{"type":14,"tag":70,"props":1764,"children":1765},{"style":89},[1766],{"type":20,"value":1767}," entry_block ",{"type":14,"tag":70,"props":1769,"children":1770},{"style":77},[1771],{"type":20,"value":106},{"type":14,"tag":70,"props":1773,"children":1774},{"style":109},[1775],{"type":20,"value":1629},{"type":14,"tag":70,"props":1777,"children":1778},{"style":77},[1779],{"type":20,"value":1294},{"type":14,"tag":70,"props":1781,"children":1782},{"style":89},[1783],{"type":20,"value":1638},{"type":14,"tag":70,"props":1785,"children":1786},{"style":77},[1787],{"type":20,"value":1294},{"type":14,"tag":70,"props":1789,"children":1790},{"style":83},[1791],{"type":20,"value":1792},"append_basic_block",{"type":14,"tag":70,"props":1794,"children":1795},{"style":89},[1796],{"type":20,"value":1797},"(function, ",{"type":14,"tag":70,"props":1799,"children":1800},{"style":294},[1801],{"type":20,"value":1802},"\"entry\"",{"type":14,"tag":70,"props":1804,"children":1805},{"style":89},[1806],{"type":20,"value":519},{"type":14,"tag":70,"props":1808,"children":1809},{"class":72,"line":1283},[1810,1815,1819,1824,1828,1833],{"type":14,"tag":70,"props":1811,"children":1812},{"style":109},[1813],{"type":20,"value":1814},"            self",{"type":14,"tag":70,"props":1816,"children":1817},{"style":77},[1818],{"type":20,"value":1294},{"type":14,"tag":70,"props":1820,"children":1821},{"style":89},[1822],{"type":20,"value":1823},"builder",{"type":14,"tag":70,"props":1825,"children":1826},{"style":77},[1827],{"type":20,"value":1294},{"type":14,"tag":70,"props":1829,"children":1830},{"style":83},[1831],{"type":20,"value":1832},"position_at_end",{"type":14,"tag":70,"props":1834,"children":1835},{"style":89},[1836],{"type":20,"value":1837},"(entry_block);\n",{"type":14,"tag":70,"props":1839,"children":1840},{"class":72,"line":1307},[1841],{"type":14,"tag":70,"props":1842,"children":1843},{"emptyLinePlaceholder":1210},[1844],{"type":20,"value":1213},{"type":14,"tag":70,"props":1846,"children":1847},{"class":72,"line":1316},[1848,1852,1856,1860],{"type":14,"tag":70,"props":1849,"children":1850},{"style":77},[1851],{"type":20,"value":1221},{"type":14,"tag":70,"props":1853,"children":1854},{"style":89},[1855],{"type":20,"value":1226},{"type":14,"tag":70,"props":1857,"children":1858},{"style":77},[1859],{"type":20,"value":1231},{"type":14,"tag":70,"props":1861,"children":1862},{"style":89},[1863],{"type":20,"value":1236},{"type":14,"tag":70,"props":1865,"children":1866},{"class":72,"line":1324},[1867,1872,1876,1881],{"type":14,"tag":70,"props":1868,"children":1869},{"style":109},[1870],{"type":20,"value":1871},"                self",{"type":14,"tag":70,"props":1873,"children":1874},{"style":77},[1875],{"type":20,"value":1294},{"type":14,"tag":70,"props":1877,"children":1878},{"style":83},[1879],{"type":20,"value":1880},"compile_statement",{"type":14,"tag":70,"props":1882,"children":1883},{"style":89},[1884],{"type":20,"value":1885},"(statement);\n",{"type":14,"tag":70,"props":1887,"children":1888},{"class":72,"line":1363},[1889],{"type":14,"tag":70,"props":1890,"children":1891},{"style":89},[1892],{"type":20,"value":1313},{"type":14,"tag":70,"props":1894,"children":1895},{"class":72,"line":1403},[1896],{"type":14,"tag":70,"props":1897,"children":1898},{"emptyLinePlaceholder":1210},[1899],{"type":20,"value":1213},{"type":14,"tag":70,"props":1901,"children":1902},{"class":72,"line":1421},[1903,1907,1911],{"type":14,"tag":70,"props":1904,"children":1905},{"style":109},[1906],{"type":20,"value":1814},{"type":14,"tag":70,"props":1908,"children":1909},{"style":77},[1910],{"type":20,"value":1294},{"type":14,"tag":70,"props":1912,"children":1913},{"style":89},[1914],{"type":20,"value":1915},"builder\n",{"type":14,"tag":70,"props":1917,"children":1918},{"class":72,"line":1430},[1919,1924,1929,1933,1938,1942,1946,1950,1954,1959,1963,1968,1973,1977],{"type":14,"tag":70,"props":1920,"children":1921},{"style":77},[1922],{"type":20,"value":1923},"                .",{"type":14,"tag":70,"props":1925,"children":1926},{"style":83},[1927],{"type":20,"value":1928},"build_return",{"type":14,"tag":70,"props":1930,"children":1931},{"style":89},[1932],{"type":20,"value":291},{"type":14,"tag":70,"props":1934,"children":1935},{"style":83},[1936],{"type":20,"value":1937},"Some",{"type":14,"tag":70,"props":1939,"children":1940},{"style":89},[1941],{"type":20,"value":291},{"type":14,"tag":70,"props":1943,"children":1944},{"style":77},[1945],{"type":20,"value":1493},{"type":14,"tag":70,"props":1947,"children":1948},{"style":89},[1949],{"type":20,"value":1647},{"type":14,"tag":70,"props":1951,"children":1952},{"style":77},[1953],{"type":20,"value":1294},{"type":14,"tag":70,"props":1955,"children":1956},{"style":83},[1957],{"type":20,"value":1958},"const_int",{"type":14,"tag":70,"props":1960,"children":1961},{"style":89},[1962],{"type":20,"value":291},{"type":14,"tag":70,"props":1964,"children":1965},{"style":109},[1966],{"type":20,"value":1967},"0",{"type":14,"tag":70,"props":1969,"children":1970},{"style":89},[1971],{"type":20,"value":1972},", ",{"type":14,"tag":70,"props":1974,"children":1975},{"style":109},[1976],{"type":20,"value":1699},{"type":14,"tag":70,"props":1978,"children":1979},{"style":89},[1980],{"type":20,"value":1981},")));\n",{"type":14,"tag":70,"props":1983,"children":1984},{"class":72,"line":1439},[1985],{"type":14,"tag":70,"props":1986,"children":1987},{"style":89},[1988],{"type":20,"value":1436},{"type":14,"tag":70,"props":1990,"children":1991},{"class":72,"line":1447},[1992],{"type":14,"tag":70,"props":1993,"children":1994},{"style":89},[1995],{"type":20,"value":498},{"type":14,"tag":70,"props":1997,"children":1999},{"class":72,"line":1998},22,[2000],{"type":14,"tag":70,"props":2001,"children":2002},{"style":89},[2003],{"type":20,"value":663},{"type":14,"tag":22,"props":2005,"children":2006},{},[2007],{"type":20,"value":2008},"Yes we are still hardcoding the return type and statement, when we add proper function support we will rework that.",{"type":14,"tag":858,"props":2010,"children":2012},{"id":2011},"adding-variables",[2013],{"type":20,"value":2014},"Adding variables",{"type":14,"tag":22,"props":2016,"children":2017},{},[2018],{"type":20,"value":2019},"We are going to have a two scope structs. Function scope and block scope. As mentioned we need to allocate the vars at the start of the function, so the function scope will store a reference to all the vars.",{"type":14,"tag":22,"props":2021,"children":2022},{},[2023],{"type":20,"value":2024},"Meanwhile the block scope will be used during type resolution. We are going be to be generating unique ids for the vars, because for example here we are referring to different xs.",{"type":14,"tag":59,"props":2026,"children":2028},{"code":2027},"let x = 1;\nif true {\n    let x = 2;\n    assert x == 2;\n}\nassert x == 1;\n",[2029],{"type":14,"tag":66,"props":2030,"children":2031},{"__ignoreMap":7},[2032],{"type":20,"value":2027},{"type":14,"tag":22,"props":2034,"children":2035},{},[2036],{"type":20,"value":2037},"And ofc here are the tests:",{"type":14,"tag":59,"props":2039,"children":2041},{"code":2040},"${\n    let x = 1;\n    let y = 3;\n    assert x == 1;\n    assert y == 3;\n    \n    set x = 2;\n    assert x == 2;\n\n    let z = true;\n    assert z;\n\n    set z = false;\n    assert !z;\n}\n",[2042],{"type":14,"tag":66,"props":2043,"children":2044},{"__ignoreMap":7},[2045],{"type":20,"value":2040},{"type":14,"tag":22,"props":2047,"children":2048},{},[2049,2051,2057,2059,2065,2067,2072],{"type":20,"value":2050},"The reason we use ",{"type":14,"tag":66,"props":2052,"children":2054},{"className":2053},[],[2055],{"type":20,"value":2056},"set x = y",{"type":20,"value":2058}," instead of just ",{"type":14,"tag":66,"props":2060,"children":2062},{"className":2061},[],[2063],{"type":20,"value":2064},"x = y",{"type":20,"value":2066}," is that ",{"type":14,"tag":66,"props":2068,"children":2070},{"className":2069},[],[2071],{"type":20,"value":2056},{"type":20,"value":2073}," is much easier to parse.",{"type":14,"tag":40,"props":2075,"children":2077},{"id":2076},"parsing",[2078],{"type":20,"value":2079},"Parsing",{"type":14,"tag":22,"props":2081,"children":2082},{},[2083,2085,2090,2092,2098],{"type":20,"value":2084},"We need add a token for ",{"type":14,"tag":66,"props":2086,"children":2088},{"className":2087},[],[2089],{"type":20,"value":764},{"type":20,"value":2091}," and ",{"type":14,"tag":66,"props":2093,"children":2095},{"className":2094},[],[2096],{"type":20,"value":2097},"set",{"type":20,"value":2099},", and then lets modify the ast:",{"type":14,"tag":59,"props":2101,"children":2103},{"code":2102,"language":177,"meta":7,"className":178,"style":7},"// parser/ast.rs\n#[derive(Debug)]\npub enum Statement {\n    Print(Expression),\n    Assert(Expression, Option\u003CString>),\n    // let x = 1;\n    Declaration(String, Expression),\n    // x = 1;\n    Assignment(String, Expression),\n}\n\n#[derive(Debug)]\npub enum Literal {\n    Integer(IntType),\n    Boolean(bool),\n    Variable(String),\n}\n",[2104],{"type":14,"tag":66,"props":2105,"children":2106},{"__ignoreMap":7},[2107,2115,2130,2150,2171,2210,2218,2246,2254,2282,2289,2296,2311,2331,2352,2373,2393],{"type":14,"tag":70,"props":2108,"children":2109},{"class":72,"line":73},[2110],{"type":14,"tag":70,"props":2111,"children":2112},{"style":165},[2113],{"type":20,"value":2114},"// parser/ast.rs\n",{"type":14,"tag":70,"props":2116,"children":2117},{"class":72,"line":95},[2118,2122,2126],{"type":14,"tag":70,"props":2119,"children":2120},{"style":89},[2121],{"type":20,"value":898},{"type":14,"tag":70,"props":2123,"children":2124},{"style":83},[2125],{"type":20,"value":903},{"type":14,"tag":70,"props":2127,"children":2128},{"style":89},[2129],{"type":20,"value":908},{"type":14,"tag":70,"props":2131,"children":2132},{"class":72,"line":115},[2133,2137,2141,2146],{"type":14,"tag":70,"props":2134,"children":2135},{"style":77},[2136],{"type":20,"value":916},{"type":14,"tag":70,"props":2138,"children":2139},{"style":77},[2140],{"type":20,"value":921},{"type":14,"tag":70,"props":2142,"children":2143},{"style":83},[2144],{"type":20,"value":2145}," Statement",{"type":14,"tag":70,"props":2147,"children":2148},{"style":89},[2149],{"type":20,"value":473},{"type":14,"tag":70,"props":2151,"children":2152},{"class":72,"line":129},[2153,2158,2162,2167],{"type":14,"tag":70,"props":2154,"children":2155},{"style":83},[2156],{"type":20,"value":2157},"    Print",{"type":14,"tag":70,"props":2159,"children":2160},{"style":89},[2161],{"type":20,"value":291},{"type":14,"tag":70,"props":2163,"children":2164},{"style":83},[2165],{"type":20,"value":2166},"Expression",{"type":14,"tag":70,"props":2168,"children":2169},{"style":89},[2170],{"type":20,"value":1400},{"type":14,"tag":70,"props":2172,"children":2173},{"class":72,"line":147},[2174,2179,2183,2187,2191,2196,2200,2205],{"type":14,"tag":70,"props":2175,"children":2176},{"style":83},[2177],{"type":20,"value":2178},"    Assert",{"type":14,"tag":70,"props":2180,"children":2181},{"style":89},[2182],{"type":20,"value":291},{"type":14,"tag":70,"props":2184,"children":2185},{"style":83},[2186],{"type":20,"value":2166},{"type":14,"tag":70,"props":2188,"children":2189},{"style":89},[2190],{"type":20,"value":1972},{"type":14,"tag":70,"props":2192,"children":2193},{"style":83},[2194],{"type":20,"value":2195},"Option",{"type":14,"tag":70,"props":2197,"children":2198},{"style":89},[2199],{"type":20,"value":972},{"type":14,"tag":70,"props":2201,"children":2202},{"style":83},[2203],{"type":20,"value":2204},"String",{"type":14,"tag":70,"props":2206,"children":2207},{"style":89},[2208],{"type":20,"value":2209},">),\n",{"type":14,"tag":70,"props":2211,"children":2212},{"class":72,"line":161},[2213],{"type":14,"tag":70,"props":2214,"children":2215},{"style":165},[2216],{"type":20,"value":2217},"    // let x = 1;\n",{"type":14,"tag":70,"props":2219,"children":2220},{"class":72,"line":310},[2221,2226,2230,2234,2238,2242],{"type":14,"tag":70,"props":2222,"children":2223},{"style":83},[2224],{"type":20,"value":2225},"    Declaration",{"type":14,"tag":70,"props":2227,"children":2228},{"style":89},[2229],{"type":20,"value":291},{"type":14,"tag":70,"props":2231,"children":2232},{"style":83},[2233],{"type":20,"value":2204},{"type":14,"tag":70,"props":2235,"children":2236},{"style":89},[2237],{"type":20,"value":1972},{"type":14,"tag":70,"props":2239,"children":2240},{"style":83},[2241],{"type":20,"value":2166},{"type":14,"tag":70,"props":2243,"children":2244},{"style":89},[2245],{"type":20,"value":1400},{"type":14,"tag":70,"props":2247,"children":2248},{"class":72,"line":492},[2249],{"type":14,"tag":70,"props":2250,"children":2251},{"style":165},[2252],{"type":20,"value":2253},"    // x = 1;\n",{"type":14,"tag":70,"props":2255,"children":2256},{"class":72,"line":501},[2257,2262,2266,2270,2274,2278],{"type":14,"tag":70,"props":2258,"children":2259},{"style":83},[2260],{"type":20,"value":2261},"    Assignment",{"type":14,"tag":70,"props":2263,"children":2264},{"style":89},[2265],{"type":20,"value":291},{"type":14,"tag":70,"props":2267,"children":2268},{"style":83},[2269],{"type":20,"value":2204},{"type":14,"tag":70,"props":2271,"children":2272},{"style":89},[2273],{"type":20,"value":1972},{"type":14,"tag":70,"props":2275,"children":2276},{"style":83},[2277],{"type":20,"value":2166},{"type":14,"tag":70,"props":2279,"children":2280},{"style":89},[2281],{"type":20,"value":1400},{"type":14,"tag":70,"props":2283,"children":2284},{"class":72,"line":522},[2285],{"type":14,"tag":70,"props":2286,"children":2287},{"style":89},[2288],{"type":20,"value":663},{"type":14,"tag":70,"props":2290,"children":2291},{"class":72,"line":1275},[2292],{"type":14,"tag":70,"props":2293,"children":2294},{"emptyLinePlaceholder":1210},[2295],{"type":20,"value":1213},{"type":14,"tag":70,"props":2297,"children":2298},{"class":72,"line":1283},[2299,2303,2307],{"type":14,"tag":70,"props":2300,"children":2301},{"style":89},[2302],{"type":20,"value":898},{"type":14,"tag":70,"props":2304,"children":2305},{"style":83},[2306],{"type":20,"value":903},{"type":14,"tag":70,"props":2308,"children":2309},{"style":89},[2310],{"type":20,"value":908},{"type":14,"tag":70,"props":2312,"children":2313},{"class":72,"line":1307},[2314,2318,2322,2327],{"type":14,"tag":70,"props":2315,"children":2316},{"style":77},[2317],{"type":20,"value":916},{"type":14,"tag":70,"props":2319,"children":2320},{"style":77},[2321],{"type":20,"value":921},{"type":14,"tag":70,"props":2323,"children":2324},{"style":83},[2325],{"type":20,"value":2326}," Literal",{"type":14,"tag":70,"props":2328,"children":2329},{"style":89},[2330],{"type":20,"value":473},{"type":14,"tag":70,"props":2332,"children":2333},{"class":72,"line":1316},[2334,2339,2343,2348],{"type":14,"tag":70,"props":2335,"children":2336},{"style":83},[2337],{"type":20,"value":2338},"    Integer",{"type":14,"tag":70,"props":2340,"children":2341},{"style":89},[2342],{"type":20,"value":291},{"type":14,"tag":70,"props":2344,"children":2345},{"style":83},[2346],{"type":20,"value":2347},"IntType",{"type":14,"tag":70,"props":2349,"children":2350},{"style":89},[2351],{"type":20,"value":1400},{"type":14,"tag":70,"props":2353,"children":2354},{"class":72,"line":1324},[2355,2360,2364,2369],{"type":14,"tag":70,"props":2356,"children":2357},{"style":83},[2358],{"type":20,"value":2359},"    Boolean",{"type":14,"tag":70,"props":2361,"children":2362},{"style":89},[2363],{"type":20,"value":291},{"type":14,"tag":70,"props":2365,"children":2366},{"style":83},[2367],{"type":20,"value":2368},"bool",{"type":14,"tag":70,"props":2370,"children":2371},{"style":89},[2372],{"type":20,"value":1400},{"type":14,"tag":70,"props":2374,"children":2375},{"class":72,"line":1363},[2376,2381,2385,2389],{"type":14,"tag":70,"props":2377,"children":2378},{"style":83},[2379],{"type":20,"value":2380},"    Variable",{"type":14,"tag":70,"props":2382,"children":2383},{"style":89},[2384],{"type":20,"value":291},{"type":14,"tag":70,"props":2386,"children":2387},{"style":83},[2388],{"type":20,"value":2204},{"type":14,"tag":70,"props":2390,"children":2391},{"style":89},[2392],{"type":20,"value":1400},{"type":14,"tag":70,"props":2394,"children":2395},{"class":72,"line":1403},[2396],{"type":14,"tag":70,"props":2397,"children":2398},{"style":89},[2399],{"type":20,"value":663},{"type":14,"tag":22,"props":2401,"children":2402},{},[2403,2405],{"type":20,"value":2404},"We also add a variable expression in the ",{"type":14,"tag":66,"props":2406,"children":2408},{"className":2407},[],[2409],{"type":20,"value":2410},"Literal",{"type":14,"tag":22,"props":2412,"children":2413},{},[2414,2416,2421,2422,2427],{"type":20,"value":2415},"And we can use the same parsing for ",{"type":14,"tag":66,"props":2417,"children":2419},{"className":2418},[],[2420],{"type":20,"value":764},{"type":20,"value":2091},{"type":14,"tag":66,"props":2423,"children":2425},{"className":2424},[],[2426],{"type":20,"value":2097},{"type":20,"value":948},{"type":14,"tag":59,"props":2429,"children":2431},{"code":2430,"language":177,"meta":7,"className":178,"style":7},"// parsing/parser.rs\nTokenType::Let | TokenType::Set => {\n    let identifier = self.advance()?;\n    match identifier._type {\n        TokenType::Identifier(name) => {\n            self.expect(TokenType::Eq)?;\n            let expression = self.expression()?;\n            self.expect(TokenType::SemiColon)?;\n            Ok(match token._type {\n                TokenType::Let => ast::Statement::Declaration(name, expression),\n                TokenType::Set => ast::Statement::Assignment(name, expression),\n                _ => unreachable!(),\n            })\n        }\n        _ => Err(error(identifier, \"Identifier\".to_string()))?,\n    }\n",[2432],{"type":14,"tag":66,"props":2433,"children":2434},{"__ignoreMap":7},[2435,2443,2488,2530,2551,2581,2627,2668,2712,2741,2788,2832,2854,2861,2868,2926],{"type":14,"tag":70,"props":2436,"children":2437},{"class":72,"line":73},[2438],{"type":14,"tag":70,"props":2439,"children":2440},{"style":165},[2441],{"type":20,"value":2442},"// parsing/parser.rs\n",{"type":14,"tag":70,"props":2444,"children":2445},{"class":72,"line":95},[2446,2451,2455,2460,2465,2470,2474,2479,2484],{"type":14,"tag":70,"props":2447,"children":2448},{"style":83},[2449],{"type":20,"value":2450},"TokenType",{"type":14,"tag":70,"props":2452,"children":2453},{"style":77},[2454],{"type":20,"value":1058},{"type":14,"tag":70,"props":2456,"children":2457},{"style":83},[2458],{"type":20,"value":2459},"Let",{"type":14,"tag":70,"props":2461,"children":2462},{"style":77},[2463],{"type":20,"value":2464}," |",{"type":14,"tag":70,"props":2466,"children":2467},{"style":83},[2468],{"type":20,"value":2469}," TokenType",{"type":14,"tag":70,"props":2471,"children":2472},{"style":77},[2473],{"type":20,"value":1058},{"type":14,"tag":70,"props":2475,"children":2476},{"style":83},[2477],{"type":20,"value":2478},"Set",{"type":14,"tag":70,"props":2480,"children":2481},{"style":77},[2482],{"type":20,"value":2483}," =>",{"type":14,"tag":70,"props":2485,"children":2486},{"style":89},[2487],{"type":20,"value":473},{"type":14,"tag":70,"props":2489,"children":2490},{"class":72,"line":115},[2491,2495,2500,2504,2508,2512,2517,2522,2526],{"type":14,"tag":70,"props":2492,"children":2493},{"style":77},[2494],{"type":20,"value":208},{"type":14,"tag":70,"props":2496,"children":2497},{"style":89},[2498],{"type":20,"value":2499}," identifier ",{"type":14,"tag":70,"props":2501,"children":2502},{"style":77},[2503],{"type":20,"value":106},{"type":14,"tag":70,"props":2505,"children":2506},{"style":109},[2507],{"type":20,"value":1629},{"type":14,"tag":70,"props":2509,"children":2510},{"style":77},[2511],{"type":20,"value":1294},{"type":14,"tag":70,"props":2513,"children":2514},{"style":83},[2515],{"type":20,"value":2516},"advance",{"type":14,"tag":70,"props":2518,"children":2519},{"style":89},[2520],{"type":20,"value":2521},"()",{"type":14,"tag":70,"props":2523,"children":2524},{"style":77},[2525],{"type":20,"value":1268},{"type":14,"tag":70,"props":2527,"children":2528},{"style":89},[2529],{"type":20,"value":227},{"type":14,"tag":70,"props":2531,"children":2532},{"class":72,"line":129},[2533,2537,2542,2546],{"type":14,"tag":70,"props":2534,"children":2535},{"style":77},[2536],{"type":20,"value":1121},{"type":14,"tag":70,"props":2538,"children":2539},{"style":89},[2540],{"type":20,"value":2541}," identifier",{"type":14,"tag":70,"props":2543,"children":2544},{"style":77},[2545],{"type":20,"value":1294},{"type":14,"tag":70,"props":2547,"children":2548},{"style":89},[2549],{"type":20,"value":2550},"_type {\n",{"type":14,"tag":70,"props":2552,"children":2553},{"class":72,"line":147},[2554,2559,2563,2568,2573,2577],{"type":14,"tag":70,"props":2555,"children":2556},{"style":83},[2557],{"type":20,"value":2558},"        TokenType",{"type":14,"tag":70,"props":2560,"children":2561},{"style":77},[2562],{"type":20,"value":1058},{"type":14,"tag":70,"props":2564,"children":2565},{"style":83},[2566],{"type":20,"value":2567},"Identifier",{"type":14,"tag":70,"props":2569,"children":2570},{"style":89},[2571],{"type":20,"value":2572},"(name) ",{"type":14,"tag":70,"props":2574,"children":2575},{"style":77},[2576],{"type":20,"value":1161},{"type":14,"tag":70,"props":2578,"children":2579},{"style":89},[2580],{"type":20,"value":473},{"type":14,"tag":70,"props":2582,"children":2583},{"class":72,"line":161},[2584,2588,2592,2597,2601,2605,2609,2614,2619,2623],{"type":14,"tag":70,"props":2585,"children":2586},{"style":109},[2587],{"type":20,"value":1814},{"type":14,"tag":70,"props":2589,"children":2590},{"style":77},[2591],{"type":20,"value":1294},{"type":14,"tag":70,"props":2593,"children":2594},{"style":83},[2595],{"type":20,"value":2596},"expect",{"type":14,"tag":70,"props":2598,"children":2599},{"style":89},[2600],{"type":20,"value":291},{"type":14,"tag":70,"props":2602,"children":2603},{"style":83},[2604],{"type":20,"value":2450},{"type":14,"tag":70,"props":2606,"children":2607},{"style":77},[2608],{"type":20,"value":1058},{"type":14,"tag":70,"props":2610,"children":2611},{"style":83},[2612],{"type":20,"value":2613},"Eq",{"type":14,"tag":70,"props":2615,"children":2616},{"style":89},[2617],{"type":20,"value":2618},")",{"type":14,"tag":70,"props":2620,"children":2621},{"style":77},[2622],{"type":20,"value":1268},{"type":14,"tag":70,"props":2624,"children":2625},{"style":89},[2626],{"type":20,"value":227},{"type":14,"tag":70,"props":2628,"children":2629},{"class":72,"line":310},[2630,2634,2639,2643,2647,2651,2656,2660,2664],{"type":14,"tag":70,"props":2631,"children":2632},{"style":77},[2633],{"type":20,"value":1173},{"type":14,"tag":70,"props":2635,"children":2636},{"style":89},[2637],{"type":20,"value":2638}," expression ",{"type":14,"tag":70,"props":2640,"children":2641},{"style":77},[2642],{"type":20,"value":106},{"type":14,"tag":70,"props":2644,"children":2645},{"style":109},[2646],{"type":20,"value":1629},{"type":14,"tag":70,"props":2648,"children":2649},{"style":77},[2650],{"type":20,"value":1294},{"type":14,"tag":70,"props":2652,"children":2653},{"style":83},[2654],{"type":20,"value":2655},"expression",{"type":14,"tag":70,"props":2657,"children":2658},{"style":89},[2659],{"type":20,"value":2521},{"type":14,"tag":70,"props":2661,"children":2662},{"style":77},[2663],{"type":20,"value":1268},{"type":14,"tag":70,"props":2665,"children":2666},{"style":89},[2667],{"type":20,"value":227},{"type":14,"tag":70,"props":2669,"children":2670},{"class":72,"line":492},[2671,2675,2679,2683,2687,2691,2695,2700,2704,2708],{"type":14,"tag":70,"props":2672,"children":2673},{"style":109},[2674],{"type":20,"value":1814},{"type":14,"tag":70,"props":2676,"children":2677},{"style":77},[2678],{"type":20,"value":1294},{"type":14,"tag":70,"props":2680,"children":2681},{"style":83},[2682],{"type":20,"value":2596},{"type":14,"tag":70,"props":2684,"children":2685},{"style":89},[2686],{"type":20,"value":291},{"type":14,"tag":70,"props":2688,"children":2689},{"style":83},[2690],{"type":20,"value":2450},{"type":14,"tag":70,"props":2692,"children":2693},{"style":77},[2694],{"type":20,"value":1058},{"type":14,"tag":70,"props":2696,"children":2697},{"style":83},[2698],{"type":20,"value":2699},"SemiColon",{"type":14,"tag":70,"props":2701,"children":2702},{"style":89},[2703],{"type":20,"value":2618},{"type":14,"tag":70,"props":2705,"children":2706},{"style":77},[2707],{"type":20,"value":1268},{"type":14,"tag":70,"props":2709,"children":2710},{"style":89},[2711],{"type":20,"value":227},{"type":14,"tag":70,"props":2713,"children":2714},{"class":72,"line":501},[2715,2719,2723,2728,2733,2737],{"type":14,"tag":70,"props":2716,"children":2717},{"style":83},[2718],{"type":20,"value":1330},{"type":14,"tag":70,"props":2720,"children":2721},{"style":89},[2722],{"type":20,"value":291},{"type":14,"tag":70,"props":2724,"children":2725},{"style":77},[2726],{"type":20,"value":2727},"match",{"type":14,"tag":70,"props":2729,"children":2730},{"style":89},[2731],{"type":20,"value":2732}," token",{"type":14,"tag":70,"props":2734,"children":2735},{"style":77},[2736],{"type":20,"value":1294},{"type":14,"tag":70,"props":2738,"children":2739},{"style":89},[2740],{"type":20,"value":2550},{"type":14,"tag":70,"props":2742,"children":2743},{"class":72,"line":522},[2744,2749,2753,2757,2761,2766,2770,2774,2778,2783],{"type":14,"tag":70,"props":2745,"children":2746},{"style":83},[2747],{"type":20,"value":2748},"                TokenType",{"type":14,"tag":70,"props":2750,"children":2751},{"style":77},[2752],{"type":20,"value":1058},{"type":14,"tag":70,"props":2754,"children":2755},{"style":83},[2756],{"type":20,"value":2459},{"type":14,"tag":70,"props":2758,"children":2759},{"style":77},[2760],{"type":20,"value":2483},{"type":14,"tag":70,"props":2762,"children":2763},{"style":83},[2764],{"type":20,"value":2765}," ast",{"type":14,"tag":70,"props":2767,"children":2768},{"style":77},[2769],{"type":20,"value":1058},{"type":14,"tag":70,"props":2771,"children":2772},{"style":83},[2773],{"type":20,"value":977},{"type":14,"tag":70,"props":2775,"children":2776},{"style":77},[2777],{"type":20,"value":1058},{"type":14,"tag":70,"props":2779,"children":2780},{"style":83},[2781],{"type":20,"value":2782},"Declaration",{"type":14,"tag":70,"props":2784,"children":2785},{"style":89},[2786],{"type":20,"value":2787},"(name, expression),\n",{"type":14,"tag":70,"props":2789,"children":2790},{"class":72,"line":1275},[2791,2795,2799,2803,2807,2811,2815,2819,2823,2828],{"type":14,"tag":70,"props":2792,"children":2793},{"style":83},[2794],{"type":20,"value":2748},{"type":14,"tag":70,"props":2796,"children":2797},{"style":77},[2798],{"type":20,"value":1058},{"type":14,"tag":70,"props":2800,"children":2801},{"style":83},[2802],{"type":20,"value":2478},{"type":14,"tag":70,"props":2804,"children":2805},{"style":77},[2806],{"type":20,"value":2483},{"type":14,"tag":70,"props":2808,"children":2809},{"style":83},[2810],{"type":20,"value":2765},{"type":14,"tag":70,"props":2812,"children":2813},{"style":77},[2814],{"type":20,"value":1058},{"type":14,"tag":70,"props":2816,"children":2817},{"style":83},[2818],{"type":20,"value":977},{"type":14,"tag":70,"props":2820,"children":2821},{"style":77},[2822],{"type":20,"value":1058},{"type":14,"tag":70,"props":2824,"children":2825},{"style":83},[2826],{"type":20,"value":2827},"Assignment",{"type":14,"tag":70,"props":2829,"children":2830},{"style":89},[2831],{"type":20,"value":2787},{"type":14,"tag":70,"props":2833,"children":2834},{"class":72,"line":1283},[2835,2840,2844,2849],{"type":14,"tag":70,"props":2836,"children":2837},{"style":89},[2838],{"type":20,"value":2839},"                _ ",{"type":14,"tag":70,"props":2841,"children":2842},{"style":77},[2843],{"type":20,"value":1161},{"type":14,"tag":70,"props":2845,"children":2846},{"style":83},[2847],{"type":20,"value":2848}," unreachable!",{"type":14,"tag":70,"props":2850,"children":2851},{"style":89},[2852],{"type":20,"value":2853},"(),\n",{"type":14,"tag":70,"props":2855,"children":2856},{"class":72,"line":1307},[2857],{"type":14,"tag":70,"props":2858,"children":2859},{"style":89},[2860],{"type":20,"value":1427},{"type":14,"tag":70,"props":2862,"children":2863},{"class":72,"line":1316},[2864],{"type":14,"tag":70,"props":2865,"children":2866},{"style":89},[2867],{"type":20,"value":1436},{"type":14,"tag":70,"props":2869,"children":2870},{"class":72,"line":1324},[2871,2876,2880,2885,2889,2894,2899,2904,2908,2913,2918,2922],{"type":14,"tag":70,"props":2872,"children":2873},{"style":89},[2874],{"type":20,"value":2875},"        _ ",{"type":14,"tag":70,"props":2877,"children":2878},{"style":77},[2879],{"type":20,"value":1161},{"type":14,"tag":70,"props":2881,"children":2882},{"style":83},[2883],{"type":20,"value":2884}," Err",{"type":14,"tag":70,"props":2886,"children":2887},{"style":89},[2888],{"type":20,"value":291},{"type":14,"tag":70,"props":2890,"children":2891},{"style":83},[2892],{"type":20,"value":2893},"error",{"type":14,"tag":70,"props":2895,"children":2896},{"style":89},[2897],{"type":20,"value":2898},"(identifier, ",{"type":14,"tag":70,"props":2900,"children":2901},{"style":294},[2902],{"type":20,"value":2903},"\"Identifier\"",{"type":14,"tag":70,"props":2905,"children":2906},{"style":77},[2907],{"type":20,"value":1294},{"type":14,"tag":70,"props":2909,"children":2910},{"style":83},[2911],{"type":20,"value":2912},"to_string",{"type":14,"tag":70,"props":2914,"children":2915},{"style":89},[2916],{"type":20,"value":2917},"()))",{"type":14,"tag":70,"props":2919,"children":2920},{"style":77},[2921],{"type":20,"value":1268},{"type":14,"tag":70,"props":2923,"children":2924},{"style":89},[2925],{"type":20,"value":1068},{"type":14,"tag":70,"props":2927,"children":2928},{"class":72,"line":1363},[2929],{"type":14,"tag":70,"props":2930,"children":2931},{"style":89},[2932],{"type":20,"value":498},{"type":14,"tag":22,"props":2934,"children":2935},{},[2936],{"type":20,"value":2937},"And we will parse that literal as well:",{"type":14,"tag":59,"props":2939,"children":2941},{"code":2940,"language":177,"meta":7,"className":178,"style":7},"// parsing/parser.rs\n    fn literal(&mut self) -> anyhow::Result\u003Cast::Literal> {\n        let token = self.advance()?;\n        match token._type {\n            TokenType::Integer(i) => Ok(ast::Literal::Integer(i)),\n            TokenType::True => Ok(ast::Literal::Boolean(true)),\n            TokenType::False => Ok(ast::Literal::Boolean(false)),\n            TokenType::Identifier(name) => Ok(ast::Literal::Variable(name)),\n            _ => Err(error(token, \"Literal\".to_string()))?,\n        }\n    }\n",[2942],{"type":14,"tag":66,"props":2943,"children":2944},{"__ignoreMap":7},[2945,2952,3015,3055,3075,3135,3198,3258,3315,3369,3376],{"type":14,"tag":70,"props":2946,"children":2947},{"class":72,"line":73},[2948],{"type":14,"tag":70,"props":2949,"children":2950},{"style":165},[2951],{"type":20,"value":2442},{"type":14,"tag":70,"props":2953,"children":2954},{"class":72,"line":95},[2955,2960,2965,2969,2974,2978,2982,2986,2990,2994,2998,3003,3007,3011],{"type":14,"tag":70,"props":2956,"children":2957},{"style":77},[2958],{"type":20,"value":2959},"    fn",{"type":14,"tag":70,"props":2961,"children":2962},{"style":83},[2963],{"type":20,"value":2964}," literal",{"type":14,"tag":70,"props":2966,"children":2967},{"style":89},[2968],{"type":20,"value":291},{"type":14,"tag":70,"props":2970,"children":2971},{"style":77},[2972],{"type":20,"value":2973},"&mut",{"type":14,"tag":70,"props":2975,"children":2976},{"style":109},[2977],{"type":20,"value":1629},{"type":14,"tag":70,"props":2979,"children":2980},{"style":89},[2981],{"type":20,"value":1076},{"type":14,"tag":70,"props":2983,"children":2984},{"style":77},[2985],{"type":20,"value":1081},{"type":14,"tag":70,"props":2987,"children":2988},{"style":83},[2989],{"type":20,"value":1086},{"type":14,"tag":70,"props":2991,"children":2992},{"style":77},[2993],{"type":20,"value":1058},{"type":14,"tag":70,"props":2995,"children":2996},{"style":83},[2997],{"type":20,"value":1095},{"type":14,"tag":70,"props":2999,"children":3000},{"style":89},[3001],{"type":20,"value":3002},"\u003Cast",{"type":14,"tag":70,"props":3004,"children":3005},{"style":77},[3006],{"type":20,"value":1058},{"type":14,"tag":70,"props":3008,"children":3009},{"style":83},[3010],{"type":20,"value":2410},{"type":14,"tag":70,"props":3012,"children":3013},{"style":89},[3014],{"type":20,"value":1113},{"type":14,"tag":70,"props":3016,"children":3017},{"class":72,"line":115},[3018,3022,3027,3031,3035,3039,3043,3047,3051],{"type":14,"tag":70,"props":3019,"children":3020},{"style":77},[3021],{"type":20,"value":247},{"type":14,"tag":70,"props":3023,"children":3024},{"style":89},[3025],{"type":20,"value":3026}," token ",{"type":14,"tag":70,"props":3028,"children":3029},{"style":77},[3030],{"type":20,"value":106},{"type":14,"tag":70,"props":3032,"children":3033},{"style":109},[3034],{"type":20,"value":1629},{"type":14,"tag":70,"props":3036,"children":3037},{"style":77},[3038],{"type":20,"value":1294},{"type":14,"tag":70,"props":3040,"children":3041},{"style":83},[3042],{"type":20,"value":2516},{"type":14,"tag":70,"props":3044,"children":3045},{"style":89},[3046],{"type":20,"value":2521},{"type":14,"tag":70,"props":3048,"children":3049},{"style":77},[3050],{"type":20,"value":1268},{"type":14,"tag":70,"props":3052,"children":3053},{"style":89},[3054],{"type":20,"value":227},{"type":14,"tag":70,"props":3056,"children":3057},{"class":72,"line":129},[3058,3063,3067,3071],{"type":14,"tag":70,"props":3059,"children":3060},{"style":77},[3061],{"type":20,"value":3062},"        match",{"type":14,"tag":70,"props":3064,"children":3065},{"style":89},[3066],{"type":20,"value":2732},{"type":14,"tag":70,"props":3068,"children":3069},{"style":77},[3070],{"type":20,"value":1294},{"type":14,"tag":70,"props":3072,"children":3073},{"style":89},[3074],{"type":20,"value":2550},{"type":14,"tag":70,"props":3076,"children":3077},{"class":72,"line":147},[3078,3083,3087,3092,3097,3101,3106,3110,3114,3118,3122,3126,3130],{"type":14,"tag":70,"props":3079,"children":3080},{"style":83},[3081],{"type":20,"value":3082},"            TokenType",{"type":14,"tag":70,"props":3084,"children":3085},{"style":77},[3086],{"type":20,"value":1058},{"type":14,"tag":70,"props":3088,"children":3089},{"style":83},[3090],{"type":20,"value":3091},"Integer",{"type":14,"tag":70,"props":3093,"children":3094},{"style":89},[3095],{"type":20,"value":3096},"(i) ",{"type":14,"tag":70,"props":3098,"children":3099},{"style":77},[3100],{"type":20,"value":1161},{"type":14,"tag":70,"props":3102,"children":3103},{"style":83},[3104],{"type":20,"value":3105}," Ok",{"type":14,"tag":70,"props":3107,"children":3108},{"style":89},[3109],{"type":20,"value":291},{"type":14,"tag":70,"props":3111,"children":3112},{"style":83},[3113],{"type":20,"value":1053},{"type":14,"tag":70,"props":3115,"children":3116},{"style":77},[3117],{"type":20,"value":1058},{"type":14,"tag":70,"props":3119,"children":3120},{"style":83},[3121],{"type":20,"value":2410},{"type":14,"tag":70,"props":3123,"children":3124},{"style":77},[3125],{"type":20,"value":1058},{"type":14,"tag":70,"props":3127,"children":3128},{"style":83},[3129],{"type":20,"value":3091},{"type":14,"tag":70,"props":3131,"children":3132},{"style":89},[3133],{"type":20,"value":3134},"(i)),\n",{"type":14,"tag":70,"props":3136,"children":3137},{"class":72,"line":161},[3138,3142,3146,3151,3155,3159,3163,3167,3171,3175,3179,3184,3188,3193],{"type":14,"tag":70,"props":3139,"children":3140},{"style":83},[3141],{"type":20,"value":3082},{"type":14,"tag":70,"props":3143,"children":3144},{"style":77},[3145],{"type":20,"value":1058},{"type":14,"tag":70,"props":3147,"children":3148},{"style":83},[3149],{"type":20,"value":3150},"True",{"type":14,"tag":70,"props":3152,"children":3153},{"style":77},[3154],{"type":20,"value":2483},{"type":14,"tag":70,"props":3156,"children":3157},{"style":83},[3158],{"type":20,"value":3105},{"type":14,"tag":70,"props":3160,"children":3161},{"style":89},[3162],{"type":20,"value":291},{"type":14,"tag":70,"props":3164,"children":3165},{"style":83},[3166],{"type":20,"value":1053},{"type":14,"tag":70,"props":3168,"children":3169},{"style":77},[3170],{"type":20,"value":1058},{"type":14,"tag":70,"props":3172,"children":3173},{"style":83},[3174],{"type":20,"value":2410},{"type":14,"tag":70,"props":3176,"children":3177},{"style":77},[3178],{"type":20,"value":1058},{"type":14,"tag":70,"props":3180,"children":3181},{"style":83},[3182],{"type":20,"value":3183},"Boolean",{"type":14,"tag":70,"props":3185,"children":3186},{"style":89},[3187],{"type":20,"value":291},{"type":14,"tag":70,"props":3189,"children":3190},{"style":109},[3191],{"type":20,"value":3192},"true",{"type":14,"tag":70,"props":3194,"children":3195},{"style":89},[3196],{"type":20,"value":3197},")),\n",{"type":14,"tag":70,"props":3199,"children":3200},{"class":72,"line":310},[3201,3205,3209,3214,3218,3222,3226,3230,3234,3238,3242,3246,3250,3254],{"type":14,"tag":70,"props":3202,"children":3203},{"style":83},[3204],{"type":20,"value":3082},{"type":14,"tag":70,"props":3206,"children":3207},{"style":77},[3208],{"type":20,"value":1058},{"type":14,"tag":70,"props":3210,"children":3211},{"style":83},[3212],{"type":20,"value":3213},"False",{"type":14,"tag":70,"props":3215,"children":3216},{"style":77},[3217],{"type":20,"value":2483},{"type":14,"tag":70,"props":3219,"children":3220},{"style":83},[3221],{"type":20,"value":3105},{"type":14,"tag":70,"props":3223,"children":3224},{"style":89},[3225],{"type":20,"value":291},{"type":14,"tag":70,"props":3227,"children":3228},{"style":83},[3229],{"type":20,"value":1053},{"type":14,"tag":70,"props":3231,"children":3232},{"style":77},[3233],{"type":20,"value":1058},{"type":14,"tag":70,"props":3235,"children":3236},{"style":83},[3237],{"type":20,"value":2410},{"type":14,"tag":70,"props":3239,"children":3240},{"style":77},[3241],{"type":20,"value":1058},{"type":14,"tag":70,"props":3243,"children":3244},{"style":83},[3245],{"type":20,"value":3183},{"type":14,"tag":70,"props":3247,"children":3248},{"style":89},[3249],{"type":20,"value":291},{"type":14,"tag":70,"props":3251,"children":3252},{"style":109},[3253],{"type":20,"value":1699},{"type":14,"tag":70,"props":3255,"children":3256},{"style":89},[3257],{"type":20,"value":3197},{"type":14,"tag":70,"props":3259,"children":3260},{"class":72,"line":492},[3261,3265,3269,3273,3277,3281,3285,3289,3293,3297,3301,3305,3310],{"type":14,"tag":70,"props":3262,"children":3263},{"style":83},[3264],{"type":20,"value":3082},{"type":14,"tag":70,"props":3266,"children":3267},{"style":77},[3268],{"type":20,"value":1058},{"type":14,"tag":70,"props":3270,"children":3271},{"style":83},[3272],{"type":20,"value":2567},{"type":14,"tag":70,"props":3274,"children":3275},{"style":89},[3276],{"type":20,"value":2572},{"type":14,"tag":70,"props":3278,"children":3279},{"style":77},[3280],{"type":20,"value":1161},{"type":14,"tag":70,"props":3282,"children":3283},{"style":83},[3284],{"type":20,"value":3105},{"type":14,"tag":70,"props":3286,"children":3287},{"style":89},[3288],{"type":20,"value":291},{"type":14,"tag":70,"props":3290,"children":3291},{"style":83},[3292],{"type":20,"value":1053},{"type":14,"tag":70,"props":3294,"children":3295},{"style":77},[3296],{"type":20,"value":1058},{"type":14,"tag":70,"props":3298,"children":3299},{"style":83},[3300],{"type":20,"value":2410},{"type":14,"tag":70,"props":3302,"children":3303},{"style":77},[3304],{"type":20,"value":1058},{"type":14,"tag":70,"props":3306,"children":3307},{"style":83},[3308],{"type":20,"value":3309},"Variable",{"type":14,"tag":70,"props":3311,"children":3312},{"style":89},[3313],{"type":20,"value":3314},"(name)),\n",{"type":14,"tag":70,"props":3316,"children":3317},{"class":72,"line":501},[3318,3323,3327,3331,3335,3339,3344,3349,3353,3357,3361,3365],{"type":14,"tag":70,"props":3319,"children":3320},{"style":89},[3321],{"type":20,"value":3322},"            _ ",{"type":14,"tag":70,"props":3324,"children":3325},{"style":77},[3326],{"type":20,"value":1161},{"type":14,"tag":70,"props":3328,"children":3329},{"style":83},[3330],{"type":20,"value":2884},{"type":14,"tag":70,"props":3332,"children":3333},{"style":89},[3334],{"type":20,"value":291},{"type":14,"tag":70,"props":3336,"children":3337},{"style":83},[3338],{"type":20,"value":2893},{"type":14,"tag":70,"props":3340,"children":3341},{"style":89},[3342],{"type":20,"value":3343},"(token, ",{"type":14,"tag":70,"props":3345,"children":3346},{"style":294},[3347],{"type":20,"value":3348},"\"Literal\"",{"type":14,"tag":70,"props":3350,"children":3351},{"style":77},[3352],{"type":20,"value":1294},{"type":14,"tag":70,"props":3354,"children":3355},{"style":83},[3356],{"type":20,"value":2912},{"type":14,"tag":70,"props":3358,"children":3359},{"style":89},[3360],{"type":20,"value":2917},{"type":14,"tag":70,"props":3362,"children":3363},{"style":77},[3364],{"type":20,"value":1268},{"type":14,"tag":70,"props":3366,"children":3367},{"style":89},[3368],{"type":20,"value":1068},{"type":14,"tag":70,"props":3370,"children":3371},{"class":72,"line":522},[3372],{"type":14,"tag":70,"props":3373,"children":3374},{"style":89},[3375],{"type":20,"value":1436},{"type":14,"tag":70,"props":3377,"children":3378},{"class":72,"line":1275},[3379],{"type":14,"tag":70,"props":3380,"children":3381},{"style":89},[3382],{"type":20,"value":498},{"type":14,"tag":40,"props":3384,"children":3386},{"id":3385},"type-resolution",[3387],{"type":20,"value":3388},"Type resolution",{"type":14,"tag":22,"props":3390,"children":3391},{},[3392],{"type":20,"value":3393},"First lets add the assignment to the IR!",{"type":14,"tag":59,"props":3395,"children":3397},{"code":3396,"language":177,"meta":7,"className":178,"style":7},"// ir.rs\n#[derive(Debug, PartialEq, Eq, Clone, Copy)]\npub enum VarType {\n    Int,\n    Boolean,\n}\n\n#[derive(Debug, PartialEq, Eq, Hash, Copy, Clone)]\npub struct VariableIdentifier(pub usize);\n\n#[derive(Debug)]\npub enum Statement {\n    Print(PrintStatement),\n    Assert(BooleanExpression, Option\u003CString>),\n    Assignment(VariableIdentifier, AssignmentStatement),\n}\n\n#[derive(Debug)]\npub enum AssignmentStatement {\n    Int(IntExpression),\n    Boolean(BooleanExpression),\n}\n\n#[derive(Debug)]\npub enum IntExpression {\n    // ...\n    Var(VariableIdentifier),\n}\n\n#[derive(Debug)]\npub enum BooleanExpression {\n    // ...\n    Var(VariableIdentifier),\n}\n",[3398],{"type":14,"tag":66,"props":3399,"children":3400},{"__ignoreMap":7},[3401,3408,3458,3478,3490,3501,3508,3515,3571,3605,3612,3627,3646,3666,3702,3731,3738,3745,3760,3780,3800,3819,3826,3834,3850,3871,3880,3901,3909,3917,3933,3954,3962,3982],{"type":14,"tag":70,"props":3402,"children":3403},{"class":72,"line":73},[3404],{"type":14,"tag":70,"props":3405,"children":3406},{"style":165},[3407],{"type":20,"value":890},{"type":14,"tag":70,"props":3409,"children":3410},{"class":72,"line":95},[3411,3415,3419,3423,3428,3432,3436,3440,3445,3449,3454],{"type":14,"tag":70,"props":3412,"children":3413},{"style":89},[3414],{"type":20,"value":898},{"type":14,"tag":70,"props":3416,"children":3417},{"style":83},[3418],{"type":20,"value":903},{"type":14,"tag":70,"props":3420,"children":3421},{"style":89},[3422],{"type":20,"value":1972},{"type":14,"tag":70,"props":3424,"children":3425},{"style":83},[3426],{"type":20,"value":3427},"PartialEq",{"type":14,"tag":70,"props":3429,"children":3430},{"style":89},[3431],{"type":20,"value":1972},{"type":14,"tag":70,"props":3433,"children":3434},{"style":83},[3435],{"type":20,"value":2613},{"type":14,"tag":70,"props":3437,"children":3438},{"style":89},[3439],{"type":20,"value":1972},{"type":14,"tag":70,"props":3441,"children":3442},{"style":83},[3443],{"type":20,"value":3444},"Clone",{"type":14,"tag":70,"props":3446,"children":3447},{"style":89},[3448],{"type":20,"value":1972},{"type":14,"tag":70,"props":3450,"children":3451},{"style":83},[3452],{"type":20,"value":3453},"Copy",{"type":14,"tag":70,"props":3455,"children":3456},{"style":89},[3457],{"type":20,"value":908},{"type":14,"tag":70,"props":3459,"children":3460},{"class":72,"line":115},[3461,3465,3469,3474],{"type":14,"tag":70,"props":3462,"children":3463},{"style":77},[3464],{"type":20,"value":916},{"type":14,"tag":70,"props":3466,"children":3467},{"style":77},[3468],{"type":20,"value":921},{"type":14,"tag":70,"props":3470,"children":3471},{"style":83},[3472],{"type":20,"value":3473}," VarType",{"type":14,"tag":70,"props":3475,"children":3476},{"style":89},[3477],{"type":20,"value":473},{"type":14,"tag":70,"props":3479,"children":3480},{"class":72,"line":129},[3481,3486],{"type":14,"tag":70,"props":3482,"children":3483},{"style":83},[3484],{"type":20,"value":3485},"    Int",{"type":14,"tag":70,"props":3487,"children":3488},{"style":89},[3489],{"type":20,"value":1068},{"type":14,"tag":70,"props":3491,"children":3492},{"class":72,"line":147},[3493,3497],{"type":14,"tag":70,"props":3494,"children":3495},{"style":83},[3496],{"type":20,"value":2359},{"type":14,"tag":70,"props":3498,"children":3499},{"style":89},[3500],{"type":20,"value":1068},{"type":14,"tag":70,"props":3502,"children":3503},{"class":72,"line":161},[3504],{"type":14,"tag":70,"props":3505,"children":3506},{"style":89},[3507],{"type":20,"value":663},{"type":14,"tag":70,"props":3509,"children":3510},{"class":72,"line":310},[3511],{"type":14,"tag":70,"props":3512,"children":3513},{"emptyLinePlaceholder":1210},[3514],{"type":20,"value":1213},{"type":14,"tag":70,"props":3516,"children":3517},{"class":72,"line":492},[3518,3522,3526,3530,3534,3538,3542,3546,3551,3555,3559,3563,3567],{"type":14,"tag":70,"props":3519,"children":3520},{"style":89},[3521],{"type":20,"value":898},{"type":14,"tag":70,"props":3523,"children":3524},{"style":83},[3525],{"type":20,"value":903},{"type":14,"tag":70,"props":3527,"children":3528},{"style":89},[3529],{"type":20,"value":1972},{"type":14,"tag":70,"props":3531,"children":3532},{"style":83},[3533],{"type":20,"value":3427},{"type":14,"tag":70,"props":3535,"children":3536},{"style":89},[3537],{"type":20,"value":1972},{"type":14,"tag":70,"props":3539,"children":3540},{"style":83},[3541],{"type":20,"value":2613},{"type":14,"tag":70,"props":3543,"children":3544},{"style":89},[3545],{"type":20,"value":1972},{"type":14,"tag":70,"props":3547,"children":3548},{"style":83},[3549],{"type":20,"value":3550},"Hash",{"type":14,"tag":70,"props":3552,"children":3553},{"style":89},[3554],{"type":20,"value":1972},{"type":14,"tag":70,"props":3556,"children":3557},{"style":83},[3558],{"type":20,"value":3453},{"type":14,"tag":70,"props":3560,"children":3561},{"style":89},[3562],{"type":20,"value":1972},{"type":14,"tag":70,"props":3564,"children":3565},{"style":83},[3566],{"type":20,"value":3444},{"type":14,"tag":70,"props":3568,"children":3569},{"style":89},[3570],{"type":20,"value":908},{"type":14,"tag":70,"props":3572,"children":3573},{"class":72,"line":501},[3574,3578,3583,3588,3592,3596,3601],{"type":14,"tag":70,"props":3575,"children":3576},{"style":77},[3577],{"type":20,"value":916},{"type":14,"tag":70,"props":3579,"children":3580},{"style":77},[3581],{"type":20,"value":3582}," struct",{"type":14,"tag":70,"props":3584,"children":3585},{"style":83},[3586],{"type":20,"value":3587}," VariableIdentifier",{"type":14,"tag":70,"props":3589,"children":3590},{"style":89},[3591],{"type":20,"value":291},{"type":14,"tag":70,"props":3593,"children":3594},{"style":77},[3595],{"type":20,"value":916},{"type":14,"tag":70,"props":3597,"children":3598},{"style":83},[3599],{"type":20,"value":3600}," usize",{"type":14,"tag":70,"props":3602,"children":3603},{"style":89},[3604],{"type":20,"value":519},{"type":14,"tag":70,"props":3606,"children":3607},{"class":72,"line":522},[3608],{"type":14,"tag":70,"props":3609,"children":3610},{"emptyLinePlaceholder":1210},[3611],{"type":20,"value":1213},{"type":14,"tag":70,"props":3613,"children":3614},{"class":72,"line":1275},[3615,3619,3623],{"type":14,"tag":70,"props":3616,"children":3617},{"style":89},[3618],{"type":20,"value":898},{"type":14,"tag":70,"props":3620,"children":3621},{"style":83},[3622],{"type":20,"value":903},{"type":14,"tag":70,"props":3624,"children":3625},{"style":89},[3626],{"type":20,"value":908},{"type":14,"tag":70,"props":3628,"children":3629},{"class":72,"line":1283},[3630,3634,3638,3642],{"type":14,"tag":70,"props":3631,"children":3632},{"style":77},[3633],{"type":20,"value":916},{"type":14,"tag":70,"props":3635,"children":3636},{"style":77},[3637],{"type":20,"value":921},{"type":14,"tag":70,"props":3639,"children":3640},{"style":83},[3641],{"type":20,"value":2145},{"type":14,"tag":70,"props":3643,"children":3644},{"style":89},[3645],{"type":20,"value":473},{"type":14,"tag":70,"props":3647,"children":3648},{"class":72,"line":1307},[3649,3653,3657,3662],{"type":14,"tag":70,"props":3650,"children":3651},{"style":83},[3652],{"type":20,"value":2157},{"type":14,"tag":70,"props":3654,"children":3655},{"style":89},[3656],{"type":20,"value":291},{"type":14,"tag":70,"props":3658,"children":3659},{"style":83},[3660],{"type":20,"value":3661},"PrintStatement",{"type":14,"tag":70,"props":3663,"children":3664},{"style":89},[3665],{"type":20,"value":1400},{"type":14,"tag":70,"props":3667,"children":3668},{"class":72,"line":1316},[3669,3673,3677,3682,3686,3690,3694,3698],{"type":14,"tag":70,"props":3670,"children":3671},{"style":83},[3672],{"type":20,"value":2178},{"type":14,"tag":70,"props":3674,"children":3675},{"style":89},[3676],{"type":20,"value":291},{"type":14,"tag":70,"props":3678,"children":3679},{"style":83},[3680],{"type":20,"value":3681},"BooleanExpression",{"type":14,"tag":70,"props":3683,"children":3684},{"style":89},[3685],{"type":20,"value":1972},{"type":14,"tag":70,"props":3687,"children":3688},{"style":83},[3689],{"type":20,"value":2195},{"type":14,"tag":70,"props":3691,"children":3692},{"style":89},[3693],{"type":20,"value":972},{"type":14,"tag":70,"props":3695,"children":3696},{"style":83},[3697],{"type":20,"value":2204},{"type":14,"tag":70,"props":3699,"children":3700},{"style":89},[3701],{"type":20,"value":2209},{"type":14,"tag":70,"props":3703,"children":3704},{"class":72,"line":1324},[3705,3709,3713,3718,3722,3727],{"type":14,"tag":70,"props":3706,"children":3707},{"style":83},[3708],{"type":20,"value":2261},{"type":14,"tag":70,"props":3710,"children":3711},{"style":89},[3712],{"type":20,"value":291},{"type":14,"tag":70,"props":3714,"children":3715},{"style":83},[3716],{"type":20,"value":3717},"VariableIdentifier",{"type":14,"tag":70,"props":3719,"children":3720},{"style":89},[3721],{"type":20,"value":1972},{"type":14,"tag":70,"props":3723,"children":3724},{"style":83},[3725],{"type":20,"value":3726},"AssignmentStatement",{"type":14,"tag":70,"props":3728,"children":3729},{"style":89},[3730],{"type":20,"value":1400},{"type":14,"tag":70,"props":3732,"children":3733},{"class":72,"line":1363},[3734],{"type":14,"tag":70,"props":3735,"children":3736},{"style":89},[3737],{"type":20,"value":663},{"type":14,"tag":70,"props":3739,"children":3740},{"class":72,"line":1403},[3741],{"type":14,"tag":70,"props":3742,"children":3743},{"emptyLinePlaceholder":1210},[3744],{"type":20,"value":1213},{"type":14,"tag":70,"props":3746,"children":3747},{"class":72,"line":1421},[3748,3752,3756],{"type":14,"tag":70,"props":3749,"children":3750},{"style":89},[3751],{"type":20,"value":898},{"type":14,"tag":70,"props":3753,"children":3754},{"style":83},[3755],{"type":20,"value":903},{"type":14,"tag":70,"props":3757,"children":3758},{"style":89},[3759],{"type":20,"value":908},{"type":14,"tag":70,"props":3761,"children":3762},{"class":72,"line":1430},[3763,3767,3771,3776],{"type":14,"tag":70,"props":3764,"children":3765},{"style":77},[3766],{"type":20,"value":916},{"type":14,"tag":70,"props":3768,"children":3769},{"style":77},[3770],{"type":20,"value":921},{"type":14,"tag":70,"props":3772,"children":3773},{"style":83},[3774],{"type":20,"value":3775}," AssignmentStatement",{"type":14,"tag":70,"props":3777,"children":3778},{"style":89},[3779],{"type":20,"value":473},{"type":14,"tag":70,"props":3781,"children":3782},{"class":72,"line":1439},[3783,3787,3791,3796],{"type":14,"tag":70,"props":3784,"children":3785},{"style":83},[3786],{"type":20,"value":3485},{"type":14,"tag":70,"props":3788,"children":3789},{"style":89},[3790],{"type":20,"value":291},{"type":14,"tag":70,"props":3792,"children":3793},{"style":83},[3794],{"type":20,"value":3795},"IntExpression",{"type":14,"tag":70,"props":3797,"children":3798},{"style":89},[3799],{"type":20,"value":1400},{"type":14,"tag":70,"props":3801,"children":3802},{"class":72,"line":1447},[3803,3807,3811,3815],{"type":14,"tag":70,"props":3804,"children":3805},{"style":83},[3806],{"type":20,"value":2359},{"type":14,"tag":70,"props":3808,"children":3809},{"style":89},[3810],{"type":20,"value":291},{"type":14,"tag":70,"props":3812,"children":3813},{"style":83},[3814],{"type":20,"value":3681},{"type":14,"tag":70,"props":3816,"children":3817},{"style":89},[3818],{"type":20,"value":1400},{"type":14,"tag":70,"props":3820,"children":3821},{"class":72,"line":1998},[3822],{"type":14,"tag":70,"props":3823,"children":3824},{"style":89},[3825],{"type":20,"value":663},{"type":14,"tag":70,"props":3827,"children":3829},{"class":72,"line":3828},23,[3830],{"type":14,"tag":70,"props":3831,"children":3832},{"emptyLinePlaceholder":1210},[3833],{"type":20,"value":1213},{"type":14,"tag":70,"props":3835,"children":3837},{"class":72,"line":3836},24,[3838,3842,3846],{"type":14,"tag":70,"props":3839,"children":3840},{"style":89},[3841],{"type":20,"value":898},{"type":14,"tag":70,"props":3843,"children":3844},{"style":83},[3845],{"type":20,"value":903},{"type":14,"tag":70,"props":3847,"children":3848},{"style":89},[3849],{"type":20,"value":908},{"type":14,"tag":70,"props":3851,"children":3853},{"class":72,"line":3852},25,[3854,3858,3862,3867],{"type":14,"tag":70,"props":3855,"children":3856},{"style":77},[3857],{"type":20,"value":916},{"type":14,"tag":70,"props":3859,"children":3860},{"style":77},[3861],{"type":20,"value":921},{"type":14,"tag":70,"props":3863,"children":3864},{"style":83},[3865],{"type":20,"value":3866}," IntExpression",{"type":14,"tag":70,"props":3868,"children":3869},{"style":89},[3870],{"type":20,"value":473},{"type":14,"tag":70,"props":3872,"children":3874},{"class":72,"line":3873},26,[3875],{"type":14,"tag":70,"props":3876,"children":3877},{"style":165},[3878],{"type":20,"value":3879},"    // ...\n",{"type":14,"tag":70,"props":3881,"children":3883},{"class":72,"line":3882},27,[3884,3889,3893,3897],{"type":14,"tag":70,"props":3885,"children":3886},{"style":83},[3887],{"type":20,"value":3888},"    Var",{"type":14,"tag":70,"props":3890,"children":3891},{"style":89},[3892],{"type":20,"value":291},{"type":14,"tag":70,"props":3894,"children":3895},{"style":83},[3896],{"type":20,"value":3717},{"type":14,"tag":70,"props":3898,"children":3899},{"style":89},[3900],{"type":20,"value":1400},{"type":14,"tag":70,"props":3902,"children":3904},{"class":72,"line":3903},28,[3905],{"type":14,"tag":70,"props":3906,"children":3907},{"style":89},[3908],{"type":20,"value":663},{"type":14,"tag":70,"props":3910,"children":3912},{"class":72,"line":3911},29,[3913],{"type":14,"tag":70,"props":3914,"children":3915},{"emptyLinePlaceholder":1210},[3916],{"type":20,"value":1213},{"type":14,"tag":70,"props":3918,"children":3920},{"class":72,"line":3919},30,[3921,3925,3929],{"type":14,"tag":70,"props":3922,"children":3923},{"style":89},[3924],{"type":20,"value":898},{"type":14,"tag":70,"props":3926,"children":3927},{"style":83},[3928],{"type":20,"value":903},{"type":14,"tag":70,"props":3930,"children":3931},{"style":89},[3932],{"type":20,"value":908},{"type":14,"tag":70,"props":3934,"children":3936},{"class":72,"line":3935},31,[3937,3941,3945,3950],{"type":14,"tag":70,"props":3938,"children":3939},{"style":77},[3940],{"type":20,"value":916},{"type":14,"tag":70,"props":3942,"children":3943},{"style":77},[3944],{"type":20,"value":921},{"type":14,"tag":70,"props":3946,"children":3947},{"style":83},[3948],{"type":20,"value":3949}," BooleanExpression",{"type":14,"tag":70,"props":3951,"children":3952},{"style":89},[3953],{"type":20,"value":473},{"type":14,"tag":70,"props":3955,"children":3957},{"class":72,"line":3956},32,[3958],{"type":14,"tag":70,"props":3959,"children":3960},{"style":165},[3961],{"type":20,"value":3879},{"type":14,"tag":70,"props":3963,"children":3965},{"class":72,"line":3964},33,[3966,3970,3974,3978],{"type":14,"tag":70,"props":3967,"children":3968},{"style":83},[3969],{"type":20,"value":3888},{"type":14,"tag":70,"props":3971,"children":3972},{"style":89},[3973],{"type":20,"value":291},{"type":14,"tag":70,"props":3975,"children":3976},{"style":83},[3977],{"type":20,"value":3717},{"type":14,"tag":70,"props":3979,"children":3980},{"style":89},[3981],{"type":20,"value":1400},{"type":14,"tag":70,"props":3983,"children":3985},{"class":72,"line":3984},34,[3986],{"type":14,"tag":70,"props":3987,"children":3988},{"style":89},[3989],{"type":20,"value":663},{"type":14,"tag":22,"props":3991,"children":3992},{},[3993,3995,4000,4002,4008,4010,4016],{"type":20,"value":3994},"So now we need some global state in the type analyzer, which means we need to make it into a struct, something I ",{"type":14,"tag":786,"props":3996,"children":3997},{},[3998],{"type":20,"value":3999},"really",{"type":20,"value":4001}," should have done from the start... So just wrap it in a struct and add ",{"type":14,"tag":66,"props":4003,"children":4005},{"className":4004},[],[4006],{"type":20,"value":4007},"&mut self",{"type":20,"value":4009}," to all the functions and also ",{"type":14,"tag":66,"props":4011,"children":4013},{"className":4012},[],[4014],{"type":20,"value":4015},"self.",{"type":20,"value":4017}," in front of the method calls. (if you want a shortcut just copy from the github repo).",{"type":14,"tag":59,"props":4019,"children":4021},{"code":4020,"language":177,"meta":7,"className":178,"style":7},"// type_analyzer.rs\nstruct VarInfo {\n    identifier: ir::VariableIdentifier,\n    var_type: ir::VarType,\n}\n\nstruct VarScope {\n    parent: Option\u003CBox\u003CVarScope>>,\n    variables: HashMap\u003CString, VarInfo>,\n}\n\nstruct FunctionMetadata {\n    locals: Vec\u003C(ir::VariableIdentifier, ir::VarType)>,\n}\n",[4022],{"type":14,"tag":66,"props":4023,"children":4024},{"__ignoreMap":7},[4025,4032,4049,4078,4107,4114,4121,4137,4177,4216,4223,4230,4246,4293],{"type":14,"tag":70,"props":4026,"children":4027},{"class":72,"line":73},[4028],{"type":14,"tag":70,"props":4029,"children":4030},{"style":165},[4031],{"type":20,"value":1009},{"type":14,"tag":70,"props":4033,"children":4034},{"class":72,"line":95},[4035,4040,4045],{"type":14,"tag":70,"props":4036,"children":4037},{"style":77},[4038],{"type":20,"value":4039},"struct",{"type":14,"tag":70,"props":4041,"children":4042},{"style":83},[4043],{"type":20,"value":4044}," VarInfo",{"type":14,"tag":70,"props":4046,"children":4047},{"style":89},[4048],{"type":20,"value":473},{"type":14,"tag":70,"props":4050,"children":4051},{"class":72,"line":115},[4052,4057,4061,4066,4070,4074],{"type":14,"tag":70,"props":4053,"children":4054},{"style":89},[4055],{"type":20,"value":4056},"    identifier",{"type":14,"tag":70,"props":4058,"children":4059},{"style":77},[4060],{"type":20,"value":948},{"type":14,"tag":70,"props":4062,"children":4063},{"style":83},[4064],{"type":20,"value":4065}," ir",{"type":14,"tag":70,"props":4067,"children":4068},{"style":77},[4069],{"type":20,"value":1058},{"type":14,"tag":70,"props":4071,"children":4072},{"style":83},[4073],{"type":20,"value":3717},{"type":14,"tag":70,"props":4075,"children":4076},{"style":89},[4077],{"type":20,"value":1068},{"type":14,"tag":70,"props":4079,"children":4080},{"class":72,"line":129},[4081,4086,4090,4094,4098,4103],{"type":14,"tag":70,"props":4082,"children":4083},{"style":89},[4084],{"type":20,"value":4085},"    var_type",{"type":14,"tag":70,"props":4087,"children":4088},{"style":77},[4089],{"type":20,"value":948},{"type":14,"tag":70,"props":4091,"children":4092},{"style":83},[4093],{"type":20,"value":4065},{"type":14,"tag":70,"props":4095,"children":4096},{"style":77},[4097],{"type":20,"value":1058},{"type":14,"tag":70,"props":4099,"children":4100},{"style":83},[4101],{"type":20,"value":4102},"VarType",{"type":14,"tag":70,"props":4104,"children":4105},{"style":89},[4106],{"type":20,"value":1068},{"type":14,"tag":70,"props":4108,"children":4109},{"class":72,"line":147},[4110],{"type":14,"tag":70,"props":4111,"children":4112},{"style":89},[4113],{"type":20,"value":663},{"type":14,"tag":70,"props":4115,"children":4116},{"class":72,"line":161},[4117],{"type":14,"tag":70,"props":4118,"children":4119},{"emptyLinePlaceholder":1210},[4120],{"type":20,"value":1213},{"type":14,"tag":70,"props":4122,"children":4123},{"class":72,"line":310},[4124,4128,4133],{"type":14,"tag":70,"props":4125,"children":4126},{"style":77},[4127],{"type":20,"value":4039},{"type":14,"tag":70,"props":4129,"children":4130},{"style":83},[4131],{"type":20,"value":4132}," VarScope",{"type":14,"tag":70,"props":4134,"children":4135},{"style":89},[4136],{"type":20,"value":473},{"type":14,"tag":70,"props":4138,"children":4139},{"class":72,"line":492},[4140,4145,4149,4154,4158,4163,4167,4172],{"type":14,"tag":70,"props":4141,"children":4142},{"style":89},[4143],{"type":20,"value":4144},"    parent",{"type":14,"tag":70,"props":4146,"children":4147},{"style":77},[4148],{"type":20,"value":948},{"type":14,"tag":70,"props":4150,"children":4151},{"style":83},[4152],{"type":20,"value":4153}," Option",{"type":14,"tag":70,"props":4155,"children":4156},{"style":89},[4157],{"type":20,"value":972},{"type":14,"tag":70,"props":4159,"children":4160},{"style":83},[4161],{"type":20,"value":4162},"Box",{"type":14,"tag":70,"props":4164,"children":4165},{"style":89},[4166],{"type":20,"value":972},{"type":14,"tag":70,"props":4168,"children":4169},{"style":83},[4170],{"type":20,"value":4171},"VarScope",{"type":14,"tag":70,"props":4173,"children":4174},{"style":89},[4175],{"type":20,"value":4176},">>,\n",{"type":14,"tag":70,"props":4178,"children":4179},{"class":72,"line":501},[4180,4185,4189,4194,4198,4202,4206,4211],{"type":14,"tag":70,"props":4181,"children":4182},{"style":89},[4183],{"type":20,"value":4184},"    variables",{"type":14,"tag":70,"props":4186,"children":4187},{"style":77},[4188],{"type":20,"value":948},{"type":14,"tag":70,"props":4190,"children":4191},{"style":83},[4192],{"type":20,"value":4193}," HashMap",{"type":14,"tag":70,"props":4195,"children":4196},{"style":89},[4197],{"type":20,"value":972},{"type":14,"tag":70,"props":4199,"children":4200},{"style":83},[4201],{"type":20,"value":2204},{"type":14,"tag":70,"props":4203,"children":4204},{"style":89},[4205],{"type":20,"value":1972},{"type":14,"tag":70,"props":4207,"children":4208},{"style":83},[4209],{"type":20,"value":4210},"VarInfo",{"type":14,"tag":70,"props":4212,"children":4213},{"style":89},[4214],{"type":20,"value":4215},">,\n",{"type":14,"tag":70,"props":4217,"children":4218},{"class":72,"line":522},[4219],{"type":14,"tag":70,"props":4220,"children":4221},{"style":89},[4222],{"type":20,"value":663},{"type":14,"tag":70,"props":4224,"children":4225},{"class":72,"line":1275},[4226],{"type":14,"tag":70,"props":4227,"children":4228},{"emptyLinePlaceholder":1210},[4229],{"type":20,"value":1213},{"type":14,"tag":70,"props":4231,"children":4232},{"class":72,"line":1283},[4233,4237,4242],{"type":14,"tag":70,"props":4234,"children":4235},{"style":77},[4236],{"type":20,"value":4039},{"type":14,"tag":70,"props":4238,"children":4239},{"style":83},[4240],{"type":20,"value":4241}," FunctionMetadata",{"type":14,"tag":70,"props":4243,"children":4244},{"style":89},[4245],{"type":20,"value":473},{"type":14,"tag":70,"props":4247,"children":4248},{"class":72,"line":1307},[4249,4254,4258,4262,4267,4271,4275,4280,4284,4288],{"type":14,"tag":70,"props":4250,"children":4251},{"style":89},[4252],{"type":20,"value":4253},"    locals",{"type":14,"tag":70,"props":4255,"children":4256},{"style":77},[4257],{"type":20,"value":948},{"type":14,"tag":70,"props":4259,"children":4260},{"style":83},[4261],{"type":20,"value":967},{"type":14,"tag":70,"props":4263,"children":4264},{"style":89},[4265],{"type":20,"value":4266},"\u003C(ir",{"type":14,"tag":70,"props":4268,"children":4269},{"style":77},[4270],{"type":20,"value":1058},{"type":14,"tag":70,"props":4272,"children":4273},{"style":83},[4274],{"type":20,"value":3717},{"type":14,"tag":70,"props":4276,"children":4277},{"style":89},[4278],{"type":20,"value":4279},", ir",{"type":14,"tag":70,"props":4281,"children":4282},{"style":77},[4283],{"type":20,"value":1058},{"type":14,"tag":70,"props":4285,"children":4286},{"style":83},[4287],{"type":20,"value":4102},{"type":14,"tag":70,"props":4289,"children":4290},{"style":89},[4291],{"type":20,"value":4292},")>,\n",{"type":14,"tag":70,"props":4294,"children":4295},{"class":72,"line":1316},[4296],{"type":14,"tag":70,"props":4297,"children":4298},{"style":89},[4299],{"type":20,"value":663},{"type":14,"tag":22,"props":4301,"children":4302},{},[4303],{"type":20,"value":4304},"These will help us keep track of the state as we resolve the types.",{"type":14,"tag":59,"props":4306,"children":4308},{"code":4307,"language":177,"meta":7,"className":178,"style":7},"impl TypedExpression {\n    // ...\n    fn to_var_type(&self) -> ir::VarType {\n        match self {\n            TypedExpression::Int(_) => ir::VarType::Int,\n            TypedExpression::Boolean(_) => ir::VarType::Boolean,\n        }\n    }\n}\n",[4309],{"type":14,"tag":66,"props":4310,"children":4311},{"__ignoreMap":7},[4312,4329,4336,4384,4399,4449,4496,4503,4510],{"type":14,"tag":70,"props":4313,"children":4314},{"class":72,"line":73},[4315,4320,4325],{"type":14,"tag":70,"props":4316,"children":4317},{"style":77},[4318],{"type":20,"value":4319},"impl",{"type":14,"tag":70,"props":4321,"children":4322},{"style":83},[4323],{"type":20,"value":4324}," TypedExpression",{"type":14,"tag":70,"props":4326,"children":4327},{"style":89},[4328],{"type":20,"value":473},{"type":14,"tag":70,"props":4330,"children":4331},{"class":72,"line":95},[4332],{"type":14,"tag":70,"props":4333,"children":4334},{"style":165},[4335],{"type":20,"value":3879},{"type":14,"tag":70,"props":4337,"children":4338},{"class":72,"line":115},[4339,4343,4348,4352,4356,4360,4364,4368,4372,4376,4380],{"type":14,"tag":70,"props":4340,"children":4341},{"style":77},[4342],{"type":20,"value":2959},{"type":14,"tag":70,"props":4344,"children":4345},{"style":83},[4346],{"type":20,"value":4347}," to_var_type",{"type":14,"tag":70,"props":4349,"children":4350},{"style":89},[4351],{"type":20,"value":291},{"type":14,"tag":70,"props":4353,"children":4354},{"style":77},[4355],{"type":20,"value":1493},{"type":14,"tag":70,"props":4357,"children":4358},{"style":109},[4359],{"type":20,"value":1498},{"type":14,"tag":70,"props":4361,"children":4362},{"style":89},[4363],{"type":20,"value":1076},{"type":14,"tag":70,"props":4365,"children":4366},{"style":77},[4367],{"type":20,"value":1081},{"type":14,"tag":70,"props":4369,"children":4370},{"style":83},[4371],{"type":20,"value":4065},{"type":14,"tag":70,"props":4373,"children":4374},{"style":77},[4375],{"type":20,"value":1058},{"type":14,"tag":70,"props":4377,"children":4378},{"style":83},[4379],{"type":20,"value":4102},{"type":14,"tag":70,"props":4381,"children":4382},{"style":89},[4383],{"type":20,"value":473},{"type":14,"tag":70,"props":4385,"children":4386},{"class":72,"line":129},[4387,4391,4395],{"type":14,"tag":70,"props":4388,"children":4389},{"style":77},[4390],{"type":20,"value":3062},{"type":14,"tag":70,"props":4392,"children":4393},{"style":109},[4394],{"type":20,"value":1629},{"type":14,"tag":70,"props":4396,"children":4397},{"style":89},[4398],{"type":20,"value":473},{"type":14,"tag":70,"props":4400,"children":4401},{"class":72,"line":147},[4402,4407,4411,4416,4421,4425,4429,4433,4437,4441,4445],{"type":14,"tag":70,"props":4403,"children":4404},{"style":83},[4405],{"type":20,"value":4406},"            TypedExpression",{"type":14,"tag":70,"props":4408,"children":4409},{"style":77},[4410],{"type":20,"value":1058},{"type":14,"tag":70,"props":4412,"children":4413},{"style":83},[4414],{"type":20,"value":4415},"Int",{"type":14,"tag":70,"props":4417,"children":4418},{"style":89},[4419],{"type":20,"value":4420},"(_) ",{"type":14,"tag":70,"props":4422,"children":4423},{"style":77},[4424],{"type":20,"value":1161},{"type":14,"tag":70,"props":4426,"children":4427},{"style":83},[4428],{"type":20,"value":4065},{"type":14,"tag":70,"props":4430,"children":4431},{"style":77},[4432],{"type":20,"value":1058},{"type":14,"tag":70,"props":4434,"children":4435},{"style":83},[4436],{"type":20,"value":4102},{"type":14,"tag":70,"props":4438,"children":4439},{"style":77},[4440],{"type":20,"value":1058},{"type":14,"tag":70,"props":4442,"children":4443},{"style":83},[4444],{"type":20,"value":4415},{"type":14,"tag":70,"props":4446,"children":4447},{"style":89},[4448],{"type":20,"value":1068},{"type":14,"tag":70,"props":4450,"children":4451},{"class":72,"line":161},[4452,4456,4460,4464,4468,4472,4476,4480,4484,4488,4492],{"type":14,"tag":70,"props":4453,"children":4454},{"style":83},[4455],{"type":20,"value":4406},{"type":14,"tag":70,"props":4457,"children":4458},{"style":77},[4459],{"type":20,"value":1058},{"type":14,"tag":70,"props":4461,"children":4462},{"style":83},[4463],{"type":20,"value":3183},{"type":14,"tag":70,"props":4465,"children":4466},{"style":89},[4467],{"type":20,"value":4420},{"type":14,"tag":70,"props":4469,"children":4470},{"style":77},[4471],{"type":20,"value":1161},{"type":14,"tag":70,"props":4473,"children":4474},{"style":83},[4475],{"type":20,"value":4065},{"type":14,"tag":70,"props":4477,"children":4478},{"style":77},[4479],{"type":20,"value":1058},{"type":14,"tag":70,"props":4481,"children":4482},{"style":83},[4483],{"type":20,"value":4102},{"type":14,"tag":70,"props":4485,"children":4486},{"style":77},[4487],{"type":20,"value":1058},{"type":14,"tag":70,"props":4489,"children":4490},{"style":83},[4491],{"type":20,"value":3183},{"type":14,"tag":70,"props":4493,"children":4494},{"style":89},[4495],{"type":20,"value":1068},{"type":14,"tag":70,"props":4497,"children":4498},{"class":72,"line":310},[4499],{"type":14,"tag":70,"props":4500,"children":4501},{"style":89},[4502],{"type":20,"value":1436},{"type":14,"tag":70,"props":4504,"children":4505},{"class":72,"line":492},[4506],{"type":14,"tag":70,"props":4507,"children":4508},{"style":89},[4509],{"type":20,"value":498},{"type":14,"tag":70,"props":4511,"children":4512},{"class":72,"line":501},[4513],{"type":14,"tag":70,"props":4514,"children":4515},{"style":89},[4516],{"type":20,"value":663},{"type":14,"tag":22,"props":4518,"children":4519},{},[4520],{"type":20,"value":4521},"Then we will store the metadata, in our analyzer:",{"type":14,"tag":59,"props":4523,"children":4525},{"code":4524,"language":177,"meta":7,"className":178,"style":7},"pub struct Analyzer {\n    scopes: Vec\u003CVarScope>,\n    function_metadata: Option\u003CFunctionMetadata>,\n    current_identifier: usize,\n}\n\nimpl Analyzer {\n    // ...\n    pub fn new() -> Self {\n        Self {\n            scopes: Vec::new(),\n            function_metadata: None,\n            current_identifier: 0,\n        }\n    }\n}\n",[4526],{"type":14,"tag":66,"props":4527,"children":4528},{"__ignoreMap":7},[4529,4549,4577,4606,4626,4633,4640,4655,4662,4697,4709,4737,4758,4779,4786,4793],{"type":14,"tag":70,"props":4530,"children":4531},{"class":72,"line":73},[4532,4536,4540,4545],{"type":14,"tag":70,"props":4533,"children":4534},{"style":77},[4535],{"type":20,"value":916},{"type":14,"tag":70,"props":4537,"children":4538},{"style":77},[4539],{"type":20,"value":3582},{"type":14,"tag":70,"props":4541,"children":4542},{"style":83},[4543],{"type":20,"value":4544}," Analyzer",{"type":14,"tag":70,"props":4546,"children":4547},{"style":89},[4548],{"type":20,"value":473},{"type":14,"tag":70,"props":4550,"children":4551},{"class":72,"line":95},[4552,4557,4561,4565,4569,4573],{"type":14,"tag":70,"props":4553,"children":4554},{"style":89},[4555],{"type":20,"value":4556},"    scopes",{"type":14,"tag":70,"props":4558,"children":4559},{"style":77},[4560],{"type":20,"value":948},{"type":14,"tag":70,"props":4562,"children":4563},{"style":83},[4564],{"type":20,"value":967},{"type":14,"tag":70,"props":4566,"children":4567},{"style":89},[4568],{"type":20,"value":972},{"type":14,"tag":70,"props":4570,"children":4571},{"style":83},[4572],{"type":20,"value":4171},{"type":14,"tag":70,"props":4574,"children":4575},{"style":89},[4576],{"type":20,"value":4215},{"type":14,"tag":70,"props":4578,"children":4579},{"class":72,"line":115},[4580,4585,4589,4593,4597,4602],{"type":14,"tag":70,"props":4581,"children":4582},{"style":89},[4583],{"type":20,"value":4584},"    function_metadata",{"type":14,"tag":70,"props":4586,"children":4587},{"style":77},[4588],{"type":20,"value":948},{"type":14,"tag":70,"props":4590,"children":4591},{"style":83},[4592],{"type":20,"value":4153},{"type":14,"tag":70,"props":4594,"children":4595},{"style":89},[4596],{"type":20,"value":972},{"type":14,"tag":70,"props":4598,"children":4599},{"style":83},[4600],{"type":20,"value":4601},"FunctionMetadata",{"type":14,"tag":70,"props":4603,"children":4604},{"style":89},[4605],{"type":20,"value":4215},{"type":14,"tag":70,"props":4607,"children":4608},{"class":72,"line":129},[4609,4614,4618,4622],{"type":14,"tag":70,"props":4610,"children":4611},{"style":89},[4612],{"type":20,"value":4613},"    current_identifier",{"type":14,"tag":70,"props":4615,"children":4616},{"style":77},[4617],{"type":20,"value":948},{"type":14,"tag":70,"props":4619,"children":4620},{"style":83},[4621],{"type":20,"value":3600},{"type":14,"tag":70,"props":4623,"children":4624},{"style":89},[4625],{"type":20,"value":1068},{"type":14,"tag":70,"props":4627,"children":4628},{"class":72,"line":147},[4629],{"type":14,"tag":70,"props":4630,"children":4631},{"style":89},[4632],{"type":20,"value":663},{"type":14,"tag":70,"props":4634,"children":4635},{"class":72,"line":161},[4636],{"type":14,"tag":70,"props":4637,"children":4638},{"emptyLinePlaceholder":1210},[4639],{"type":20,"value":1213},{"type":14,"tag":70,"props":4641,"children":4642},{"class":72,"line":310},[4643,4647,4651],{"type":14,"tag":70,"props":4644,"children":4645},{"style":77},[4646],{"type":20,"value":4319},{"type":14,"tag":70,"props":4648,"children":4649},{"style":83},[4650],{"type":20,"value":4544},{"type":14,"tag":70,"props":4652,"children":4653},{"style":89},[4654],{"type":20,"value":473},{"type":14,"tag":70,"props":4656,"children":4657},{"class":72,"line":492},[4658],{"type":14,"tag":70,"props":4659,"children":4660},{"style":165},[4661],{"type":20,"value":3879},{"type":14,"tag":70,"props":4663,"children":4664},{"class":72,"line":501},[4665,4670,4674,4679,4684,4688,4693],{"type":14,"tag":70,"props":4666,"children":4667},{"style":77},[4668],{"type":20,"value":4669},"    pub",{"type":14,"tag":70,"props":4671,"children":4672},{"style":77},[4673],{"type":20,"value":1021},{"type":14,"tag":70,"props":4675,"children":4676},{"style":83},[4677],{"type":20,"value":4678}," new",{"type":14,"tag":70,"props":4680,"children":4681},{"style":89},[4682],{"type":20,"value":4683},"() ",{"type":14,"tag":70,"props":4685,"children":4686},{"style":77},[4687],{"type":20,"value":1081},{"type":14,"tag":70,"props":4689,"children":4690},{"style":109},[4691],{"type":20,"value":4692}," Self",{"type":14,"tag":70,"props":4694,"children":4695},{"style":89},[4696],{"type":20,"value":473},{"type":14,"tag":70,"props":4698,"children":4699},{"class":72,"line":522},[4700,4705],{"type":14,"tag":70,"props":4701,"children":4702},{"style":109},[4703],{"type":20,"value":4704},"        Self",{"type":14,"tag":70,"props":4706,"children":4707},{"style":89},[4708],{"type":20,"value":473},{"type":14,"tag":70,"props":4710,"children":4711},{"class":72,"line":1275},[4712,4717,4721,4725,4729,4733],{"type":14,"tag":70,"props":4713,"children":4714},{"style":89},[4715],{"type":20,"value":4716},"            scopes",{"type":14,"tag":70,"props":4718,"children":4719},{"style":77},[4720],{"type":20,"value":948},{"type":14,"tag":70,"props":4722,"children":4723},{"style":83},[4724],{"type":20,"value":967},{"type":14,"tag":70,"props":4726,"children":4727},{"style":77},[4728],{"type":20,"value":1058},{"type":14,"tag":70,"props":4730,"children":4731},{"style":83},[4732],{"type":20,"value":1199},{"type":14,"tag":70,"props":4734,"children":4735},{"style":89},[4736],{"type":20,"value":2853},{"type":14,"tag":70,"props":4738,"children":4739},{"class":72,"line":1283},[4740,4745,4749,4754],{"type":14,"tag":70,"props":4741,"children":4742},{"style":89},[4743],{"type":20,"value":4744},"            function_metadata",{"type":14,"tag":70,"props":4746,"children":4747},{"style":77},[4748],{"type":20,"value":948},{"type":14,"tag":70,"props":4750,"children":4751},{"style":83},[4752],{"type":20,"value":4753}," None",{"type":14,"tag":70,"props":4755,"children":4756},{"style":89},[4757],{"type":20,"value":1068},{"type":14,"tag":70,"props":4759,"children":4760},{"class":72,"line":1307},[4761,4766,4770,4775],{"type":14,"tag":70,"props":4762,"children":4763},{"style":89},[4764],{"type":20,"value":4765},"            current_identifier",{"type":14,"tag":70,"props":4767,"children":4768},{"style":77},[4769],{"type":20,"value":948},{"type":14,"tag":70,"props":4771,"children":4772},{"style":109},[4773],{"type":20,"value":4774}," 0",{"type":14,"tag":70,"props":4776,"children":4777},{"style":89},[4778],{"type":20,"value":1068},{"type":14,"tag":70,"props":4780,"children":4781},{"class":72,"line":1316},[4782],{"type":14,"tag":70,"props":4783,"children":4784},{"style":89},[4785],{"type":20,"value":1436},{"type":14,"tag":70,"props":4787,"children":4788},{"class":72,"line":1324},[4789],{"type":14,"tag":70,"props":4790,"children":4791},{"style":89},[4792],{"type":20,"value":498},{"type":14,"tag":70,"props":4794,"children":4795},{"class":72,"line":1363},[4796],{"type":14,"tag":70,"props":4797,"children":4798},{"style":89},[4799],{"type":20,"value":663},{"type":14,"tag":22,"props":4801,"children":4802},{},[4803],{"type":20,"value":4804},"Because of this chang we now need to change how we are calling the type analyzer.",{"type":14,"tag":59,"props":4806,"children":4808},{"code":4807,"language":177,"meta":7,"className":178,"style":7},"// lib.rs\n    let ir = type_analyzer::Analyzer::new()\n        .resolve_module(&ast)\n        .context(\"Resolving types\")?;\n",[4809],{"type":14,"tag":66,"props":4810,"children":4811},{"__ignoreMap":7},[4812,4820,4863,4889],{"type":14,"tag":70,"props":4813,"children":4814},{"class":72,"line":73},[4815],{"type":14,"tag":70,"props":4816,"children":4817},{"style":165},[4818],{"type":20,"value":4819},"// lib.rs\n",{"type":14,"tag":70,"props":4821,"children":4822},{"class":72,"line":95},[4823,4827,4832,4836,4841,4845,4850,4854,4858],{"type":14,"tag":70,"props":4824,"children":4825},{"style":77},[4826],{"type":20,"value":208},{"type":14,"tag":70,"props":4828,"children":4829},{"style":89},[4830],{"type":20,"value":4831}," ir ",{"type":14,"tag":70,"props":4833,"children":4834},{"style":77},[4835],{"type":20,"value":106},{"type":14,"tag":70,"props":4837,"children":4838},{"style":83},[4839],{"type":20,"value":4840}," type_analyzer",{"type":14,"tag":70,"props":4842,"children":4843},{"style":77},[4844],{"type":20,"value":1058},{"type":14,"tag":70,"props":4846,"children":4847},{"style":83},[4848],{"type":20,"value":4849},"Analyzer",{"type":14,"tag":70,"props":4851,"children":4852},{"style":77},[4853],{"type":20,"value":1058},{"type":14,"tag":70,"props":4855,"children":4856},{"style":83},[4857],{"type":20,"value":1199},{"type":14,"tag":70,"props":4859,"children":4860},{"style":89},[4861],{"type":20,"value":4862},"()\n",{"type":14,"tag":70,"props":4864,"children":4865},{"class":72,"line":115},[4866,4871,4876,4880,4884],{"type":14,"tag":70,"props":4867,"children":4868},{"style":77},[4869],{"type":20,"value":4870},"        .",{"type":14,"tag":70,"props":4872,"children":4873},{"style":83},[4874],{"type":20,"value":4875},"resolve_module",{"type":14,"tag":70,"props":4877,"children":4878},{"style":89},[4879],{"type":20,"value":291},{"type":14,"tag":70,"props":4881,"children":4882},{"style":77},[4883],{"type":20,"value":1493},{"type":14,"tag":70,"props":4885,"children":4886},{"style":89},[4887],{"type":20,"value":4888},"ast)\n",{"type":14,"tag":70,"props":4890,"children":4891},{"class":72,"line":129},[4892,4896,4900,4904,4909,4913,4917],{"type":14,"tag":70,"props":4893,"children":4894},{"style":77},[4895],{"type":20,"value":4870},{"type":14,"tag":70,"props":4897,"children":4898},{"style":83},[4899],{"type":20,"value":1638},{"type":14,"tag":70,"props":4901,"children":4902},{"style":89},[4903],{"type":20,"value":291},{"type":14,"tag":70,"props":4905,"children":4906},{"style":294},[4907],{"type":20,"value":4908},"\"Resolving types\"",{"type":14,"tag":70,"props":4910,"children":4911},{"style":89},[4912],{"type":20,"value":2618},{"type":14,"tag":70,"props":4914,"children":4915},{"style":77},[4916],{"type":20,"value":1268},{"type":14,"tag":70,"props":4918,"children":4919},{"style":89},[4920],{"type":20,"value":227},{"type":14,"tag":22,"props":4922,"children":4923},{},[4924],{"type":20,"value":4925},"Then when we analyze a function (in this case just main) we setup the metadata:",{"type":14,"tag":59,"props":4927,"children":4929},{"code":4928,"language":177,"meta":7,"className":178,"style":7},"pub fn resolve_top_level_statement(\n    &mut self,\n    statement: &ast::ToplevelStatement,\n) -> anyhow::Result\u003Cir::ToplevelStatement> {\n    match statement {\n        ast::ToplevelStatement::MainFunction(statements) => {\n            self.function_metadata = Some(FunctionMetadata { locals: Vec::new() });\n            self.scopes.push(VarScope {\n                parent: None,\n                variables: HashMap::new(),\n            });\n\n            let mut ir_statements = Vec::new();\n\n            for statement in statements {\n                let ir_statement = self.resolve_statement(statement)?;\n\n                ir_statements.push(ir_statement);\n            }\n\n            Ok(ir::ToplevelStatement::Function {\n                name: String::from(\"main\"),\n                body: ir_statements,\n                locals: self.function_metadata.as_ref().unwrap().locals.clone(),\n            })\n        }\n    }\n}\n",[4930],{"type":14,"tag":66,"props":4931,"children":4932},{"__ignoreMap":7},[4933,4952,4968,4999,5038,5049,5084,5143,5179,5199,5227,5235,5242,5277,5284,5303,5343,5350,5369,5376,5383,5418,5453,5468,5541,5548,5555,5562],{"type":14,"tag":70,"props":4934,"children":4935},{"class":72,"line":73},[4936,4940,4944,4948],{"type":14,"tag":70,"props":4937,"children":4938},{"style":77},[4939],{"type":20,"value":916},{"type":14,"tag":70,"props":4941,"children":4942},{"style":77},[4943],{"type":20,"value":1021},{"type":14,"tag":70,"props":4945,"children":4946},{"style":83},[4947],{"type":20,"value":1026},{"type":14,"tag":70,"props":4949,"children":4950},{"style":89},[4951],{"type":20,"value":1031},{"type":14,"tag":70,"props":4953,"children":4954},{"class":72,"line":95},[4955,4960,4964],{"type":14,"tag":70,"props":4956,"children":4957},{"style":77},[4958],{"type":20,"value":4959},"    &mut",{"type":14,"tag":70,"props":4961,"children":4962},{"style":109},[4963],{"type":20,"value":1629},{"type":14,"tag":70,"props":4965,"children":4966},{"style":89},[4967],{"type":20,"value":1068},{"type":14,"tag":70,"props":4969,"children":4970},{"class":72,"line":115},[4971,4975,4979,4983,4987,4991,4995],{"type":14,"tag":70,"props":4972,"children":4973},{"style":89},[4974],{"type":20,"value":1039},{"type":14,"tag":70,"props":4976,"children":4977},{"style":77},[4978],{"type":20,"value":948},{"type":14,"tag":70,"props":4980,"children":4981},{"style":77},[4982],{"type":20,"value":1048},{"type":14,"tag":70,"props":4984,"children":4985},{"style":83},[4986],{"type":20,"value":1053},{"type":14,"tag":70,"props":4988,"children":4989},{"style":77},[4990],{"type":20,"value":1058},{"type":14,"tag":70,"props":4992,"children":4993},{"style":83},[4994],{"type":20,"value":1063},{"type":14,"tag":70,"props":4996,"children":4997},{"style":89},[4998],{"type":20,"value":1068},{"type":14,"tag":70,"props":5000,"children":5001},{"class":72,"line":129},[5002,5006,5010,5014,5018,5022,5026,5030,5034],{"type":14,"tag":70,"props":5003,"children":5004},{"style":89},[5005],{"type":20,"value":1076},{"type":14,"tag":70,"props":5007,"children":5008},{"style":77},[5009],{"type":20,"value":1081},{"type":14,"tag":70,"props":5011,"children":5012},{"style":83},[5013],{"type":20,"value":1086},{"type":14,"tag":70,"props":5015,"children":5016},{"style":77},[5017],{"type":20,"value":1058},{"type":14,"tag":70,"props":5019,"children":5020},{"style":83},[5021],{"type":20,"value":1095},{"type":14,"tag":70,"props":5023,"children":5024},{"style":89},[5025],{"type":20,"value":1100},{"type":14,"tag":70,"props":5027,"children":5028},{"style":77},[5029],{"type":20,"value":1058},{"type":14,"tag":70,"props":5031,"children":5032},{"style":83},[5033],{"type":20,"value":1063},{"type":14,"tag":70,"props":5035,"children":5036},{"style":89},[5037],{"type":20,"value":1113},{"type":14,"tag":70,"props":5039,"children":5040},{"class":72,"line":147},[5041,5045],{"type":14,"tag":70,"props":5042,"children":5043},{"style":77},[5044],{"type":20,"value":1121},{"type":14,"tag":70,"props":5046,"children":5047},{"style":89},[5048],{"type":20,"value":1126},{"type":14,"tag":70,"props":5050,"children":5051},{"class":72,"line":161},[5052,5056,5060,5064,5068,5072,5076,5080],{"type":14,"tag":70,"props":5053,"children":5054},{"style":83},[5055],{"type":20,"value":1134},{"type":14,"tag":70,"props":5057,"children":5058},{"style":77},[5059],{"type":20,"value":1058},{"type":14,"tag":70,"props":5061,"children":5062},{"style":83},[5063],{"type":20,"value":1063},{"type":14,"tag":70,"props":5065,"children":5066},{"style":77},[5067],{"type":20,"value":1058},{"type":14,"tag":70,"props":5069,"children":5070},{"style":83},[5071],{"type":20,"value":1151},{"type":14,"tag":70,"props":5073,"children":5074},{"style":89},[5075],{"type":20,"value":1156},{"type":14,"tag":70,"props":5077,"children":5078},{"style":77},[5079],{"type":20,"value":1161},{"type":14,"tag":70,"props":5081,"children":5082},{"style":89},[5083],{"type":20,"value":473},{"type":14,"tag":70,"props":5085,"children":5086},{"class":72,"line":310},[5087,5091,5095,5100,5104,5109,5113,5117,5122,5126,5130,5134,5138],{"type":14,"tag":70,"props":5088,"children":5089},{"style":109},[5090],{"type":20,"value":1814},{"type":14,"tag":70,"props":5092,"children":5093},{"style":77},[5094],{"type":20,"value":1294},{"type":14,"tag":70,"props":5096,"children":5097},{"style":89},[5098],{"type":20,"value":5099},"function_metadata ",{"type":14,"tag":70,"props":5101,"children":5102},{"style":77},[5103],{"type":20,"value":106},{"type":14,"tag":70,"props":5105,"children":5106},{"style":83},[5107],{"type":20,"value":5108}," Some",{"type":14,"tag":70,"props":5110,"children":5111},{"style":89},[5112],{"type":20,"value":291},{"type":14,"tag":70,"props":5114,"children":5115},{"style":83},[5116],{"type":20,"value":4601},{"type":14,"tag":70,"props":5118,"children":5119},{"style":89},[5120],{"type":20,"value":5121}," { locals",{"type":14,"tag":70,"props":5123,"children":5124},{"style":77},[5125],{"type":20,"value":948},{"type":14,"tag":70,"props":5127,"children":5128},{"style":83},[5129],{"type":20,"value":967},{"type":14,"tag":70,"props":5131,"children":5132},{"style":77},[5133],{"type":20,"value":1058},{"type":14,"tag":70,"props":5135,"children":5136},{"style":83},[5137],{"type":20,"value":1199},{"type":14,"tag":70,"props":5139,"children":5140},{"style":89},[5141],{"type":20,"value":5142},"() });\n",{"type":14,"tag":70,"props":5144,"children":5145},{"class":72,"line":492},[5146,5150,5154,5159,5163,5167,5171,5175],{"type":14,"tag":70,"props":5147,"children":5148},{"style":109},[5149],{"type":20,"value":1814},{"type":14,"tag":70,"props":5151,"children":5152},{"style":77},[5153],{"type":20,"value":1294},{"type":14,"tag":70,"props":5155,"children":5156},{"style":89},[5157],{"type":20,"value":5158},"scopes",{"type":14,"tag":70,"props":5160,"children":5161},{"style":77},[5162],{"type":20,"value":1294},{"type":14,"tag":70,"props":5164,"children":5165},{"style":83},[5166],{"type":20,"value":1299},{"type":14,"tag":70,"props":5168,"children":5169},{"style":89},[5170],{"type":20,"value":291},{"type":14,"tag":70,"props":5172,"children":5173},{"style":83},[5174],{"type":20,"value":4171},{"type":14,"tag":70,"props":5176,"children":5177},{"style":89},[5178],{"type":20,"value":473},{"type":14,"tag":70,"props":5180,"children":5181},{"class":72,"line":501},[5182,5187,5191,5195],{"type":14,"tag":70,"props":5183,"children":5184},{"style":89},[5185],{"type":20,"value":5186},"                parent",{"type":14,"tag":70,"props":5188,"children":5189},{"style":77},[5190],{"type":20,"value":948},{"type":14,"tag":70,"props":5192,"children":5193},{"style":83},[5194],{"type":20,"value":4753},{"type":14,"tag":70,"props":5196,"children":5197},{"style":89},[5198],{"type":20,"value":1068},{"type":14,"tag":70,"props":5200,"children":5201},{"class":72,"line":522},[5202,5207,5211,5215,5219,5223],{"type":14,"tag":70,"props":5203,"children":5204},{"style":89},[5205],{"type":20,"value":5206},"                variables",{"type":14,"tag":70,"props":5208,"children":5209},{"style":77},[5210],{"type":20,"value":948},{"type":14,"tag":70,"props":5212,"children":5213},{"style":83},[5214],{"type":20,"value":4193},{"type":14,"tag":70,"props":5216,"children":5217},{"style":77},[5218],{"type":20,"value":1058},{"type":14,"tag":70,"props":5220,"children":5221},{"style":83},[5222],{"type":20,"value":1199},{"type":14,"tag":70,"props":5224,"children":5225},{"style":89},[5226],{"type":20,"value":2853},{"type":14,"tag":70,"props":5228,"children":5229},{"class":72,"line":1275},[5230],{"type":14,"tag":70,"props":5231,"children":5232},{"style":89},[5233],{"type":20,"value":5234},"            });\n",{"type":14,"tag":70,"props":5236,"children":5237},{"class":72,"line":1283},[5238],{"type":14,"tag":70,"props":5239,"children":5240},{"emptyLinePlaceholder":1210},[5241],{"type":20,"value":1213},{"type":14,"tag":70,"props":5243,"children":5244},{"class":72,"line":1307},[5245,5249,5253,5257,5261,5265,5269,5273],{"type":14,"tag":70,"props":5246,"children":5247},{"style":77},[5248],{"type":20,"value":1173},{"type":14,"tag":70,"props":5250,"children":5251},{"style":77},[5252],{"type":20,"value":403},{"type":14,"tag":70,"props":5254,"children":5255},{"style":89},[5256],{"type":20,"value":1182},{"type":14,"tag":70,"props":5258,"children":5259},{"style":77},[5260],{"type":20,"value":106},{"type":14,"tag":70,"props":5262,"children":5263},{"style":83},[5264],{"type":20,"value":967},{"type":14,"tag":70,"props":5266,"children":5267},{"style":77},[5268],{"type":20,"value":1058},{"type":14,"tag":70,"props":5270,"children":5271},{"style":83},[5272],{"type":20,"value":1199},{"type":14,"tag":70,"props":5274,"children":5275},{"style":89},[5276],{"type":20,"value":1204},{"type":14,"tag":70,"props":5278,"children":5279},{"class":72,"line":1316},[5280],{"type":14,"tag":70,"props":5281,"children":5282},{"emptyLinePlaceholder":1210},[5283],{"type":20,"value":1213},{"type":14,"tag":70,"props":5285,"children":5286},{"class":72,"line":1324},[5287,5291,5295,5299],{"type":14,"tag":70,"props":5288,"children":5289},{"style":77},[5290],{"type":20,"value":1221},{"type":14,"tag":70,"props":5292,"children":5293},{"style":89},[5294],{"type":20,"value":1226},{"type":14,"tag":70,"props":5296,"children":5297},{"style":77},[5298],{"type":20,"value":1231},{"type":14,"tag":70,"props":5300,"children":5301},{"style":89},[5302],{"type":20,"value":1236},{"type":14,"tag":70,"props":5304,"children":5305},{"class":72,"line":1363},[5306,5310,5314,5318,5322,5326,5331,5335,5339],{"type":14,"tag":70,"props":5307,"children":5308},{"style":77},[5309],{"type":20,"value":1244},{"type":14,"tag":70,"props":5311,"children":5312},{"style":89},[5313],{"type":20,"value":1249},{"type":14,"tag":70,"props":5315,"children":5316},{"style":77},[5317],{"type":20,"value":106},{"type":14,"tag":70,"props":5319,"children":5320},{"style":109},[5321],{"type":20,"value":1629},{"type":14,"tag":70,"props":5323,"children":5324},{"style":77},[5325],{"type":20,"value":1294},{"type":14,"tag":70,"props":5327,"children":5328},{"style":83},[5329],{"type":20,"value":5330},"resolve_statement",{"type":14,"tag":70,"props":5332,"children":5333},{"style":89},[5334],{"type":20,"value":1263},{"type":14,"tag":70,"props":5336,"children":5337},{"style":77},[5338],{"type":20,"value":1268},{"type":14,"tag":70,"props":5340,"children":5341},{"style":89},[5342],{"type":20,"value":227},{"type":14,"tag":70,"props":5344,"children":5345},{"class":72,"line":1403},[5346],{"type":14,"tag":70,"props":5347,"children":5348},{"emptyLinePlaceholder":1210},[5349],{"type":20,"value":1213},{"type":14,"tag":70,"props":5351,"children":5352},{"class":72,"line":1421},[5353,5357,5361,5365],{"type":14,"tag":70,"props":5354,"children":5355},{"style":89},[5356],{"type":20,"value":1289},{"type":14,"tag":70,"props":5358,"children":5359},{"style":77},[5360],{"type":20,"value":1294},{"type":14,"tag":70,"props":5362,"children":5363},{"style":83},[5364],{"type":20,"value":1299},{"type":14,"tag":70,"props":5366,"children":5367},{"style":89},[5368],{"type":20,"value":1304},{"type":14,"tag":70,"props":5370,"children":5371},{"class":72,"line":1430},[5372],{"type":14,"tag":70,"props":5373,"children":5374},{"style":89},[5375],{"type":20,"value":1313},{"type":14,"tag":70,"props":5377,"children":5378},{"class":72,"line":1439},[5379],{"type":14,"tag":70,"props":5380,"children":5381},{"emptyLinePlaceholder":1210},[5382],{"type":20,"value":1213},{"type":14,"tag":70,"props":5384,"children":5385},{"class":72,"line":1447},[5386,5390,5394,5398,5402,5406,5410,5414],{"type":14,"tag":70,"props":5387,"children":5388},{"style":83},[5389],{"type":20,"value":1330},{"type":14,"tag":70,"props":5391,"children":5392},{"style":89},[5393],{"type":20,"value":291},{"type":14,"tag":70,"props":5395,"children":5396},{"style":83},[5397],{"type":20,"value":1339},{"type":14,"tag":70,"props":5399,"children":5400},{"style":77},[5401],{"type":20,"value":1058},{"type":14,"tag":70,"props":5403,"children":5404},{"style":83},[5405],{"type":20,"value":1063},{"type":14,"tag":70,"props":5407,"children":5408},{"style":77},[5409],{"type":20,"value":1058},{"type":14,"tag":70,"props":5411,"children":5412},{"style":83},[5413],{"type":20,"value":1356},{"type":14,"tag":70,"props":5415,"children":5416},{"style":89},[5417],{"type":20,"value":473},{"type":14,"tag":70,"props":5419,"children":5420},{"class":72,"line":1998},[5421,5425,5429,5433,5437,5441,5445,5449],{"type":14,"tag":70,"props":5422,"children":5423},{"style":89},[5424],{"type":20,"value":1369},{"type":14,"tag":70,"props":5426,"children":5427},{"style":77},[5428],{"type":20,"value":948},{"type":14,"tag":70,"props":5430,"children":5431},{"style":83},[5432],{"type":20,"value":953},{"type":14,"tag":70,"props":5434,"children":5435},{"style":77},[5436],{"type":20,"value":1058},{"type":14,"tag":70,"props":5438,"children":5439},{"style":83},[5440],{"type":20,"value":1386},{"type":14,"tag":70,"props":5442,"children":5443},{"style":89},[5444],{"type":20,"value":291},{"type":14,"tag":70,"props":5446,"children":5447},{"style":294},[5448],{"type":20,"value":1395},{"type":14,"tag":70,"props":5450,"children":5451},{"style":89},[5452],{"type":20,"value":1400},{"type":14,"tag":70,"props":5454,"children":5455},{"class":72,"line":3828},[5456,5460,5464],{"type":14,"tag":70,"props":5457,"children":5458},{"style":89},[5459],{"type":20,"value":1409},{"type":14,"tag":70,"props":5461,"children":5462},{"style":77},[5463],{"type":20,"value":948},{"type":14,"tag":70,"props":5465,"children":5466},{"style":89},[5467],{"type":20,"value":1418},{"type":14,"tag":70,"props":5469,"children":5470},{"class":72,"line":3836},[5471,5476,5480,5484,5488,5493,5497,5502,5506,5510,5515,5519,5523,5528,5532,5537],{"type":14,"tag":70,"props":5472,"children":5473},{"style":89},[5474],{"type":20,"value":5475},"                locals",{"type":14,"tag":70,"props":5477,"children":5478},{"style":77},[5479],{"type":20,"value":948},{"type":14,"tag":70,"props":5481,"children":5482},{"style":109},[5483],{"type":20,"value":1629},{"type":14,"tag":70,"props":5485,"children":5486},{"style":77},[5487],{"type":20,"value":1294},{"type":14,"tag":70,"props":5489,"children":5490},{"style":89},[5491],{"type":20,"value":5492},"function_metadata",{"type":14,"tag":70,"props":5494,"children":5495},{"style":77},[5496],{"type":20,"value":1294},{"type":14,"tag":70,"props":5498,"children":5499},{"style":83},[5500],{"type":20,"value":5501},"as_ref",{"type":14,"tag":70,"props":5503,"children":5504},{"style":89},[5505],{"type":20,"value":2521},{"type":14,"tag":70,"props":5507,"children":5508},{"style":77},[5509],{"type":20,"value":1294},{"type":14,"tag":70,"props":5511,"children":5512},{"style":83},[5513],{"type":20,"value":5514},"unwrap",{"type":14,"tag":70,"props":5516,"children":5517},{"style":89},[5518],{"type":20,"value":2521},{"type":14,"tag":70,"props":5520,"children":5521},{"style":77},[5522],{"type":20,"value":1294},{"type":14,"tag":70,"props":5524,"children":5525},{"style":89},[5526],{"type":20,"value":5527},"locals",{"type":14,"tag":70,"props":5529,"children":5530},{"style":77},[5531],{"type":20,"value":1294},{"type":14,"tag":70,"props":5533,"children":5534},{"style":83},[5535],{"type":20,"value":5536},"clone",{"type":14,"tag":70,"props":5538,"children":5539},{"style":89},[5540],{"type":20,"value":2853},{"type":14,"tag":70,"props":5542,"children":5543},{"class":72,"line":3852},[5544],{"type":14,"tag":70,"props":5545,"children":5546},{"style":89},[5547],{"type":20,"value":1427},{"type":14,"tag":70,"props":5549,"children":5550},{"class":72,"line":3873},[5551],{"type":14,"tag":70,"props":5552,"children":5553},{"style":89},[5554],{"type":20,"value":1436},{"type":14,"tag":70,"props":5556,"children":5557},{"class":72,"line":3882},[5558],{"type":14,"tag":70,"props":5559,"children":5560},{"style":89},[5561],{"type":20,"value":498},{"type":14,"tag":70,"props":5563,"children":5564},{"class":72,"line":3903},[5565],{"type":14,"tag":70,"props":5566,"children":5567},{"style":89},[5568],{"type":20,"value":663},{"type":14,"tag":22,"props":5570,"children":5571},{},[5572],{"type":20,"value":5573},"When we analyze a declaration we add the variable to the current scope and the list of the functions locals vars.",{"type":14,"tag":59,"props":5575,"children":5577},{"code":5576,"language":177,"meta":7,"className":178,"style":7},"ast::Statement::Declaration(name, expression) => {\n    let identifier = self.get_free_identifier();\n    let typed_expression = self.resolve_expression(expression)?;\n\n    let var_type = typed_expression.to_var_type();\n    self.function_metadata\n        .as_mut()\n        .unwrap()\n        .locals\n        .push((identifier, var_type));\n\n    let assignment = match typed_expression {\n        TypedExpression::Int(int_expression) => {\n            ir::AssignmentStatement::Int(int_expression)\n        }\n        TypedExpression::Boolean(boolean_expression) => {\n            ir::AssignmentStatement::Boolean(boolean_expression)\n        }\n    };\n\n    self.scopes.last_mut().unwrap().variables.insert(\n        name.clone(),\n        VarInfo {\n            identifier,\n            var_type,\n        },\n    );\n\n    Ok(ir::Statement::Assignment(identifier, assignment))\n}\n",[5578],{"type":14,"tag":66,"props":5579,"children":5580},{"__ignoreMap":7},[5581,5617,5649,5691,5698,5732,5749,5765,5780,5792,5808,5815,5841,5870,5899,5906,5934,5962,5969,5977,5984,6046,6066,6078,6086,6094,6102,6110,6117,6154],{"type":14,"tag":70,"props":5582,"children":5583},{"class":72,"line":73},[5584,5588,5592,5596,5600,5604,5609,5613],{"type":14,"tag":70,"props":5585,"children":5586},{"style":83},[5587],{"type":20,"value":1053},{"type":14,"tag":70,"props":5589,"children":5590},{"style":77},[5591],{"type":20,"value":1058},{"type":14,"tag":70,"props":5593,"children":5594},{"style":83},[5595],{"type":20,"value":977},{"type":14,"tag":70,"props":5597,"children":5598},{"style":77},[5599],{"type":20,"value":1058},{"type":14,"tag":70,"props":5601,"children":5602},{"style":83},[5603],{"type":20,"value":2782},{"type":14,"tag":70,"props":5605,"children":5606},{"style":89},[5607],{"type":20,"value":5608},"(name, expression) ",{"type":14,"tag":70,"props":5610,"children":5611},{"style":77},[5612],{"type":20,"value":1161},{"type":14,"tag":70,"props":5614,"children":5615},{"style":89},[5616],{"type":20,"value":473},{"type":14,"tag":70,"props":5618,"children":5619},{"class":72,"line":95},[5620,5624,5628,5632,5636,5640,5645],{"type":14,"tag":70,"props":5621,"children":5622},{"style":77},[5623],{"type":20,"value":208},{"type":14,"tag":70,"props":5625,"children":5626},{"style":89},[5627],{"type":20,"value":2499},{"type":14,"tag":70,"props":5629,"children":5630},{"style":77},[5631],{"type":20,"value":106},{"type":14,"tag":70,"props":5633,"children":5634},{"style":109},[5635],{"type":20,"value":1629},{"type":14,"tag":70,"props":5637,"children":5638},{"style":77},[5639],{"type":20,"value":1294},{"type":14,"tag":70,"props":5641,"children":5642},{"style":83},[5643],{"type":20,"value":5644},"get_free_identifier",{"type":14,"tag":70,"props":5646,"children":5647},{"style":89},[5648],{"type":20,"value":1204},{"type":14,"tag":70,"props":5650,"children":5651},{"class":72,"line":115},[5652,5656,5661,5665,5669,5673,5678,5683,5687],{"type":14,"tag":70,"props":5653,"children":5654},{"style":77},[5655],{"type":20,"value":208},{"type":14,"tag":70,"props":5657,"children":5658},{"style":89},[5659],{"type":20,"value":5660}," typed_expression ",{"type":14,"tag":70,"props":5662,"children":5663},{"style":77},[5664],{"type":20,"value":106},{"type":14,"tag":70,"props":5666,"children":5667},{"style":109},[5668],{"type":20,"value":1629},{"type":14,"tag":70,"props":5670,"children":5671},{"style":77},[5672],{"type":20,"value":1294},{"type":14,"tag":70,"props":5674,"children":5675},{"style":83},[5676],{"type":20,"value":5677},"resolve_expression",{"type":14,"tag":70,"props":5679,"children":5680},{"style":89},[5681],{"type":20,"value":5682},"(expression)",{"type":14,"tag":70,"props":5684,"children":5685},{"style":77},[5686],{"type":20,"value":1268},{"type":14,"tag":70,"props":5688,"children":5689},{"style":89},[5690],{"type":20,"value":227},{"type":14,"tag":70,"props":5692,"children":5693},{"class":72,"line":129},[5694],{"type":14,"tag":70,"props":5695,"children":5696},{"emptyLinePlaceholder":1210},[5697],{"type":20,"value":1213},{"type":14,"tag":70,"props":5699,"children":5700},{"class":72,"line":147},[5701,5705,5710,5714,5719,5723,5728],{"type":14,"tag":70,"props":5702,"children":5703},{"style":77},[5704],{"type":20,"value":208},{"type":14,"tag":70,"props":5706,"children":5707},{"style":89},[5708],{"type":20,"value":5709}," var_type ",{"type":14,"tag":70,"props":5711,"children":5712},{"style":77},[5713],{"type":20,"value":106},{"type":14,"tag":70,"props":5715,"children":5716},{"style":89},[5717],{"type":20,"value":5718}," typed_expression",{"type":14,"tag":70,"props":5720,"children":5721},{"style":77},[5722],{"type":20,"value":1294},{"type":14,"tag":70,"props":5724,"children":5725},{"style":83},[5726],{"type":20,"value":5727},"to_var_type",{"type":14,"tag":70,"props":5729,"children":5730},{"style":89},[5731],{"type":20,"value":1204},{"type":14,"tag":70,"props":5733,"children":5734},{"class":72,"line":161},[5735,5740,5744],{"type":14,"tag":70,"props":5736,"children":5737},{"style":109},[5738],{"type":20,"value":5739},"    self",{"type":14,"tag":70,"props":5741,"children":5742},{"style":77},[5743],{"type":20,"value":1294},{"type":14,"tag":70,"props":5745,"children":5746},{"style":89},[5747],{"type":20,"value":5748},"function_metadata\n",{"type":14,"tag":70,"props":5750,"children":5751},{"class":72,"line":310},[5752,5756,5761],{"type":14,"tag":70,"props":5753,"children":5754},{"style":77},[5755],{"type":20,"value":4870},{"type":14,"tag":70,"props":5757,"children":5758},{"style":83},[5759],{"type":20,"value":5760},"as_mut",{"type":14,"tag":70,"props":5762,"children":5763},{"style":89},[5764],{"type":20,"value":4862},{"type":14,"tag":70,"props":5766,"children":5767},{"class":72,"line":492},[5768,5772,5776],{"type":14,"tag":70,"props":5769,"children":5770},{"style":77},[5771],{"type":20,"value":4870},{"type":14,"tag":70,"props":5773,"children":5774},{"style":83},[5775],{"type":20,"value":5514},{"type":14,"tag":70,"props":5777,"children":5778},{"style":89},[5779],{"type":20,"value":4862},{"type":14,"tag":70,"props":5781,"children":5782},{"class":72,"line":501},[5783,5787],{"type":14,"tag":70,"props":5784,"children":5785},{"style":77},[5786],{"type":20,"value":4870},{"type":14,"tag":70,"props":5788,"children":5789},{"style":89},[5790],{"type":20,"value":5791},"locals\n",{"type":14,"tag":70,"props":5793,"children":5794},{"class":72,"line":522},[5795,5799,5803],{"type":14,"tag":70,"props":5796,"children":5797},{"style":77},[5798],{"type":20,"value":4870},{"type":14,"tag":70,"props":5800,"children":5801},{"style":83},[5802],{"type":20,"value":1299},{"type":14,"tag":70,"props":5804,"children":5805},{"style":89},[5806],{"type":20,"value":5807},"((identifier, var_type));\n",{"type":14,"tag":70,"props":5809,"children":5810},{"class":72,"line":1275},[5811],{"type":14,"tag":70,"props":5812,"children":5813},{"emptyLinePlaceholder":1210},[5814],{"type":20,"value":1213},{"type":14,"tag":70,"props":5816,"children":5817},{"class":72,"line":1283},[5818,5822,5827,5831,5836],{"type":14,"tag":70,"props":5819,"children":5820},{"style":77},[5821],{"type":20,"value":208},{"type":14,"tag":70,"props":5823,"children":5824},{"style":89},[5825],{"type":20,"value":5826}," assignment ",{"type":14,"tag":70,"props":5828,"children":5829},{"style":77},[5830],{"type":20,"value":106},{"type":14,"tag":70,"props":5832,"children":5833},{"style":77},[5834],{"type":20,"value":5835}," match",{"type":14,"tag":70,"props":5837,"children":5838},{"style":89},[5839],{"type":20,"value":5840}," typed_expression {\n",{"type":14,"tag":70,"props":5842,"children":5843},{"class":72,"line":1307},[5844,5849,5853,5857,5862,5866],{"type":14,"tag":70,"props":5845,"children":5846},{"style":83},[5847],{"type":20,"value":5848},"        TypedExpression",{"type":14,"tag":70,"props":5850,"children":5851},{"style":77},[5852],{"type":20,"value":1058},{"type":14,"tag":70,"props":5854,"children":5855},{"style":83},[5856],{"type":20,"value":4415},{"type":14,"tag":70,"props":5858,"children":5859},{"style":89},[5860],{"type":20,"value":5861},"(int_expression) ",{"type":14,"tag":70,"props":5863,"children":5864},{"style":77},[5865],{"type":20,"value":1161},{"type":14,"tag":70,"props":5867,"children":5868},{"style":89},[5869],{"type":20,"value":473},{"type":14,"tag":70,"props":5871,"children":5872},{"class":72,"line":1316},[5873,5878,5882,5886,5890,5894],{"type":14,"tag":70,"props":5874,"children":5875},{"style":83},[5876],{"type":20,"value":5877},"            ir",{"type":14,"tag":70,"props":5879,"children":5880},{"style":77},[5881],{"type":20,"value":1058},{"type":14,"tag":70,"props":5883,"children":5884},{"style":83},[5885],{"type":20,"value":3726},{"type":14,"tag":70,"props":5887,"children":5888},{"style":77},[5889],{"type":20,"value":1058},{"type":14,"tag":70,"props":5891,"children":5892},{"style":83},[5893],{"type":20,"value":4415},{"type":14,"tag":70,"props":5895,"children":5896},{"style":89},[5897],{"type":20,"value":5898},"(int_expression)\n",{"type":14,"tag":70,"props":5900,"children":5901},{"class":72,"line":1324},[5902],{"type":14,"tag":70,"props":5903,"children":5904},{"style":89},[5905],{"type":20,"value":1436},{"type":14,"tag":70,"props":5907,"children":5908},{"class":72,"line":1363},[5909,5913,5917,5921,5926,5930],{"type":14,"tag":70,"props":5910,"children":5911},{"style":83},[5912],{"type":20,"value":5848},{"type":14,"tag":70,"props":5914,"children":5915},{"style":77},[5916],{"type":20,"value":1058},{"type":14,"tag":70,"props":5918,"children":5919},{"style":83},[5920],{"type":20,"value":3183},{"type":14,"tag":70,"props":5922,"children":5923},{"style":89},[5924],{"type":20,"value":5925},"(boolean_expression) ",{"type":14,"tag":70,"props":5927,"children":5928},{"style":77},[5929],{"type":20,"value":1161},{"type":14,"tag":70,"props":5931,"children":5932},{"style":89},[5933],{"type":20,"value":473},{"type":14,"tag":70,"props":5935,"children":5936},{"class":72,"line":1403},[5937,5941,5945,5949,5953,5957],{"type":14,"tag":70,"props":5938,"children":5939},{"style":83},[5940],{"type":20,"value":5877},{"type":14,"tag":70,"props":5942,"children":5943},{"style":77},[5944],{"type":20,"value":1058},{"type":14,"tag":70,"props":5946,"children":5947},{"style":83},[5948],{"type":20,"value":3726},{"type":14,"tag":70,"props":5950,"children":5951},{"style":77},[5952],{"type":20,"value":1058},{"type":14,"tag":70,"props":5954,"children":5955},{"style":83},[5956],{"type":20,"value":3183},{"type":14,"tag":70,"props":5958,"children":5959},{"style":89},[5960],{"type":20,"value":5961},"(boolean_expression)\n",{"type":14,"tag":70,"props":5963,"children":5964},{"class":72,"line":1421},[5965],{"type":14,"tag":70,"props":5966,"children":5967},{"style":89},[5968],{"type":20,"value":1436},{"type":14,"tag":70,"props":5970,"children":5971},{"class":72,"line":1430},[5972],{"type":14,"tag":70,"props":5973,"children":5974},{"style":89},[5975],{"type":20,"value":5976},"    };\n",{"type":14,"tag":70,"props":5978,"children":5979},{"class":72,"line":1439},[5980],{"type":14,"tag":70,"props":5981,"children":5982},{"emptyLinePlaceholder":1210},[5983],{"type":20,"value":1213},{"type":14,"tag":70,"props":5985,"children":5986},{"class":72,"line":1447},[5987,5991,5995,5999,6003,6008,6012,6016,6020,6024,6028,6033,6037,6042],{"type":14,"tag":70,"props":5988,"children":5989},{"style":109},[5990],{"type":20,"value":5739},{"type":14,"tag":70,"props":5992,"children":5993},{"style":77},[5994],{"type":20,"value":1294},{"type":14,"tag":70,"props":5996,"children":5997},{"style":89},[5998],{"type":20,"value":5158},{"type":14,"tag":70,"props":6000,"children":6001},{"style":77},[6002],{"type":20,"value":1294},{"type":14,"tag":70,"props":6004,"children":6005},{"style":83},[6006],{"type":20,"value":6007},"last_mut",{"type":14,"tag":70,"props":6009,"children":6010},{"style":89},[6011],{"type":20,"value":2521},{"type":14,"tag":70,"props":6013,"children":6014},{"style":77},[6015],{"type":20,"value":1294},{"type":14,"tag":70,"props":6017,"children":6018},{"style":83},[6019],{"type":20,"value":5514},{"type":14,"tag":70,"props":6021,"children":6022},{"style":89},[6023],{"type":20,"value":2521},{"type":14,"tag":70,"props":6025,"children":6026},{"style":77},[6027],{"type":20,"value":1294},{"type":14,"tag":70,"props":6029,"children":6030},{"style":89},[6031],{"type":20,"value":6032},"variables",{"type":14,"tag":70,"props":6034,"children":6035},{"style":77},[6036],{"type":20,"value":1294},{"type":14,"tag":70,"props":6038,"children":6039},{"style":83},[6040],{"type":20,"value":6041},"insert",{"type":14,"tag":70,"props":6043,"children":6044},{"style":89},[6045],{"type":20,"value":1031},{"type":14,"tag":70,"props":6047,"children":6048},{"class":72,"line":1998},[6049,6054,6058,6062],{"type":14,"tag":70,"props":6050,"children":6051},{"style":89},[6052],{"type":20,"value":6053},"        name",{"type":14,"tag":70,"props":6055,"children":6056},{"style":77},[6057],{"type":20,"value":1294},{"type":14,"tag":70,"props":6059,"children":6060},{"style":83},[6061],{"type":20,"value":5536},{"type":14,"tag":70,"props":6063,"children":6064},{"style":89},[6065],{"type":20,"value":2853},{"type":14,"tag":70,"props":6067,"children":6068},{"class":72,"line":3828},[6069,6074],{"type":14,"tag":70,"props":6070,"children":6071},{"style":83},[6072],{"type":20,"value":6073},"        VarInfo",{"type":14,"tag":70,"props":6075,"children":6076},{"style":89},[6077],{"type":20,"value":473},{"type":14,"tag":70,"props":6079,"children":6080},{"class":72,"line":3836},[6081],{"type":14,"tag":70,"props":6082,"children":6083},{"style":89},[6084],{"type":20,"value":6085},"            identifier,\n",{"type":14,"tag":70,"props":6087,"children":6088},{"class":72,"line":3852},[6089],{"type":14,"tag":70,"props":6090,"children":6091},{"style":89},[6092],{"type":20,"value":6093},"            var_type,\n",{"type":14,"tag":70,"props":6095,"children":6096},{"class":72,"line":3873},[6097],{"type":14,"tag":70,"props":6098,"children":6099},{"style":89},[6100],{"type":20,"value":6101},"        },\n",{"type":14,"tag":70,"props":6103,"children":6104},{"class":72,"line":3882},[6105],{"type":14,"tag":70,"props":6106,"children":6107},{"style":89},[6108],{"type":20,"value":6109},"    );\n",{"type":14,"tag":70,"props":6111,"children":6112},{"class":72,"line":3903},[6113],{"type":14,"tag":70,"props":6114,"children":6115},{"emptyLinePlaceholder":1210},[6116],{"type":20,"value":1213},{"type":14,"tag":70,"props":6118,"children":6119},{"class":72,"line":3911},[6120,6125,6129,6133,6137,6141,6145,6149],{"type":14,"tag":70,"props":6121,"children":6122},{"style":83},[6123],{"type":20,"value":6124},"    Ok",{"type":14,"tag":70,"props":6126,"children":6127},{"style":89},[6128],{"type":20,"value":291},{"type":14,"tag":70,"props":6130,"children":6131},{"style":83},[6132],{"type":20,"value":1339},{"type":14,"tag":70,"props":6134,"children":6135},{"style":77},[6136],{"type":20,"value":1058},{"type":14,"tag":70,"props":6138,"children":6139},{"style":83},[6140],{"type":20,"value":977},{"type":14,"tag":70,"props":6142,"children":6143},{"style":77},[6144],{"type":20,"value":1058},{"type":14,"tag":70,"props":6146,"children":6147},{"style":83},[6148],{"type":20,"value":2827},{"type":14,"tag":70,"props":6150,"children":6151},{"style":89},[6152],{"type":20,"value":6153},"(identifier, assignment))\n",{"type":14,"tag":70,"props":6155,"children":6156},{"class":72,"line":3919},[6157],{"type":14,"tag":70,"props":6158,"children":6159},{"style":89},[6160],{"type":20,"value":663},{"type":14,"tag":22,"props":6162,"children":6163},{},[6164],{"type":20,"value":6165},"And for assignment we read the metadata and check that the type matches:",{"type":14,"tag":59,"props":6167,"children":6169},{"code":6168,"language":177,"meta":7,"className":178,"style":7},"ast::Statement::Assignment(name, expression) => {\n    let typed_expression = self.resolve_expression(expression)?;\n    let var_info = self\n        .scopes\n        .last()\n        .unwrap()\n        .variables\n        .get(name)\n        .ok_or(TypeError(format!(\"variable {name} not found\")))?;\n\n    let var_type = typed_expression.to_var_type();\n\n    if var_type != var_info.var_type {\n        Err(TypeError(format!(\n            \"expression is of type {var_type:?}, but variable {name} is not.\"\n        )))?;\n    }\n\n    let assignment = match typed_expression {\n        TypedExpression::Int(int_expression) => {\n            ir::AssignmentStatement::Int(int_expression)\n        }\n        TypedExpression::Boolean(boolean_expression) => {\n            ir::AssignmentStatement::Boolean(boolean_expression)\n        }\n    };\n    Ok(ir::Statement::Assignment(var_info.identifier, assignment))\n}\n",[6170],{"type":14,"tag":66,"props":6171,"children":6172},{"__ignoreMap":7},[6173,6208,6247,6268,6280,6296,6311,6323,6340,6392,6399,6430,6437,6467,6495,6503,6519,6526,6533,6556,6583,6610,6617,6644,6671,6678,6685,6730],{"type":14,"tag":70,"props":6174,"children":6175},{"class":72,"line":73},[6176,6180,6184,6188,6192,6196,6200,6204],{"type":14,"tag":70,"props":6177,"children":6178},{"style":83},[6179],{"type":20,"value":1053},{"type":14,"tag":70,"props":6181,"children":6182},{"style":77},[6183],{"type":20,"value":1058},{"type":14,"tag":70,"props":6185,"children":6186},{"style":83},[6187],{"type":20,"value":977},{"type":14,"tag":70,"props":6189,"children":6190},{"style":77},[6191],{"type":20,"value":1058},{"type":14,"tag":70,"props":6193,"children":6194},{"style":83},[6195],{"type":20,"value":2827},{"type":14,"tag":70,"props":6197,"children":6198},{"style":89},[6199],{"type":20,"value":5608},{"type":14,"tag":70,"props":6201,"children":6202},{"style":77},[6203],{"type":20,"value":1161},{"type":14,"tag":70,"props":6205,"children":6206},{"style":89},[6207],{"type":20,"value":473},{"type":14,"tag":70,"props":6209,"children":6210},{"class":72,"line":95},[6211,6215,6219,6223,6227,6231,6235,6239,6243],{"type":14,"tag":70,"props":6212,"children":6213},{"style":77},[6214],{"type":20,"value":208},{"type":14,"tag":70,"props":6216,"children":6217},{"style":89},[6218],{"type":20,"value":5660},{"type":14,"tag":70,"props":6220,"children":6221},{"style":77},[6222],{"type":20,"value":106},{"type":14,"tag":70,"props":6224,"children":6225},{"style":109},[6226],{"type":20,"value":1629},{"type":14,"tag":70,"props":6228,"children":6229},{"style":77},[6230],{"type":20,"value":1294},{"type":14,"tag":70,"props":6232,"children":6233},{"style":83},[6234],{"type":20,"value":5677},{"type":14,"tag":70,"props":6236,"children":6237},{"style":89},[6238],{"type":20,"value":5682},{"type":14,"tag":70,"props":6240,"children":6241},{"style":77},[6242],{"type":20,"value":1268},{"type":14,"tag":70,"props":6244,"children":6245},{"style":89},[6246],{"type":20,"value":227},{"type":14,"tag":70,"props":6248,"children":6249},{"class":72,"line":115},[6250,6254,6259,6263],{"type":14,"tag":70,"props":6251,"children":6252},{"style":77},[6253],{"type":20,"value":208},{"type":14,"tag":70,"props":6255,"children":6256},{"style":89},[6257],{"type":20,"value":6258}," var_info ",{"type":14,"tag":70,"props":6260,"children":6261},{"style":77},[6262],{"type":20,"value":106},{"type":14,"tag":70,"props":6264,"children":6265},{"style":109},[6266],{"type":20,"value":6267}," self\n",{"type":14,"tag":70,"props":6269,"children":6270},{"class":72,"line":129},[6271,6275],{"type":14,"tag":70,"props":6272,"children":6273},{"style":77},[6274],{"type":20,"value":4870},{"type":14,"tag":70,"props":6276,"children":6277},{"style":89},[6278],{"type":20,"value":6279},"scopes\n",{"type":14,"tag":70,"props":6281,"children":6282},{"class":72,"line":147},[6283,6287,6292],{"type":14,"tag":70,"props":6284,"children":6285},{"style":77},[6286],{"type":20,"value":4870},{"type":14,"tag":70,"props":6288,"children":6289},{"style":83},[6290],{"type":20,"value":6291},"last",{"type":14,"tag":70,"props":6293,"children":6294},{"style":89},[6295],{"type":20,"value":4862},{"type":14,"tag":70,"props":6297,"children":6298},{"class":72,"line":161},[6299,6303,6307],{"type":14,"tag":70,"props":6300,"children":6301},{"style":77},[6302],{"type":20,"value":4870},{"type":14,"tag":70,"props":6304,"children":6305},{"style":83},[6306],{"type":20,"value":5514},{"type":14,"tag":70,"props":6308,"children":6309},{"style":89},[6310],{"type":20,"value":4862},{"type":14,"tag":70,"props":6312,"children":6313},{"class":72,"line":310},[6314,6318],{"type":14,"tag":70,"props":6315,"children":6316},{"style":77},[6317],{"type":20,"value":4870},{"type":14,"tag":70,"props":6319,"children":6320},{"style":89},[6321],{"type":20,"value":6322},"variables\n",{"type":14,"tag":70,"props":6324,"children":6325},{"class":72,"line":492},[6326,6330,6335],{"type":14,"tag":70,"props":6327,"children":6328},{"style":77},[6329],{"type":20,"value":4870},{"type":14,"tag":70,"props":6331,"children":6332},{"style":83},[6333],{"type":20,"value":6334},"get",{"type":14,"tag":70,"props":6336,"children":6337},{"style":89},[6338],{"type":20,"value":6339},"(name)\n",{"type":14,"tag":70,"props":6341,"children":6342},{"class":72,"line":501},[6343,6347,6352,6356,6361,6365,6370,6374,6379,6384,6388],{"type":14,"tag":70,"props":6344,"children":6345},{"style":77},[6346],{"type":20,"value":4870},{"type":14,"tag":70,"props":6348,"children":6349},{"style":83},[6350],{"type":20,"value":6351},"ok_or",{"type":14,"tag":70,"props":6353,"children":6354},{"style":89},[6355],{"type":20,"value":291},{"type":14,"tag":70,"props":6357,"children":6358},{"style":83},[6359],{"type":20,"value":6360},"TypeError",{"type":14,"tag":70,"props":6362,"children":6363},{"style":89},[6364],{"type":20,"value":291},{"type":14,"tag":70,"props":6366,"children":6367},{"style":83},[6368],{"type":20,"value":6369},"format!",{"type":14,"tag":70,"props":6371,"children":6372},{"style":89},[6373],{"type":20,"value":291},{"type":14,"tag":70,"props":6375,"children":6376},{"style":294},[6377],{"type":20,"value":6378},"\"variable {name} not found\"",{"type":14,"tag":70,"props":6380,"children":6381},{"style":89},[6382],{"type":20,"value":6383},")))",{"type":14,"tag":70,"props":6385,"children":6386},{"style":77},[6387],{"type":20,"value":1268},{"type":14,"tag":70,"props":6389,"children":6390},{"style":89},[6391],{"type":20,"value":227},{"type":14,"tag":70,"props":6393,"children":6394},{"class":72,"line":522},[6395],{"type":14,"tag":70,"props":6396,"children":6397},{"emptyLinePlaceholder":1210},[6398],{"type":20,"value":1213},{"type":14,"tag":70,"props":6400,"children":6401},{"class":72,"line":1275},[6402,6406,6410,6414,6418,6422,6426],{"type":14,"tag":70,"props":6403,"children":6404},{"style":77},[6405],{"type":20,"value":208},{"type":14,"tag":70,"props":6407,"children":6408},{"style":89},[6409],{"type":20,"value":5709},{"type":14,"tag":70,"props":6411,"children":6412},{"style":77},[6413],{"type":20,"value":106},{"type":14,"tag":70,"props":6415,"children":6416},{"style":89},[6417],{"type":20,"value":5718},{"type":14,"tag":70,"props":6419,"children":6420},{"style":77},[6421],{"type":20,"value":1294},{"type":14,"tag":70,"props":6423,"children":6424},{"style":83},[6425],{"type":20,"value":5727},{"type":14,"tag":70,"props":6427,"children":6428},{"style":89},[6429],{"type":20,"value":1204},{"type":14,"tag":70,"props":6431,"children":6432},{"class":72,"line":1283},[6433],{"type":14,"tag":70,"props":6434,"children":6435},{"emptyLinePlaceholder":1210},[6436],{"type":20,"value":1213},{"type":14,"tag":70,"props":6438,"children":6439},{"class":72,"line":1307},[6440,6444,6448,6453,6458,6462],{"type":14,"tag":70,"props":6441,"children":6442},{"style":77},[6443],{"type":20,"value":121},{"type":14,"tag":70,"props":6445,"children":6446},{"style":89},[6447],{"type":20,"value":5709},{"type":14,"tag":70,"props":6449,"children":6450},{"style":77},[6451],{"type":20,"value":6452},"!=",{"type":14,"tag":70,"props":6454,"children":6455},{"style":89},[6456],{"type":20,"value":6457}," var_info",{"type":14,"tag":70,"props":6459,"children":6460},{"style":77},[6461],{"type":20,"value":1294},{"type":14,"tag":70,"props":6463,"children":6464},{"style":89},[6465],{"type":20,"value":6466},"var_type {\n",{"type":14,"tag":70,"props":6468,"children":6469},{"class":72,"line":1316},[6470,6475,6479,6483,6487,6491],{"type":14,"tag":70,"props":6471,"children":6472},{"style":83},[6473],{"type":20,"value":6474},"        Err",{"type":14,"tag":70,"props":6476,"children":6477},{"style":89},[6478],{"type":20,"value":291},{"type":14,"tag":70,"props":6480,"children":6481},{"style":83},[6482],{"type":20,"value":6360},{"type":14,"tag":70,"props":6484,"children":6485},{"style":89},[6486],{"type":20,"value":291},{"type":14,"tag":70,"props":6488,"children":6489},{"style":83},[6490],{"type":20,"value":6369},{"type":14,"tag":70,"props":6492,"children":6493},{"style":89},[6494],{"type":20,"value":1031},{"type":14,"tag":70,"props":6496,"children":6497},{"class":72,"line":1324},[6498],{"type":14,"tag":70,"props":6499,"children":6500},{"style":294},[6501],{"type":20,"value":6502},"            \"expression is of type {var_type:?}, but variable {name} is not.\"\n",{"type":14,"tag":70,"props":6504,"children":6505},{"class":72,"line":1363},[6506,6511,6515],{"type":14,"tag":70,"props":6507,"children":6508},{"style":89},[6509],{"type":20,"value":6510},"        )))",{"type":14,"tag":70,"props":6512,"children":6513},{"style":77},[6514],{"type":20,"value":1268},{"type":14,"tag":70,"props":6516,"children":6517},{"style":89},[6518],{"type":20,"value":227},{"type":14,"tag":70,"props":6520,"children":6521},{"class":72,"line":1403},[6522],{"type":14,"tag":70,"props":6523,"children":6524},{"style":89},[6525],{"type":20,"value":498},{"type":14,"tag":70,"props":6527,"children":6528},{"class":72,"line":1421},[6529],{"type":14,"tag":70,"props":6530,"children":6531},{"emptyLinePlaceholder":1210},[6532],{"type":20,"value":1213},{"type":14,"tag":70,"props":6534,"children":6535},{"class":72,"line":1430},[6536,6540,6544,6548,6552],{"type":14,"tag":70,"props":6537,"children":6538},{"style":77},[6539],{"type":20,"value":208},{"type":14,"tag":70,"props":6541,"children":6542},{"style":89},[6543],{"type":20,"value":5826},{"type":14,"tag":70,"props":6545,"children":6546},{"style":77},[6547],{"type":20,"value":106},{"type":14,"tag":70,"props":6549,"children":6550},{"style":77},[6551],{"type":20,"value":5835},{"type":14,"tag":70,"props":6553,"children":6554},{"style":89},[6555],{"type":20,"value":5840},{"type":14,"tag":70,"props":6557,"children":6558},{"class":72,"line":1439},[6559,6563,6567,6571,6575,6579],{"type":14,"tag":70,"props":6560,"children":6561},{"style":83},[6562],{"type":20,"value":5848},{"type":14,"tag":70,"props":6564,"children":6565},{"style":77},[6566],{"type":20,"value":1058},{"type":14,"tag":70,"props":6568,"children":6569},{"style":83},[6570],{"type":20,"value":4415},{"type":14,"tag":70,"props":6572,"children":6573},{"style":89},[6574],{"type":20,"value":5861},{"type":14,"tag":70,"props":6576,"children":6577},{"style":77},[6578],{"type":20,"value":1161},{"type":14,"tag":70,"props":6580,"children":6581},{"style":89},[6582],{"type":20,"value":473},{"type":14,"tag":70,"props":6584,"children":6585},{"class":72,"line":1447},[6586,6590,6594,6598,6602,6606],{"type":14,"tag":70,"props":6587,"children":6588},{"style":83},[6589],{"type":20,"value":5877},{"type":14,"tag":70,"props":6591,"children":6592},{"style":77},[6593],{"type":20,"value":1058},{"type":14,"tag":70,"props":6595,"children":6596},{"style":83},[6597],{"type":20,"value":3726},{"type":14,"tag":70,"props":6599,"children":6600},{"style":77},[6601],{"type":20,"value":1058},{"type":14,"tag":70,"props":6603,"children":6604},{"style":83},[6605],{"type":20,"value":4415},{"type":14,"tag":70,"props":6607,"children":6608},{"style":89},[6609],{"type":20,"value":5898},{"type":14,"tag":70,"props":6611,"children":6612},{"class":72,"line":1998},[6613],{"type":14,"tag":70,"props":6614,"children":6615},{"style":89},[6616],{"type":20,"value":1436},{"type":14,"tag":70,"props":6618,"children":6619},{"class":72,"line":3828},[6620,6624,6628,6632,6636,6640],{"type":14,"tag":70,"props":6621,"children":6622},{"style":83},[6623],{"type":20,"value":5848},{"type":14,"tag":70,"props":6625,"children":6626},{"style":77},[6627],{"type":20,"value":1058},{"type":14,"tag":70,"props":6629,"children":6630},{"style":83},[6631],{"type":20,"value":3183},{"type":14,"tag":70,"props":6633,"children":6634},{"style":89},[6635],{"type":20,"value":5925},{"type":14,"tag":70,"props":6637,"children":6638},{"style":77},[6639],{"type":20,"value":1161},{"type":14,"tag":70,"props":6641,"children":6642},{"style":89},[6643],{"type":20,"value":473},{"type":14,"tag":70,"props":6645,"children":6646},{"class":72,"line":3836},[6647,6651,6655,6659,6663,6667],{"type":14,"tag":70,"props":6648,"children":6649},{"style":83},[6650],{"type":20,"value":5877},{"type":14,"tag":70,"props":6652,"children":6653},{"style":77},[6654],{"type":20,"value":1058},{"type":14,"tag":70,"props":6656,"children":6657},{"style":83},[6658],{"type":20,"value":3726},{"type":14,"tag":70,"props":6660,"children":6661},{"style":77},[6662],{"type":20,"value":1058},{"type":14,"tag":70,"props":6664,"children":6665},{"style":83},[6666],{"type":20,"value":3183},{"type":14,"tag":70,"props":6668,"children":6669},{"style":89},[6670],{"type":20,"value":5961},{"type":14,"tag":70,"props":6672,"children":6673},{"class":72,"line":3852},[6674],{"type":14,"tag":70,"props":6675,"children":6676},{"style":89},[6677],{"type":20,"value":1436},{"type":14,"tag":70,"props":6679,"children":6680},{"class":72,"line":3873},[6681],{"type":14,"tag":70,"props":6682,"children":6683},{"style":89},[6684],{"type":20,"value":5976},{"type":14,"tag":70,"props":6686,"children":6687},{"class":72,"line":3882},[6688,6692,6696,6700,6704,6708,6712,6716,6721,6725],{"type":14,"tag":70,"props":6689,"children":6690},{"style":83},[6691],{"type":20,"value":6124},{"type":14,"tag":70,"props":6693,"children":6694},{"style":89},[6695],{"type":20,"value":291},{"type":14,"tag":70,"props":6697,"children":6698},{"style":83},[6699],{"type":20,"value":1339},{"type":14,"tag":70,"props":6701,"children":6702},{"style":77},[6703],{"type":20,"value":1058},{"type":14,"tag":70,"props":6705,"children":6706},{"style":83},[6707],{"type":20,"value":977},{"type":14,"tag":70,"props":6709,"children":6710},{"style":77},[6711],{"type":20,"value":1058},{"type":14,"tag":70,"props":6713,"children":6714},{"style":83},[6715],{"type":20,"value":2827},{"type":14,"tag":70,"props":6717,"children":6718},{"style":89},[6719],{"type":20,"value":6720},"(var_info",{"type":14,"tag":70,"props":6722,"children":6723},{"style":77},[6724],{"type":20,"value":1294},{"type":14,"tag":70,"props":6726,"children":6727},{"style":89},[6728],{"type":20,"value":6729},"identifier, assignment))\n",{"type":14,"tag":70,"props":6731,"children":6732},{"class":72,"line":3903},[6733],{"type":14,"tag":70,"props":6734,"children":6735},{"style":89},[6736],{"type":20,"value":663},{"type":14,"tag":22,"props":6738,"children":6739},{},[6740],{"type":20,"value":6741},"And then analyzing the variable expression is similar:",{"type":14,"tag":59,"props":6743,"children":6745},{"code":6744,"language":177,"meta":7,"className":178,"style":7},"ast::Literal::Variable(name) => {\n    let var_info = self\n        .scopes\n        .last()\n        .unwrap()\n        .variables\n        .get(name)\n        .ok_or(TypeError(format!(\"variable {name} not found\")))?;\n\n    Ok(match var_info.var_type {\n        ir::VarType::Int => {\n            TypedExpression::Int(ir::IntExpression::Var(var_info.identifier))\n        }\n        ir::VarType::Boolean => {\n            TypedExpression::Boolean(ir::BooleanExpression::Var(var_info.identifier))\n        }\n    })\n}\n",[6746],{"type":14,"tag":66,"props":6747,"children":6748},{"__ignoreMap":7},[6749,6784,6803,6814,6829,6844,6855,6870,6917,6924,6951,6982,7035,7042,7073,7124,7131,7139],{"type":14,"tag":70,"props":6750,"children":6751},{"class":72,"line":73},[6752,6756,6760,6764,6768,6772,6776,6780],{"type":14,"tag":70,"props":6753,"children":6754},{"style":83},[6755],{"type":20,"value":1053},{"type":14,"tag":70,"props":6757,"children":6758},{"style":77},[6759],{"type":20,"value":1058},{"type":14,"tag":70,"props":6761,"children":6762},{"style":83},[6763],{"type":20,"value":2410},{"type":14,"tag":70,"props":6765,"children":6766},{"style":77},[6767],{"type":20,"value":1058},{"type":14,"tag":70,"props":6769,"children":6770},{"style":83},[6771],{"type":20,"value":3309},{"type":14,"tag":70,"props":6773,"children":6774},{"style":89},[6775],{"type":20,"value":2572},{"type":14,"tag":70,"props":6777,"children":6778},{"style":77},[6779],{"type":20,"value":1161},{"type":14,"tag":70,"props":6781,"children":6782},{"style":89},[6783],{"type":20,"value":473},{"type":14,"tag":70,"props":6785,"children":6786},{"class":72,"line":95},[6787,6791,6795,6799],{"type":14,"tag":70,"props":6788,"children":6789},{"style":77},[6790],{"type":20,"value":208},{"type":14,"tag":70,"props":6792,"children":6793},{"style":89},[6794],{"type":20,"value":6258},{"type":14,"tag":70,"props":6796,"children":6797},{"style":77},[6798],{"type":20,"value":106},{"type":14,"tag":70,"props":6800,"children":6801},{"style":109},[6802],{"type":20,"value":6267},{"type":14,"tag":70,"props":6804,"children":6805},{"class":72,"line":115},[6806,6810],{"type":14,"tag":70,"props":6807,"children":6808},{"style":77},[6809],{"type":20,"value":4870},{"type":14,"tag":70,"props":6811,"children":6812},{"style":89},[6813],{"type":20,"value":6279},{"type":14,"tag":70,"props":6815,"children":6816},{"class":72,"line":129},[6817,6821,6825],{"type":14,"tag":70,"props":6818,"children":6819},{"style":77},[6820],{"type":20,"value":4870},{"type":14,"tag":70,"props":6822,"children":6823},{"style":83},[6824],{"type":20,"value":6291},{"type":14,"tag":70,"props":6826,"children":6827},{"style":89},[6828],{"type":20,"value":4862},{"type":14,"tag":70,"props":6830,"children":6831},{"class":72,"line":147},[6832,6836,6840],{"type":14,"tag":70,"props":6833,"children":6834},{"style":77},[6835],{"type":20,"value":4870},{"type":14,"tag":70,"props":6837,"children":6838},{"style":83},[6839],{"type":20,"value":5514},{"type":14,"tag":70,"props":6841,"children":6842},{"style":89},[6843],{"type":20,"value":4862},{"type":14,"tag":70,"props":6845,"children":6846},{"class":72,"line":161},[6847,6851],{"type":14,"tag":70,"props":6848,"children":6849},{"style":77},[6850],{"type":20,"value":4870},{"type":14,"tag":70,"props":6852,"children":6853},{"style":89},[6854],{"type":20,"value":6322},{"type":14,"tag":70,"props":6856,"children":6857},{"class":72,"line":310},[6858,6862,6866],{"type":14,"tag":70,"props":6859,"children":6860},{"style":77},[6861],{"type":20,"value":4870},{"type":14,"tag":70,"props":6863,"children":6864},{"style":83},[6865],{"type":20,"value":6334},{"type":14,"tag":70,"props":6867,"children":6868},{"style":89},[6869],{"type":20,"value":6339},{"type":14,"tag":70,"props":6871,"children":6872},{"class":72,"line":492},[6873,6877,6881,6885,6889,6893,6897,6901,6905,6909,6913],{"type":14,"tag":70,"props":6874,"children":6875},{"style":77},[6876],{"type":20,"value":4870},{"type":14,"tag":70,"props":6878,"children":6879},{"style":83},[6880],{"type":20,"value":6351},{"type":14,"tag":70,"props":6882,"children":6883},{"style":89},[6884],{"type":20,"value":291},{"type":14,"tag":70,"props":6886,"children":6887},{"style":83},[6888],{"type":20,"value":6360},{"type":14,"tag":70,"props":6890,"children":6891},{"style":89},[6892],{"type":20,"value":291},{"type":14,"tag":70,"props":6894,"children":6895},{"style":83},[6896],{"type":20,"value":6369},{"type":14,"tag":70,"props":6898,"children":6899},{"style":89},[6900],{"type":20,"value":291},{"type":14,"tag":70,"props":6902,"children":6903},{"style":294},[6904],{"type":20,"value":6378},{"type":14,"tag":70,"props":6906,"children":6907},{"style":89},[6908],{"type":20,"value":6383},{"type":14,"tag":70,"props":6910,"children":6911},{"style":77},[6912],{"type":20,"value":1268},{"type":14,"tag":70,"props":6914,"children":6915},{"style":89},[6916],{"type":20,"value":227},{"type":14,"tag":70,"props":6918,"children":6919},{"class":72,"line":501},[6920],{"type":14,"tag":70,"props":6921,"children":6922},{"emptyLinePlaceholder":1210},[6923],{"type":20,"value":1213},{"type":14,"tag":70,"props":6925,"children":6926},{"class":72,"line":522},[6927,6931,6935,6939,6943,6947],{"type":14,"tag":70,"props":6928,"children":6929},{"style":83},[6930],{"type":20,"value":6124},{"type":14,"tag":70,"props":6932,"children":6933},{"style":89},[6934],{"type":20,"value":291},{"type":14,"tag":70,"props":6936,"children":6937},{"style":77},[6938],{"type":20,"value":2727},{"type":14,"tag":70,"props":6940,"children":6941},{"style":89},[6942],{"type":20,"value":6457},{"type":14,"tag":70,"props":6944,"children":6945},{"style":77},[6946],{"type":20,"value":1294},{"type":14,"tag":70,"props":6948,"children":6949},{"style":89},[6950],{"type":20,"value":6466},{"type":14,"tag":70,"props":6952,"children":6953},{"class":72,"line":1275},[6954,6958,6962,6966,6970,6974,6978],{"type":14,"tag":70,"props":6955,"children":6956},{"style":83},[6957],{"type":20,"value":1547},{"type":14,"tag":70,"props":6959,"children":6960},{"style":77},[6961],{"type":20,"value":1058},{"type":14,"tag":70,"props":6963,"children":6964},{"style":83},[6965],{"type":20,"value":4102},{"type":14,"tag":70,"props":6967,"children":6968},{"style":77},[6969],{"type":20,"value":1058},{"type":14,"tag":70,"props":6971,"children":6972},{"style":83},[6973],{"type":20,"value":4415},{"type":14,"tag":70,"props":6975,"children":6976},{"style":77},[6977],{"type":20,"value":2483},{"type":14,"tag":70,"props":6979,"children":6980},{"style":89},[6981],{"type":20,"value":473},{"type":14,"tag":70,"props":6983,"children":6984},{"class":72,"line":1283},[6985,6989,6993,6997,7001,7005,7009,7013,7017,7022,7026,7030],{"type":14,"tag":70,"props":6986,"children":6987},{"style":83},[6988],{"type":20,"value":4406},{"type":14,"tag":70,"props":6990,"children":6991},{"style":77},[6992],{"type":20,"value":1058},{"type":14,"tag":70,"props":6994,"children":6995},{"style":83},[6996],{"type":20,"value":4415},{"type":14,"tag":70,"props":6998,"children":6999},{"style":89},[7000],{"type":20,"value":291},{"type":14,"tag":70,"props":7002,"children":7003},{"style":83},[7004],{"type":20,"value":1339},{"type":14,"tag":70,"props":7006,"children":7007},{"style":77},[7008],{"type":20,"value":1058},{"type":14,"tag":70,"props":7010,"children":7011},{"style":83},[7012],{"type":20,"value":3795},{"type":14,"tag":70,"props":7014,"children":7015},{"style":77},[7016],{"type":20,"value":1058},{"type":14,"tag":70,"props":7018,"children":7019},{"style":83},[7020],{"type":20,"value":7021},"Var",{"type":14,"tag":70,"props":7023,"children":7024},{"style":89},[7025],{"type":20,"value":6720},{"type":14,"tag":70,"props":7027,"children":7028},{"style":77},[7029],{"type":20,"value":1294},{"type":14,"tag":70,"props":7031,"children":7032},{"style":89},[7033],{"type":20,"value":7034},"identifier))\n",{"type":14,"tag":70,"props":7036,"children":7037},{"class":72,"line":1307},[7038],{"type":14,"tag":70,"props":7039,"children":7040},{"style":89},[7041],{"type":20,"value":1436},{"type":14,"tag":70,"props":7043,"children":7044},{"class":72,"line":1316},[7045,7049,7053,7057,7061,7065,7069],{"type":14,"tag":70,"props":7046,"children":7047},{"style":83},[7048],{"type":20,"value":1547},{"type":14,"tag":70,"props":7050,"children":7051},{"style":77},[7052],{"type":20,"value":1058},{"type":14,"tag":70,"props":7054,"children":7055},{"style":83},[7056],{"type":20,"value":4102},{"type":14,"tag":70,"props":7058,"children":7059},{"style":77},[7060],{"type":20,"value":1058},{"type":14,"tag":70,"props":7062,"children":7063},{"style":83},[7064],{"type":20,"value":3183},{"type":14,"tag":70,"props":7066,"children":7067},{"style":77},[7068],{"type":20,"value":2483},{"type":14,"tag":70,"props":7070,"children":7071},{"style":89},[7072],{"type":20,"value":473},{"type":14,"tag":70,"props":7074,"children":7075},{"class":72,"line":1324},[7076,7080,7084,7088,7092,7096,7100,7104,7108,7112,7116,7120],{"type":14,"tag":70,"props":7077,"children":7078},{"style":83},[7079],{"type":20,"value":4406},{"type":14,"tag":70,"props":7081,"children":7082},{"style":77},[7083],{"type":20,"value":1058},{"type":14,"tag":70,"props":7085,"children":7086},{"style":83},[7087],{"type":20,"value":3183},{"type":14,"tag":70,"props":7089,"children":7090},{"style":89},[7091],{"type":20,"value":291},{"type":14,"tag":70,"props":7093,"children":7094},{"style":83},[7095],{"type":20,"value":1339},{"type":14,"tag":70,"props":7097,"children":7098},{"style":77},[7099],{"type":20,"value":1058},{"type":14,"tag":70,"props":7101,"children":7102},{"style":83},[7103],{"type":20,"value":3681},{"type":14,"tag":70,"props":7105,"children":7106},{"style":77},[7107],{"type":20,"value":1058},{"type":14,"tag":70,"props":7109,"children":7110},{"style":83},[7111],{"type":20,"value":7021},{"type":14,"tag":70,"props":7113,"children":7114},{"style":89},[7115],{"type":20,"value":6720},{"type":14,"tag":70,"props":7117,"children":7118},{"style":77},[7119],{"type":20,"value":1294},{"type":14,"tag":70,"props":7121,"children":7122},{"style":89},[7123],{"type":20,"value":7034},{"type":14,"tag":70,"props":7125,"children":7126},{"class":72,"line":1363},[7127],{"type":14,"tag":70,"props":7128,"children":7129},{"style":89},[7130],{"type":20,"value":1436},{"type":14,"tag":70,"props":7132,"children":7133},{"class":72,"line":1403},[7134],{"type":14,"tag":70,"props":7135,"children":7136},{"style":89},[7137],{"type":20,"value":7138},"    })\n",{"type":14,"tag":70,"props":7140,"children":7141},{"class":72,"line":1421},[7142],{"type":14,"tag":70,"props":7143,"children":7144},{"style":89},[7145],{"type":20,"value":663},{"type":14,"tag":40,"props":7147,"children":7149},{"id":7148},"code-gen",[7150],{"type":20,"value":7151},"Code gen",{"type":14,"tag":22,"props":7153,"children":7154},{},[7155],{"type":20,"value":7156},"We also need to add some metadata to our code generator, as we need to store references to the pointer values:",{"type":14,"tag":59,"props":7158,"children":7160},{"code":7159,"language":177,"meta":7,"className":178,"style":7},"// code_gen.rs\npub struct CodeGen\u003C'ctx> {\n    // ...\n    local_vars: HashMap\u003Cir::VariableIdentifier, inkwell::values::PointerValue\u003C'ctx>>,\n}\n\nimpl\u003C'ctx> CodeGen\u003C'ctx> {\n    pub fn new(context: &'ctx Context) -> Self {\n        // ...\n\n        Self {\n            context: &context,\n            module,\n            builder,\n            fpm,\n            local_vars: HashMap::new(),\n        }\n    }\n}\n",[7161],{"type":14,"tag":66,"props":7162,"children":7163},{"__ignoreMap":7},[7164,7171,7201,7208,7271,7278,7285,7322,7380,7388,7395,7406,7427,7435,7443,7451,7479,7486,7493],{"type":14,"tag":70,"props":7165,"children":7166},{"class":72,"line":73},[7167],{"type":14,"tag":70,"props":7168,"children":7169},{"style":165},[7170],{"type":20,"value":1472},{"type":14,"tag":70,"props":7172,"children":7173},{"class":72,"line":95},[7174,7178,7182,7187,7192,7197],{"type":14,"tag":70,"props":7175,"children":7176},{"style":77},[7177],{"type":20,"value":916},{"type":14,"tag":70,"props":7179,"children":7180},{"style":77},[7181],{"type":20,"value":3582},{"type":14,"tag":70,"props":7183,"children":7184},{"style":83},[7185],{"type":20,"value":7186}," CodeGen",{"type":14,"tag":70,"props":7188,"children":7189},{"style":89},[7190],{"type":20,"value":7191},"\u003C'",{"type":14,"tag":70,"props":7193,"children":7194},{"style":83},[7195],{"type":20,"value":7196},"ctx",{"type":14,"tag":70,"props":7198,"children":7199},{"style":89},[7200],{"type":20,"value":1113},{"type":14,"tag":70,"props":7202,"children":7203},{"class":72,"line":115},[7204],{"type":14,"tag":70,"props":7205,"children":7206},{"style":165},[7207],{"type":20,"value":3879},{"type":14,"tag":70,"props":7209,"children":7210},{"class":72,"line":129},[7211,7216,7220,7224,7228,7232,7236,7241,7245,7250,7254,7259,7263,7267],{"type":14,"tag":70,"props":7212,"children":7213},{"style":89},[7214],{"type":20,"value":7215},"    local_vars",{"type":14,"tag":70,"props":7217,"children":7218},{"style":77},[7219],{"type":20,"value":948},{"type":14,"tag":70,"props":7221,"children":7222},{"style":83},[7223],{"type":20,"value":4193},{"type":14,"tag":70,"props":7225,"children":7226},{"style":89},[7227],{"type":20,"value":1100},{"type":14,"tag":70,"props":7229,"children":7230},{"style":77},[7231],{"type":20,"value":1058},{"type":14,"tag":70,"props":7233,"children":7234},{"style":83},[7235],{"type":20,"value":3717},{"type":14,"tag":70,"props":7237,"children":7238},{"style":89},[7239],{"type":20,"value":7240},", inkwell",{"type":14,"tag":70,"props":7242,"children":7243},{"style":77},[7244],{"type":20,"value":1058},{"type":14,"tag":70,"props":7246,"children":7247},{"style":89},[7248],{"type":20,"value":7249},"values",{"type":14,"tag":70,"props":7251,"children":7252},{"style":77},[7253],{"type":20,"value":1058},{"type":14,"tag":70,"props":7255,"children":7256},{"style":83},[7257],{"type":20,"value":7258},"PointerValue",{"type":14,"tag":70,"props":7260,"children":7261},{"style":89},[7262],{"type":20,"value":7191},{"type":14,"tag":70,"props":7264,"children":7265},{"style":83},[7266],{"type":20,"value":7196},{"type":14,"tag":70,"props":7268,"children":7269},{"style":89},[7270],{"type":20,"value":4176},{"type":14,"tag":70,"props":7272,"children":7273},{"class":72,"line":147},[7274],{"type":14,"tag":70,"props":7275,"children":7276},{"style":89},[7277],{"type":20,"value":663},{"type":14,"tag":70,"props":7279,"children":7280},{"class":72,"line":161},[7281],{"type":14,"tag":70,"props":7282,"children":7283},{"emptyLinePlaceholder":1210},[7284],{"type":20,"value":1213},{"type":14,"tag":70,"props":7286,"children":7287},{"class":72,"line":310},[7288,7292,7296,7300,7305,7310,7314,7318],{"type":14,"tag":70,"props":7289,"children":7290},{"style":77},[7291],{"type":20,"value":4319},{"type":14,"tag":70,"props":7293,"children":7294},{"style":89},[7295],{"type":20,"value":7191},{"type":14,"tag":70,"props":7297,"children":7298},{"style":83},[7299],{"type":20,"value":7196},{"type":14,"tag":70,"props":7301,"children":7302},{"style":89},[7303],{"type":20,"value":7304},"> ",{"type":14,"tag":70,"props":7306,"children":7307},{"style":83},[7308],{"type":20,"value":7309},"CodeGen",{"type":14,"tag":70,"props":7311,"children":7312},{"style":89},[7313],{"type":20,"value":7191},{"type":14,"tag":70,"props":7315,"children":7316},{"style":83},[7317],{"type":20,"value":7196},{"type":14,"tag":70,"props":7319,"children":7320},{"style":89},[7321],{"type":20,"value":1113},{"type":14,"tag":70,"props":7323,"children":7324},{"class":72,"line":492},[7325,7329,7333,7337,7342,7346,7350,7355,7359,7364,7368,7372,7376],{"type":14,"tag":70,"props":7326,"children":7327},{"style":77},[7328],{"type":20,"value":4669},{"type":14,"tag":70,"props":7330,"children":7331},{"style":77},[7332],{"type":20,"value":1021},{"type":14,"tag":70,"props":7334,"children":7335},{"style":83},[7336],{"type":20,"value":4678},{"type":14,"tag":70,"props":7338,"children":7339},{"style":89},[7340],{"type":20,"value":7341},"(context",{"type":14,"tag":70,"props":7343,"children":7344},{"style":77},[7345],{"type":20,"value":948},{"type":14,"tag":70,"props":7347,"children":7348},{"style":77},[7349],{"type":20,"value":1048},{"type":14,"tag":70,"props":7351,"children":7352},{"style":89},[7353],{"type":20,"value":7354},"'",{"type":14,"tag":70,"props":7356,"children":7357},{"style":83},[7358],{"type":20,"value":7196},{"type":14,"tag":70,"props":7360,"children":7361},{"style":83},[7362],{"type":20,"value":7363}," Context",{"type":14,"tag":70,"props":7365,"children":7366},{"style":89},[7367],{"type":20,"value":1076},{"type":14,"tag":70,"props":7369,"children":7370},{"style":77},[7371],{"type":20,"value":1081},{"type":14,"tag":70,"props":7373,"children":7374},{"style":109},[7375],{"type":20,"value":4692},{"type":14,"tag":70,"props":7377,"children":7378},{"style":89},[7379],{"type":20,"value":473},{"type":14,"tag":70,"props":7381,"children":7382},{"class":72,"line":501},[7383],{"type":14,"tag":70,"props":7384,"children":7385},{"style":165},[7386],{"type":20,"value":7387},"        // ...\n",{"type":14,"tag":70,"props":7389,"children":7390},{"class":72,"line":522},[7391],{"type":14,"tag":70,"props":7392,"children":7393},{"emptyLinePlaceholder":1210},[7394],{"type":20,"value":1213},{"type":14,"tag":70,"props":7396,"children":7397},{"class":72,"line":1275},[7398,7402],{"type":14,"tag":70,"props":7399,"children":7400},{"style":109},[7401],{"type":20,"value":4704},{"type":14,"tag":70,"props":7403,"children":7404},{"style":89},[7405],{"type":20,"value":473},{"type":14,"tag":70,"props":7407,"children":7408},{"class":72,"line":1283},[7409,7414,7418,7422],{"type":14,"tag":70,"props":7410,"children":7411},{"style":89},[7412],{"type":20,"value":7413},"            context",{"type":14,"tag":70,"props":7415,"children":7416},{"style":77},[7417],{"type":20,"value":948},{"type":14,"tag":70,"props":7419,"children":7420},{"style":77},[7421],{"type":20,"value":1048},{"type":14,"tag":70,"props":7423,"children":7424},{"style":89},[7425],{"type":20,"value":7426},"context,\n",{"type":14,"tag":70,"props":7428,"children":7429},{"class":72,"line":1307},[7430],{"type":14,"tag":70,"props":7431,"children":7432},{"style":89},[7433],{"type":20,"value":7434},"            module,\n",{"type":14,"tag":70,"props":7436,"children":7437},{"class":72,"line":1316},[7438],{"type":14,"tag":70,"props":7439,"children":7440},{"style":89},[7441],{"type":20,"value":7442},"            builder,\n",{"type":14,"tag":70,"props":7444,"children":7445},{"class":72,"line":1324},[7446],{"type":14,"tag":70,"props":7447,"children":7448},{"style":89},[7449],{"type":20,"value":7450},"            fpm,\n",{"type":14,"tag":70,"props":7452,"children":7453},{"class":72,"line":1363},[7454,7459,7463,7467,7471,7475],{"type":14,"tag":70,"props":7455,"children":7456},{"style":89},[7457],{"type":20,"value":7458},"            local_vars",{"type":14,"tag":70,"props":7460,"children":7461},{"style":77},[7462],{"type":20,"value":948},{"type":14,"tag":70,"props":7464,"children":7465},{"style":83},[7466],{"type":20,"value":4193},{"type":14,"tag":70,"props":7468,"children":7469},{"style":77},[7470],{"type":20,"value":1058},{"type":14,"tag":70,"props":7472,"children":7473},{"style":83},[7474],{"type":20,"value":1199},{"type":14,"tag":70,"props":7476,"children":7477},{"style":89},[7478],{"type":20,"value":2853},{"type":14,"tag":70,"props":7480,"children":7481},{"class":72,"line":1403},[7482],{"type":14,"tag":70,"props":7483,"children":7484},{"style":89},[7485],{"type":20,"value":1436},{"type":14,"tag":70,"props":7487,"children":7488},{"class":72,"line":1421},[7489],{"type":14,"tag":70,"props":7490,"children":7491},{"style":89},[7492],{"type":20,"value":498},{"type":14,"tag":70,"props":7494,"children":7495},{"class":72,"line":1430},[7496],{"type":14,"tag":70,"props":7497,"children":7498},{"style":89},[7499],{"type":20,"value":663},{"type":14,"tag":22,"props":7501,"children":7502},{},[7503,7505,7511],{"type":20,"value":7504},"One error I noticed because of the changes we are about to make is that every return value we have (at least those returning inkwell structs) should have ",{"type":14,"tag":66,"props":7506,"children":7508},{"className":7507},[],[7509],{"type":20,"value":7510},"\u003C'ctx>",{"type":20,"value":7512}," to avoid some lifetime issues.",{"type":14,"tag":59,"props":7514,"children":7516},{"code":7515,"language":177,"meta":7,"className":178,"style":7},"ir::ToplevelStatement::Function {\n    name,\n    body: statements,\n    locals,\n} => {\n\n    // ...\n    self.builder.position_at_end(entry_block);\n\n    self.local_vars.clear();\n    for (identifier, var_type) in locals {\n        match var_type {\n            ir::VarType::Int => {\n                let int_type = self.int_type();\n                let var = self\n                    .builder\n                    .build_alloca(int_type, &format!(\"var_{}\", identifier.0));\n                self.local_vars.insert(*identifier, var);\n            }\n            ir::VarType::Boolean => {\n                let bool_type = self.context.bool_type();\n                let var = self\n                    .builder\n                    .build_alloca(bool_type, &format!(\"var_{}\", identifier.0));\n                self.local_vars.insert(*identifier, var);\n            }\n        }\n    }\n    // ...\n}\n",[7517],{"type":14,"tag":66,"props":7518,"children":7519},{"__ignoreMap":7},[7520,7547,7555,7571,7579,7594,7601,7608,7635,7642,7671,7693,7705,7736,7769,7789,7801,7853,7890,7897,7928,7969,7988,7999,8047,8082,8089,8096,8103,8110],{"type":14,"tag":70,"props":7521,"children":7522},{"class":72,"line":73},[7523,7527,7531,7535,7539,7543],{"type":14,"tag":70,"props":7524,"children":7525},{"style":83},[7526],{"type":20,"value":1339},{"type":14,"tag":70,"props":7528,"children":7529},{"style":77},[7530],{"type":20,"value":1058},{"type":14,"tag":70,"props":7532,"children":7533},{"style":83},[7534],{"type":20,"value":1063},{"type":14,"tag":70,"props":7536,"children":7537},{"style":77},[7538],{"type":20,"value":1058},{"type":14,"tag":70,"props":7540,"children":7541},{"style":83},[7542],{"type":20,"value":1356},{"type":14,"tag":70,"props":7544,"children":7545},{"style":89},[7546],{"type":20,"value":473},{"type":14,"tag":70,"props":7548,"children":7549},{"class":72,"line":95},[7550],{"type":14,"tag":70,"props":7551,"children":7552},{"style":89},[7553],{"type":20,"value":7554},"    name,\n",{"type":14,"tag":70,"props":7556,"children":7557},{"class":72,"line":115},[7558,7563,7567],{"type":14,"tag":70,"props":7559,"children":7560},{"style":89},[7561],{"type":20,"value":7562},"    body",{"type":14,"tag":70,"props":7564,"children":7565},{"style":77},[7566],{"type":20,"value":948},{"type":14,"tag":70,"props":7568,"children":7569},{"style":89},[7570],{"type":20,"value":1592},{"type":14,"tag":70,"props":7572,"children":7573},{"class":72,"line":129},[7574],{"type":14,"tag":70,"props":7575,"children":7576},{"style":89},[7577],{"type":20,"value":7578},"    locals,\n",{"type":14,"tag":70,"props":7580,"children":7581},{"class":72,"line":147},[7582,7586,7590],{"type":14,"tag":70,"props":7583,"children":7584},{"style":89},[7585],{"type":20,"value":617},{"type":14,"tag":70,"props":7587,"children":7588},{"style":77},[7589],{"type":20,"value":1161},{"type":14,"tag":70,"props":7591,"children":7592},{"style":89},[7593],{"type":20,"value":473},{"type":14,"tag":70,"props":7595,"children":7596},{"class":72,"line":161},[7597],{"type":14,"tag":70,"props":7598,"children":7599},{"emptyLinePlaceholder":1210},[7600],{"type":20,"value":1213},{"type":14,"tag":70,"props":7602,"children":7603},{"class":72,"line":310},[7604],{"type":14,"tag":70,"props":7605,"children":7606},{"style":165},[7607],{"type":20,"value":3879},{"type":14,"tag":70,"props":7609,"children":7610},{"class":72,"line":492},[7611,7615,7619,7623,7627,7631],{"type":14,"tag":70,"props":7612,"children":7613},{"style":109},[7614],{"type":20,"value":5739},{"type":14,"tag":70,"props":7616,"children":7617},{"style":77},[7618],{"type":20,"value":1294},{"type":14,"tag":70,"props":7620,"children":7621},{"style":89},[7622],{"type":20,"value":1823},{"type":14,"tag":70,"props":7624,"children":7625},{"style":77},[7626],{"type":20,"value":1294},{"type":14,"tag":70,"props":7628,"children":7629},{"style":83},[7630],{"type":20,"value":1832},{"type":14,"tag":70,"props":7632,"children":7633},{"style":89},[7634],{"type":20,"value":1837},{"type":14,"tag":70,"props":7636,"children":7637},{"class":72,"line":501},[7638],{"type":14,"tag":70,"props":7639,"children":7640},{"emptyLinePlaceholder":1210},[7641],{"type":20,"value":1213},{"type":14,"tag":70,"props":7643,"children":7644},{"class":72,"line":522},[7645,7649,7653,7658,7662,7667],{"type":14,"tag":70,"props":7646,"children":7647},{"style":109},[7648],{"type":20,"value":5739},{"type":14,"tag":70,"props":7650,"children":7651},{"style":77},[7652],{"type":20,"value":1294},{"type":14,"tag":70,"props":7654,"children":7655},{"style":89},[7656],{"type":20,"value":7657},"local_vars",{"type":14,"tag":70,"props":7659,"children":7660},{"style":77},[7661],{"type":20,"value":1294},{"type":14,"tag":70,"props":7663,"children":7664},{"style":83},[7665],{"type":20,"value":7666},"clear",{"type":14,"tag":70,"props":7668,"children":7669},{"style":89},[7670],{"type":20,"value":1204},{"type":14,"tag":70,"props":7672,"children":7673},{"class":72,"line":1275},[7674,7679,7684,7688],{"type":14,"tag":70,"props":7675,"children":7676},{"style":77},[7677],{"type":20,"value":7678},"    for",{"type":14,"tag":70,"props":7680,"children":7681},{"style":89},[7682],{"type":20,"value":7683}," (identifier, var_type) ",{"type":14,"tag":70,"props":7685,"children":7686},{"style":77},[7687],{"type":20,"value":1231},{"type":14,"tag":70,"props":7689,"children":7690},{"style":89},[7691],{"type":20,"value":7692}," locals {\n",{"type":14,"tag":70,"props":7694,"children":7695},{"class":72,"line":1283},[7696,7700],{"type":14,"tag":70,"props":7697,"children":7698},{"style":77},[7699],{"type":20,"value":3062},{"type":14,"tag":70,"props":7701,"children":7702},{"style":89},[7703],{"type":20,"value":7704}," var_type {\n",{"type":14,"tag":70,"props":7706,"children":7707},{"class":72,"line":1307},[7708,7712,7716,7720,7724,7728,7732],{"type":14,"tag":70,"props":7709,"children":7710},{"style":83},[7711],{"type":20,"value":5877},{"type":14,"tag":70,"props":7713,"children":7714},{"style":77},[7715],{"type":20,"value":1058},{"type":14,"tag":70,"props":7717,"children":7718},{"style":83},[7719],{"type":20,"value":4102},{"type":14,"tag":70,"props":7721,"children":7722},{"style":77},[7723],{"type":20,"value":1058},{"type":14,"tag":70,"props":7725,"children":7726},{"style":83},[7727],{"type":20,"value":4415},{"type":14,"tag":70,"props":7729,"children":7730},{"style":77},[7731],{"type":20,"value":2483},{"type":14,"tag":70,"props":7733,"children":7734},{"style":89},[7735],{"type":20,"value":473},{"type":14,"tag":70,"props":7737,"children":7738},{"class":72,"line":1316},[7739,7743,7748,7752,7756,7760,7765],{"type":14,"tag":70,"props":7740,"children":7741},{"style":77},[7742],{"type":20,"value":1244},{"type":14,"tag":70,"props":7744,"children":7745},{"style":89},[7746],{"type":20,"value":7747}," int_type ",{"type":14,"tag":70,"props":7749,"children":7750},{"style":77},[7751],{"type":20,"value":106},{"type":14,"tag":70,"props":7753,"children":7754},{"style":109},[7755],{"type":20,"value":1629},{"type":14,"tag":70,"props":7757,"children":7758},{"style":77},[7759],{"type":20,"value":1294},{"type":14,"tag":70,"props":7761,"children":7762},{"style":83},[7763],{"type":20,"value":7764},"int_type",{"type":14,"tag":70,"props":7766,"children":7767},{"style":89},[7768],{"type":20,"value":1204},{"type":14,"tag":70,"props":7770,"children":7771},{"class":72,"line":1324},[7772,7776,7781,7785],{"type":14,"tag":70,"props":7773,"children":7774},{"style":77},[7775],{"type":20,"value":1244},{"type":14,"tag":70,"props":7777,"children":7778},{"style":89},[7779],{"type":20,"value":7780}," var ",{"type":14,"tag":70,"props":7782,"children":7783},{"style":77},[7784],{"type":20,"value":106},{"type":14,"tag":70,"props":7786,"children":7787},{"style":109},[7788],{"type":20,"value":6267},{"type":14,"tag":70,"props":7790,"children":7791},{"class":72,"line":1363},[7792,7797],{"type":14,"tag":70,"props":7793,"children":7794},{"style":77},[7795],{"type":20,"value":7796},"                    .",{"type":14,"tag":70,"props":7798,"children":7799},{"style":89},[7800],{"type":20,"value":1915},{"type":14,"tag":70,"props":7802,"children":7803},{"class":72,"line":1403},[7804,7808,7813,7818,7822,7826,7830,7835,7840,7844,7848],{"type":14,"tag":70,"props":7805,"children":7806},{"style":77},[7807],{"type":20,"value":7796},{"type":14,"tag":70,"props":7809,"children":7810},{"style":83},[7811],{"type":20,"value":7812},"build_alloca",{"type":14,"tag":70,"props":7814,"children":7815},{"style":89},[7816],{"type":20,"value":7817},"(int_type, ",{"type":14,"tag":70,"props":7819,"children":7820},{"style":77},[7821],{"type":20,"value":1493},{"type":14,"tag":70,"props":7823,"children":7824},{"style":83},[7825],{"type":20,"value":6369},{"type":14,"tag":70,"props":7827,"children":7828},{"style":89},[7829],{"type":20,"value":291},{"type":14,"tag":70,"props":7831,"children":7832},{"style":294},[7833],{"type":20,"value":7834},"\"var_{}\"",{"type":14,"tag":70,"props":7836,"children":7837},{"style":89},[7838],{"type":20,"value":7839},", identifier",{"type":14,"tag":70,"props":7841,"children":7842},{"style":77},[7843],{"type":20,"value":1294},{"type":14,"tag":70,"props":7845,"children":7846},{"style":109},[7847],{"type":20,"value":1967},{"type":14,"tag":70,"props":7849,"children":7850},{"style":89},[7851],{"type":20,"value":7852},"));\n",{"type":14,"tag":70,"props":7854,"children":7855},{"class":72,"line":1421},[7856,7860,7864,7868,7872,7876,7880,7885],{"type":14,"tag":70,"props":7857,"children":7858},{"style":109},[7859],{"type":20,"value":1871},{"type":14,"tag":70,"props":7861,"children":7862},{"style":77},[7863],{"type":20,"value":1294},{"type":14,"tag":70,"props":7865,"children":7866},{"style":89},[7867],{"type":20,"value":7657},{"type":14,"tag":70,"props":7869,"children":7870},{"style":77},[7871],{"type":20,"value":1294},{"type":14,"tag":70,"props":7873,"children":7874},{"style":83},[7875],{"type":20,"value":6041},{"type":14,"tag":70,"props":7877,"children":7878},{"style":89},[7879],{"type":20,"value":291},{"type":14,"tag":70,"props":7881,"children":7882},{"style":77},[7883],{"type":20,"value":7884},"*",{"type":14,"tag":70,"props":7886,"children":7887},{"style":89},[7888],{"type":20,"value":7889},"identifier, var);\n",{"type":14,"tag":70,"props":7891,"children":7892},{"class":72,"line":1430},[7893],{"type":14,"tag":70,"props":7894,"children":7895},{"style":89},[7896],{"type":20,"value":1313},{"type":14,"tag":70,"props":7898,"children":7899},{"class":72,"line":1439},[7900,7904,7908,7912,7916,7920,7924],{"type":14,"tag":70,"props":7901,"children":7902},{"style":83},[7903],{"type":20,"value":5877},{"type":14,"tag":70,"props":7905,"children":7906},{"style":77},[7907],{"type":20,"value":1058},{"type":14,"tag":70,"props":7909,"children":7910},{"style":83},[7911],{"type":20,"value":4102},{"type":14,"tag":70,"props":7913,"children":7914},{"style":77},[7915],{"type":20,"value":1058},{"type":14,"tag":70,"props":7917,"children":7918},{"style":83},[7919],{"type":20,"value":3183},{"type":14,"tag":70,"props":7921,"children":7922},{"style":77},[7923],{"type":20,"value":2483},{"type":14,"tag":70,"props":7925,"children":7926},{"style":89},[7927],{"type":20,"value":473},{"type":14,"tag":70,"props":7929,"children":7930},{"class":72,"line":1447},[7931,7935,7940,7944,7948,7952,7956,7960,7965],{"type":14,"tag":70,"props":7932,"children":7933},{"style":77},[7934],{"type":20,"value":1244},{"type":14,"tag":70,"props":7936,"children":7937},{"style":89},[7938],{"type":20,"value":7939}," bool_type ",{"type":14,"tag":70,"props":7941,"children":7942},{"style":77},[7943],{"type":20,"value":106},{"type":14,"tag":70,"props":7945,"children":7946},{"style":109},[7947],{"type":20,"value":1629},{"type":14,"tag":70,"props":7949,"children":7950},{"style":77},[7951],{"type":20,"value":1294},{"type":14,"tag":70,"props":7953,"children":7954},{"style":89},[7955],{"type":20,"value":1638},{"type":14,"tag":70,"props":7957,"children":7958},{"style":77},[7959],{"type":20,"value":1294},{"type":14,"tag":70,"props":7961,"children":7962},{"style":83},[7963],{"type":20,"value":7964},"bool_type",{"type":14,"tag":70,"props":7966,"children":7967},{"style":89},[7968],{"type":20,"value":1204},{"type":14,"tag":70,"props":7970,"children":7971},{"class":72,"line":1998},[7972,7976,7980,7984],{"type":14,"tag":70,"props":7973,"children":7974},{"style":77},[7975],{"type":20,"value":1244},{"type":14,"tag":70,"props":7977,"children":7978},{"style":89},[7979],{"type":20,"value":7780},{"type":14,"tag":70,"props":7981,"children":7982},{"style":77},[7983],{"type":20,"value":106},{"type":14,"tag":70,"props":7985,"children":7986},{"style":109},[7987],{"type":20,"value":6267},{"type":14,"tag":70,"props":7989,"children":7990},{"class":72,"line":3828},[7991,7995],{"type":14,"tag":70,"props":7992,"children":7993},{"style":77},[7994],{"type":20,"value":7796},{"type":14,"tag":70,"props":7996,"children":7997},{"style":89},[7998],{"type":20,"value":1915},{"type":14,"tag":70,"props":8000,"children":8001},{"class":72,"line":3836},[8002,8006,8010,8015,8019,8023,8027,8031,8035,8039,8043],{"type":14,"tag":70,"props":8003,"children":8004},{"style":77},[8005],{"type":20,"value":7796},{"type":14,"tag":70,"props":8007,"children":8008},{"style":83},[8009],{"type":20,"value":7812},{"type":14,"tag":70,"props":8011,"children":8012},{"style":89},[8013],{"type":20,"value":8014},"(bool_type, ",{"type":14,"tag":70,"props":8016,"children":8017},{"style":77},[8018],{"type":20,"value":1493},{"type":14,"tag":70,"props":8020,"children":8021},{"style":83},[8022],{"type":20,"value":6369},{"type":14,"tag":70,"props":8024,"children":8025},{"style":89},[8026],{"type":20,"value":291},{"type":14,"tag":70,"props":8028,"children":8029},{"style":294},[8030],{"type":20,"value":7834},{"type":14,"tag":70,"props":8032,"children":8033},{"style":89},[8034],{"type":20,"value":7839},{"type":14,"tag":70,"props":8036,"children":8037},{"style":77},[8038],{"type":20,"value":1294},{"type":14,"tag":70,"props":8040,"children":8041},{"style":109},[8042],{"type":20,"value":1967},{"type":14,"tag":70,"props":8044,"children":8045},{"style":89},[8046],{"type":20,"value":7852},{"type":14,"tag":70,"props":8048,"children":8049},{"class":72,"line":3852},[8050,8054,8058,8062,8066,8070,8074,8078],{"type":14,"tag":70,"props":8051,"children":8052},{"style":109},[8053],{"type":20,"value":1871},{"type":14,"tag":70,"props":8055,"children":8056},{"style":77},[8057],{"type":20,"value":1294},{"type":14,"tag":70,"props":8059,"children":8060},{"style":89},[8061],{"type":20,"value":7657},{"type":14,"tag":70,"props":8063,"children":8064},{"style":77},[8065],{"type":20,"value":1294},{"type":14,"tag":70,"props":8067,"children":8068},{"style":83},[8069],{"type":20,"value":6041},{"type":14,"tag":70,"props":8071,"children":8072},{"style":89},[8073],{"type":20,"value":291},{"type":14,"tag":70,"props":8075,"children":8076},{"style":77},[8077],{"type":20,"value":7884},{"type":14,"tag":70,"props":8079,"children":8080},{"style":89},[8081],{"type":20,"value":7889},{"type":14,"tag":70,"props":8083,"children":8084},{"class":72,"line":3873},[8085],{"type":14,"tag":70,"props":8086,"children":8087},{"style":89},[8088],{"type":20,"value":1313},{"type":14,"tag":70,"props":8090,"children":8091},{"class":72,"line":3882},[8092],{"type":14,"tag":70,"props":8093,"children":8094},{"style":89},[8095],{"type":20,"value":1436},{"type":14,"tag":70,"props":8097,"children":8098},{"class":72,"line":3903},[8099],{"type":14,"tag":70,"props":8100,"children":8101},{"style":89},[8102],{"type":20,"value":498},{"type":14,"tag":70,"props":8104,"children":8105},{"class":72,"line":3911},[8106],{"type":14,"tag":70,"props":8107,"children":8108},{"style":165},[8109],{"type":20,"value":3879},{"type":14,"tag":70,"props":8111,"children":8112},{"class":72,"line":3919},[8113],{"type":14,"tag":70,"props":8114,"children":8115},{"style":89},[8116],{"type":20,"value":663},{"type":14,"tag":22,"props":8118,"children":8119},{},[8120,8122,8127,8129,8134],{"type":20,"value":8121},"Here we create all those ",{"type":14,"tag":66,"props":8123,"children":8125},{"className":8124},[],[8126],{"type":20,"value":707},{"type":20,"value":8128},"s at the start of the function, and store a reference to the pointers in the ",{"type":14,"tag":66,"props":8130,"children":8132},{"className":8131},[],[8133],{"type":20,"value":7657},{"type":20,"value":8135}," hash map.\nThen in the assignment we can lookup the pointer in the hashmap and use it:",{"type":14,"tag":59,"props":8137,"children":8139},{"code":8138,"language":177,"meta":7,"className":178,"style":7},"ir::Statement::Assignment(identifier, statement) => {\n    let pointer = self.local_vars.get(identifier).unwrap();\n\n    match statement {\n        ir::AssignmentStatement::Int(expression) => {\n            let value = self.compile_int_expression(expression);\n            self.builder.build_store(*pointer, value);\n        }\n        ir::AssignmentStatement::Boolean(expression) => {\n            let value = self.compile_bool_expression(expression);\n            self.builder.build_store(*pointer, value);\n        }\n    }\n}\n",[8140],{"type":14,"tag":66,"props":8141,"children":8142},{"__ignoreMap":7},[8143,8179,8232,8239,8250,8286,8320,8357,8364,8399,8431,8466,8473,8480],{"type":14,"tag":70,"props":8144,"children":8145},{"class":72,"line":73},[8146,8150,8154,8158,8162,8166,8171,8175],{"type":14,"tag":70,"props":8147,"children":8148},{"style":83},[8149],{"type":20,"value":1339},{"type":14,"tag":70,"props":8151,"children":8152},{"style":77},[8153],{"type":20,"value":1058},{"type":14,"tag":70,"props":8155,"children":8156},{"style":83},[8157],{"type":20,"value":977},{"type":14,"tag":70,"props":8159,"children":8160},{"style":77},[8161],{"type":20,"value":1058},{"type":14,"tag":70,"props":8163,"children":8164},{"style":83},[8165],{"type":20,"value":2827},{"type":14,"tag":70,"props":8167,"children":8168},{"style":89},[8169],{"type":20,"value":8170},"(identifier, statement) ",{"type":14,"tag":70,"props":8172,"children":8173},{"style":77},[8174],{"type":20,"value":1161},{"type":14,"tag":70,"props":8176,"children":8177},{"style":89},[8178],{"type":20,"value":473},{"type":14,"tag":70,"props":8180,"children":8181},{"class":72,"line":95},[8182,8186,8191,8195,8199,8203,8207,8211,8215,8220,8224,8228],{"type":14,"tag":70,"props":8183,"children":8184},{"style":77},[8185],{"type":20,"value":208},{"type":14,"tag":70,"props":8187,"children":8188},{"style":89},[8189],{"type":20,"value":8190}," pointer ",{"type":14,"tag":70,"props":8192,"children":8193},{"style":77},[8194],{"type":20,"value":106},{"type":14,"tag":70,"props":8196,"children":8197},{"style":109},[8198],{"type":20,"value":1629},{"type":14,"tag":70,"props":8200,"children":8201},{"style":77},[8202],{"type":20,"value":1294},{"type":14,"tag":70,"props":8204,"children":8205},{"style":89},[8206],{"type":20,"value":7657},{"type":14,"tag":70,"props":8208,"children":8209},{"style":77},[8210],{"type":20,"value":1294},{"type":14,"tag":70,"props":8212,"children":8213},{"style":83},[8214],{"type":20,"value":6334},{"type":14,"tag":70,"props":8216,"children":8217},{"style":89},[8218],{"type":20,"value":8219},"(identifier)",{"type":14,"tag":70,"props":8221,"children":8222},{"style":77},[8223],{"type":20,"value":1294},{"type":14,"tag":70,"props":8225,"children":8226},{"style":83},[8227],{"type":20,"value":5514},{"type":14,"tag":70,"props":8229,"children":8230},{"style":89},[8231],{"type":20,"value":1204},{"type":14,"tag":70,"props":8233,"children":8234},{"class":72,"line":115},[8235],{"type":14,"tag":70,"props":8236,"children":8237},{"emptyLinePlaceholder":1210},[8238],{"type":20,"value":1213},{"type":14,"tag":70,"props":8240,"children":8241},{"class":72,"line":129},[8242,8246],{"type":14,"tag":70,"props":8243,"children":8244},{"style":77},[8245],{"type":20,"value":1121},{"type":14,"tag":70,"props":8247,"children":8248},{"style":89},[8249],{"type":20,"value":1126},{"type":14,"tag":70,"props":8251,"children":8252},{"class":72,"line":147},[8253,8257,8261,8265,8269,8273,8278,8282],{"type":14,"tag":70,"props":8254,"children":8255},{"style":83},[8256],{"type":20,"value":1547},{"type":14,"tag":70,"props":8258,"children":8259},{"style":77},[8260],{"type":20,"value":1058},{"type":14,"tag":70,"props":8262,"children":8263},{"style":83},[8264],{"type":20,"value":3726},{"type":14,"tag":70,"props":8266,"children":8267},{"style":77},[8268],{"type":20,"value":1058},{"type":14,"tag":70,"props":8270,"children":8271},{"style":83},[8272],{"type":20,"value":4415},{"type":14,"tag":70,"props":8274,"children":8275},{"style":89},[8276],{"type":20,"value":8277},"(expression) ",{"type":14,"tag":70,"props":8279,"children":8280},{"style":77},[8281],{"type":20,"value":1161},{"type":14,"tag":70,"props":8283,"children":8284},{"style":89},[8285],{"type":20,"value":473},{"type":14,"tag":70,"props":8287,"children":8288},{"class":72,"line":161},[8289,8293,8298,8302,8306,8310,8315],{"type":14,"tag":70,"props":8290,"children":8291},{"style":77},[8292],{"type":20,"value":1173},{"type":14,"tag":70,"props":8294,"children":8295},{"style":89},[8296],{"type":20,"value":8297}," value ",{"type":14,"tag":70,"props":8299,"children":8300},{"style":77},[8301],{"type":20,"value":106},{"type":14,"tag":70,"props":8303,"children":8304},{"style":109},[8305],{"type":20,"value":1629},{"type":14,"tag":70,"props":8307,"children":8308},{"style":77},[8309],{"type":20,"value":1294},{"type":14,"tag":70,"props":8311,"children":8312},{"style":83},[8313],{"type":20,"value":8314},"compile_int_expression",{"type":14,"tag":70,"props":8316,"children":8317},{"style":89},[8318],{"type":20,"value":8319},"(expression);\n",{"type":14,"tag":70,"props":8321,"children":8322},{"class":72,"line":310},[8323,8327,8331,8335,8339,8344,8348,8352],{"type":14,"tag":70,"props":8324,"children":8325},{"style":109},[8326],{"type":20,"value":1814},{"type":14,"tag":70,"props":8328,"children":8329},{"style":77},[8330],{"type":20,"value":1294},{"type":14,"tag":70,"props":8332,"children":8333},{"style":89},[8334],{"type":20,"value":1823},{"type":14,"tag":70,"props":8336,"children":8337},{"style":77},[8338],{"type":20,"value":1294},{"type":14,"tag":70,"props":8340,"children":8341},{"style":83},[8342],{"type":20,"value":8343},"build_store",{"type":14,"tag":70,"props":8345,"children":8346},{"style":89},[8347],{"type":20,"value":291},{"type":14,"tag":70,"props":8349,"children":8350},{"style":77},[8351],{"type":20,"value":7884},{"type":14,"tag":70,"props":8353,"children":8354},{"style":89},[8355],{"type":20,"value":8356},"pointer, value);\n",{"type":14,"tag":70,"props":8358,"children":8359},{"class":72,"line":492},[8360],{"type":14,"tag":70,"props":8361,"children":8362},{"style":89},[8363],{"type":20,"value":1436},{"type":14,"tag":70,"props":8365,"children":8366},{"class":72,"line":501},[8367,8371,8375,8379,8383,8387,8391,8395],{"type":14,"tag":70,"props":8368,"children":8369},{"style":83},[8370],{"type":20,"value":1547},{"type":14,"tag":70,"props":8372,"children":8373},{"style":77},[8374],{"type":20,"value":1058},{"type":14,"tag":70,"props":8376,"children":8377},{"style":83},[8378],{"type":20,"value":3726},{"type":14,"tag":70,"props":8380,"children":8381},{"style":77},[8382],{"type":20,"value":1058},{"type":14,"tag":70,"props":8384,"children":8385},{"style":83},[8386],{"type":20,"value":3183},{"type":14,"tag":70,"props":8388,"children":8389},{"style":89},[8390],{"type":20,"value":8277},{"type":14,"tag":70,"props":8392,"children":8393},{"style":77},[8394],{"type":20,"value":1161},{"type":14,"tag":70,"props":8396,"children":8397},{"style":89},[8398],{"type":20,"value":473},{"type":14,"tag":70,"props":8400,"children":8401},{"class":72,"line":522},[8402,8406,8410,8414,8418,8422,8427],{"type":14,"tag":70,"props":8403,"children":8404},{"style":77},[8405],{"type":20,"value":1173},{"type":14,"tag":70,"props":8407,"children":8408},{"style":89},[8409],{"type":20,"value":8297},{"type":14,"tag":70,"props":8411,"children":8412},{"style":77},[8413],{"type":20,"value":106},{"type":14,"tag":70,"props":8415,"children":8416},{"style":109},[8417],{"type":20,"value":1629},{"type":14,"tag":70,"props":8419,"children":8420},{"style":77},[8421],{"type":20,"value":1294},{"type":14,"tag":70,"props":8423,"children":8424},{"style":83},[8425],{"type":20,"value":8426},"compile_bool_expression",{"type":14,"tag":70,"props":8428,"children":8429},{"style":89},[8430],{"type":20,"value":8319},{"type":14,"tag":70,"props":8432,"children":8433},{"class":72,"line":1275},[8434,8438,8442,8446,8450,8454,8458,8462],{"type":14,"tag":70,"props":8435,"children":8436},{"style":109},[8437],{"type":20,"value":1814},{"type":14,"tag":70,"props":8439,"children":8440},{"style":77},[8441],{"type":20,"value":1294},{"type":14,"tag":70,"props":8443,"children":8444},{"style":89},[8445],{"type":20,"value":1823},{"type":14,"tag":70,"props":8447,"children":8448},{"style":77},[8449],{"type":20,"value":1294},{"type":14,"tag":70,"props":8451,"children":8452},{"style":83},[8453],{"type":20,"value":8343},{"type":14,"tag":70,"props":8455,"children":8456},{"style":89},[8457],{"type":20,"value":291},{"type":14,"tag":70,"props":8459,"children":8460},{"style":77},[8461],{"type":20,"value":7884},{"type":14,"tag":70,"props":8463,"children":8464},{"style":89},[8465],{"type":20,"value":8356},{"type":14,"tag":70,"props":8467,"children":8468},{"class":72,"line":1283},[8469],{"type":14,"tag":70,"props":8470,"children":8471},{"style":89},[8472],{"type":20,"value":1436},{"type":14,"tag":70,"props":8474,"children":8475},{"class":72,"line":1307},[8476],{"type":14,"tag":70,"props":8477,"children":8478},{"style":89},[8479],{"type":20,"value":498},{"type":14,"tag":70,"props":8481,"children":8482},{"class":72,"line":1316},[8483],{"type":14,"tag":70,"props":8484,"children":8485},{"style":89},[8486],{"type":20,"value":663},{"type":14,"tag":22,"props":8488,"children":8489},{},[8490],{"type":20,"value":8491},"And when we have a var expression we just load the type (and convert it to the expected one):",{"type":14,"tag":59,"props":8493,"children":8495},{"code":8494,"language":177,"meta":7,"className":178,"style":7},"ir::BooleanExpression::Var(identifier) => {\n    let pointer = self.local_vars.get(identifier).unwrap();\n    self.builder\n        .build_load(self.context.bool_type(), *pointer, \"Load\")\n        .into_int_value()\n}\n",[8496],{"type":14,"tag":66,"props":8497,"children":8498},{"__ignoreMap":7},[8499,8535,8586,8601,8661,8677],{"type":14,"tag":70,"props":8500,"children":8501},{"class":72,"line":73},[8502,8506,8510,8514,8518,8522,8527,8531],{"type":14,"tag":70,"props":8503,"children":8504},{"style":83},[8505],{"type":20,"value":1339},{"type":14,"tag":70,"props":8507,"children":8508},{"style":77},[8509],{"type":20,"value":1058},{"type":14,"tag":70,"props":8511,"children":8512},{"style":83},[8513],{"type":20,"value":3681},{"type":14,"tag":70,"props":8515,"children":8516},{"style":77},[8517],{"type":20,"value":1058},{"type":14,"tag":70,"props":8519,"children":8520},{"style":83},[8521],{"type":20,"value":7021},{"type":14,"tag":70,"props":8523,"children":8524},{"style":89},[8525],{"type":20,"value":8526},"(identifier) ",{"type":14,"tag":70,"props":8528,"children":8529},{"style":77},[8530],{"type":20,"value":1161},{"type":14,"tag":70,"props":8532,"children":8533},{"style":89},[8534],{"type":20,"value":473},{"type":14,"tag":70,"props":8536,"children":8537},{"class":72,"line":95},[8538,8542,8546,8550,8554,8558,8562,8566,8570,8574,8578,8582],{"type":14,"tag":70,"props":8539,"children":8540},{"style":77},[8541],{"type":20,"value":208},{"type":14,"tag":70,"props":8543,"children":8544},{"style":89},[8545],{"type":20,"value":8190},{"type":14,"tag":70,"props":8547,"children":8548},{"style":77},[8549],{"type":20,"value":106},{"type":14,"tag":70,"props":8551,"children":8552},{"style":109},[8553],{"type":20,"value":1629},{"type":14,"tag":70,"props":8555,"children":8556},{"style":77},[8557],{"type":20,"value":1294},{"type":14,"tag":70,"props":8559,"children":8560},{"style":89},[8561],{"type":20,"value":7657},{"type":14,"tag":70,"props":8563,"children":8564},{"style":77},[8565],{"type":20,"value":1294},{"type":14,"tag":70,"props":8567,"children":8568},{"style":83},[8569],{"type":20,"value":6334},{"type":14,"tag":70,"props":8571,"children":8572},{"style":89},[8573],{"type":20,"value":8219},{"type":14,"tag":70,"props":8575,"children":8576},{"style":77},[8577],{"type":20,"value":1294},{"type":14,"tag":70,"props":8579,"children":8580},{"style":83},[8581],{"type":20,"value":5514},{"type":14,"tag":70,"props":8583,"children":8584},{"style":89},[8585],{"type":20,"value":1204},{"type":14,"tag":70,"props":8587,"children":8588},{"class":72,"line":115},[8589,8593,8597],{"type":14,"tag":70,"props":8590,"children":8591},{"style":109},[8592],{"type":20,"value":5739},{"type":14,"tag":70,"props":8594,"children":8595},{"style":77},[8596],{"type":20,"value":1294},{"type":14,"tag":70,"props":8598,"children":8599},{"style":89},[8600],{"type":20,"value":1915},{"type":14,"tag":70,"props":8602,"children":8603},{"class":72,"line":129},[8604,8608,8613,8617,8621,8625,8629,8633,8637,8642,8646,8651,8656],{"type":14,"tag":70,"props":8605,"children":8606},{"style":77},[8607],{"type":20,"value":4870},{"type":14,"tag":70,"props":8609,"children":8610},{"style":83},[8611],{"type":20,"value":8612},"build_load",{"type":14,"tag":70,"props":8614,"children":8615},{"style":89},[8616],{"type":20,"value":291},{"type":14,"tag":70,"props":8618,"children":8619},{"style":109},[8620],{"type":20,"value":1498},{"type":14,"tag":70,"props":8622,"children":8623},{"style":77},[8624],{"type":20,"value":1294},{"type":14,"tag":70,"props":8626,"children":8627},{"style":89},[8628],{"type":20,"value":1638},{"type":14,"tag":70,"props":8630,"children":8631},{"style":77},[8632],{"type":20,"value":1294},{"type":14,"tag":70,"props":8634,"children":8635},{"style":83},[8636],{"type":20,"value":7964},{"type":14,"tag":70,"props":8638,"children":8639},{"style":89},[8640],{"type":20,"value":8641},"(), ",{"type":14,"tag":70,"props":8643,"children":8644},{"style":77},[8645],{"type":20,"value":7884},{"type":14,"tag":70,"props":8647,"children":8648},{"style":89},[8649],{"type":20,"value":8650},"pointer, ",{"type":14,"tag":70,"props":8652,"children":8653},{"style":294},[8654],{"type":20,"value":8655},"\"Load\"",{"type":14,"tag":70,"props":8657,"children":8658},{"style":89},[8659],{"type":20,"value":8660},")\n",{"type":14,"tag":70,"props":8662,"children":8663},{"class":72,"line":147},[8664,8668,8673],{"type":14,"tag":70,"props":8665,"children":8666},{"style":77},[8667],{"type":20,"value":4870},{"type":14,"tag":70,"props":8669,"children":8670},{"style":83},[8671],{"type":20,"value":8672},"into_int_value",{"type":14,"tag":70,"props":8674,"children":8675},{"style":89},[8676],{"type":20,"value":4862},{"type":14,"tag":70,"props":8678,"children":8679},{"class":72,"line":161},[8680],{"type":14,"tag":70,"props":8681,"children":8682},{"style":89},[8683],{"type":20,"value":663},{"type":14,"tag":8685,"props":8686,"children":8687},"blockquote",{},[8688],{"type":14,"tag":22,"props":8689,"children":8690},{},[8691],{"type":20,"value":8692},"It is the same for integers",{"type":14,"tag":22,"props":8694,"children":8695},{},[8696],{"type":20,"value":8697},"And now we should have variables, yay!",{"type":14,"tag":858,"props":8699,"children":8701},{"id":8700},"fixing-a-pretty-big-flaw-in-our-boolean-logic",[8702],{"type":20,"value":8703},"Fixing a pretty big flaw in our boolean logic",{"type":14,"tag":22,"props":8705,"children":8706},{},[8707,8709,8714,8716,8721],{"type":20,"value":8708},"When we did the boolean short circuiting logic in the last blog post we just used ",{"type":14,"tag":66,"props":8710,"children":8712},{"className":8711},[],[8713],{"type":20,"value":707},{"type":20,"value":8715}," at the operator location, but as we discussed above this might put the ",{"type":14,"tag":66,"props":8717,"children":8719},{"className":8718},[],[8720],{"type":20,"value":707},{"type":20,"value":8722}," in a loop, which would be really bad. to solve this we will also add vars when we analyze a boolean operation and use that var when doing short circuiting.",{"type":14,"tag":40,"props":8724,"children":8726},{"id":8725},"type-resolution-1",[8727],{"type":20,"value":3388},{"type":14,"tag":22,"props":8729,"children":8730},{},[8731],{"type":20,"value":8732},"We will add a variable reference to the boolean operator ir:",{"type":14,"tag":59,"props":8734,"children":8736},{"code":8735,"language":177,"meta":7,"className":178,"style":7},"#[derive(Debug)]\npub enum BooleanExpression {\n    // ...\n    Operator(\n        VariableIdentifier,\n        Box\u003CBooleanExpression>,\n        BooleanOperator,\n        Box\u003CBooleanExpression>,\n    ),\n}\n",[8737],{"type":14,"tag":66,"props":8738,"children":8739},{"__ignoreMap":7},[8740,8755,8774,8781,8793,8805,8825,8837,8856,8864],{"type":14,"tag":70,"props":8741,"children":8742},{"class":72,"line":73},[8743,8747,8751],{"type":14,"tag":70,"props":8744,"children":8745},{"style":89},[8746],{"type":20,"value":898},{"type":14,"tag":70,"props":8748,"children":8749},{"style":83},[8750],{"type":20,"value":903},{"type":14,"tag":70,"props":8752,"children":8753},{"style":89},[8754],{"type":20,"value":908},{"type":14,"tag":70,"props":8756,"children":8757},{"class":72,"line":95},[8758,8762,8766,8770],{"type":14,"tag":70,"props":8759,"children":8760},{"style":77},[8761],{"type":20,"value":916},{"type":14,"tag":70,"props":8763,"children":8764},{"style":77},[8765],{"type":20,"value":921},{"type":14,"tag":70,"props":8767,"children":8768},{"style":83},[8769],{"type":20,"value":3949},{"type":14,"tag":70,"props":8771,"children":8772},{"style":89},[8773],{"type":20,"value":473},{"type":14,"tag":70,"props":8775,"children":8776},{"class":72,"line":115},[8777],{"type":14,"tag":70,"props":8778,"children":8779},{"style":165},[8780],{"type":20,"value":3879},{"type":14,"tag":70,"props":8782,"children":8783},{"class":72,"line":129},[8784,8789],{"type":14,"tag":70,"props":8785,"children":8786},{"style":83},[8787],{"type":20,"value":8788},"    Operator",{"type":14,"tag":70,"props":8790,"children":8791},{"style":89},[8792],{"type":20,"value":1031},{"type":14,"tag":70,"props":8794,"children":8795},{"class":72,"line":147},[8796,8801],{"type":14,"tag":70,"props":8797,"children":8798},{"style":83},[8799],{"type":20,"value":8800},"        VariableIdentifier",{"type":14,"tag":70,"props":8802,"children":8803},{"style":89},[8804],{"type":20,"value":1068},{"type":14,"tag":70,"props":8806,"children":8807},{"class":72,"line":161},[8808,8813,8817,8821],{"type":14,"tag":70,"props":8809,"children":8810},{"style":83},[8811],{"type":20,"value":8812},"        Box",{"type":14,"tag":70,"props":8814,"children":8815},{"style":89},[8816],{"type":20,"value":972},{"type":14,"tag":70,"props":8818,"children":8819},{"style":83},[8820],{"type":20,"value":3681},{"type":14,"tag":70,"props":8822,"children":8823},{"style":89},[8824],{"type":20,"value":4215},{"type":14,"tag":70,"props":8826,"children":8827},{"class":72,"line":310},[8828,8833],{"type":14,"tag":70,"props":8829,"children":8830},{"style":83},[8831],{"type":20,"value":8832},"        BooleanOperator",{"type":14,"tag":70,"props":8834,"children":8835},{"style":89},[8836],{"type":20,"value":1068},{"type":14,"tag":70,"props":8838,"children":8839},{"class":72,"line":492},[8840,8844,8848,8852],{"type":14,"tag":70,"props":8841,"children":8842},{"style":83},[8843],{"type":20,"value":8812},{"type":14,"tag":70,"props":8845,"children":8846},{"style":89},[8847],{"type":20,"value":972},{"type":14,"tag":70,"props":8849,"children":8850},{"style":83},[8851],{"type":20,"value":3681},{"type":14,"tag":70,"props":8853,"children":8854},{"style":89},[8855],{"type":20,"value":4215},{"type":14,"tag":70,"props":8857,"children":8858},{"class":72,"line":501},[8859],{"type":14,"tag":70,"props":8860,"children":8861},{"style":89},[8862],{"type":20,"value":8863},"    ),\n",{"type":14,"tag":70,"props":8865,"children":8866},{"class":72,"line":522},[8867],{"type":14,"tag":70,"props":8868,"children":8869},{"style":89},[8870],{"type":20,"value":663},{"type":14,"tag":22,"props":8872,"children":8873},{},[8874],{"type":20,"value":8875},"We will add a variable reference when we resolve a bool:",{"type":14,"tag":59,"props":8877,"children":8879},{"code":8878,"language":177,"meta":7,"className":178,"style":7},"let result_identifier = self.get_free_identifier();\nself.function_metadata\n    .as_mut()\n    .unwrap()\n    .locals\n    .push((result_identifier, ir::VarType::Boolean));\n\nOk(TypedExpression::Boolean(ir::BooleanExpression::Operator(\n    result_identifier,\n    Box::new(left),\n    op,\n    Box::new(right),\n)))\n",[8880],{"type":14,"tag":66,"props":8881,"children":8882},{"__ignoreMap":7},[8883,8915,8930,8946,8961,8972,9012,9019,9073,9081,9102,9110,9130],{"type":14,"tag":70,"props":8884,"children":8885},{"class":72,"line":73},[8886,8890,8895,8899,8903,8907,8911],{"type":14,"tag":70,"props":8887,"children":8888},{"style":77},[8889],{"type":20,"value":764},{"type":14,"tag":70,"props":8891,"children":8892},{"style":89},[8893],{"type":20,"value":8894}," result_identifier ",{"type":14,"tag":70,"props":8896,"children":8897},{"style":77},[8898],{"type":20,"value":106},{"type":14,"tag":70,"props":8900,"children":8901},{"style":109},[8902],{"type":20,"value":1629},{"type":14,"tag":70,"props":8904,"children":8905},{"style":77},[8906],{"type":20,"value":1294},{"type":14,"tag":70,"props":8908,"children":8909},{"style":83},[8910],{"type":20,"value":5644},{"type":14,"tag":70,"props":8912,"children":8913},{"style":89},[8914],{"type":20,"value":1204},{"type":14,"tag":70,"props":8916,"children":8917},{"class":72,"line":95},[8918,8922,8926],{"type":14,"tag":70,"props":8919,"children":8920},{"style":109},[8921],{"type":20,"value":1498},{"type":14,"tag":70,"props":8923,"children":8924},{"style":77},[8925],{"type":20,"value":1294},{"type":14,"tag":70,"props":8927,"children":8928},{"style":89},[8929],{"type":20,"value":5748},{"type":14,"tag":70,"props":8931,"children":8932},{"class":72,"line":115},[8933,8938,8942],{"type":14,"tag":70,"props":8934,"children":8935},{"style":77},[8936],{"type":20,"value":8937},"    .",{"type":14,"tag":70,"props":8939,"children":8940},{"style":83},[8941],{"type":20,"value":5760},{"type":14,"tag":70,"props":8943,"children":8944},{"style":89},[8945],{"type":20,"value":4862},{"type":14,"tag":70,"props":8947,"children":8948},{"class":72,"line":129},[8949,8953,8957],{"type":14,"tag":70,"props":8950,"children":8951},{"style":77},[8952],{"type":20,"value":8937},{"type":14,"tag":70,"props":8954,"children":8955},{"style":83},[8956],{"type":20,"value":5514},{"type":14,"tag":70,"props":8958,"children":8959},{"style":89},[8960],{"type":20,"value":4862},{"type":14,"tag":70,"props":8962,"children":8963},{"class":72,"line":147},[8964,8968],{"type":14,"tag":70,"props":8965,"children":8966},{"style":77},[8967],{"type":20,"value":8937},{"type":14,"tag":70,"props":8969,"children":8970},{"style":89},[8971],{"type":20,"value":5791},{"type":14,"tag":70,"props":8973,"children":8974},{"class":72,"line":161},[8975,8979,8983,8988,8992,8996,9000,9004,9008],{"type":14,"tag":70,"props":8976,"children":8977},{"style":77},[8978],{"type":20,"value":8937},{"type":14,"tag":70,"props":8980,"children":8981},{"style":83},[8982],{"type":20,"value":1299},{"type":14,"tag":70,"props":8984,"children":8985},{"style":89},[8986],{"type":20,"value":8987},"((result_identifier, ",{"type":14,"tag":70,"props":8989,"children":8990},{"style":83},[8991],{"type":20,"value":1339},{"type":14,"tag":70,"props":8993,"children":8994},{"style":77},[8995],{"type":20,"value":1058},{"type":14,"tag":70,"props":8997,"children":8998},{"style":83},[8999],{"type":20,"value":4102},{"type":14,"tag":70,"props":9001,"children":9002},{"style":77},[9003],{"type":20,"value":1058},{"type":14,"tag":70,"props":9005,"children":9006},{"style":83},[9007],{"type":20,"value":3183},{"type":14,"tag":70,"props":9009,"children":9010},{"style":89},[9011],{"type":20,"value":7852},{"type":14,"tag":70,"props":9013,"children":9014},{"class":72,"line":310},[9015],{"type":14,"tag":70,"props":9016,"children":9017},{"emptyLinePlaceholder":1210},[9018],{"type":20,"value":1213},{"type":14,"tag":70,"props":9020,"children":9021},{"class":72,"line":492},[9022,9027,9031,9036,9040,9044,9048,9052,9056,9060,9064,9069],{"type":14,"tag":70,"props":9023,"children":9024},{"style":83},[9025],{"type":20,"value":9026},"Ok",{"type":14,"tag":70,"props":9028,"children":9029},{"style":89},[9030],{"type":20,"value":291},{"type":14,"tag":70,"props":9032,"children":9033},{"style":83},[9034],{"type":20,"value":9035},"TypedExpression",{"type":14,"tag":70,"props":9037,"children":9038},{"style":77},[9039],{"type":20,"value":1058},{"type":14,"tag":70,"props":9041,"children":9042},{"style":83},[9043],{"type":20,"value":3183},{"type":14,"tag":70,"props":9045,"children":9046},{"style":89},[9047],{"type":20,"value":291},{"type":14,"tag":70,"props":9049,"children":9050},{"style":83},[9051],{"type":20,"value":1339},{"type":14,"tag":70,"props":9053,"children":9054},{"style":77},[9055],{"type":20,"value":1058},{"type":14,"tag":70,"props":9057,"children":9058},{"style":83},[9059],{"type":20,"value":3681},{"type":14,"tag":70,"props":9061,"children":9062},{"style":77},[9063],{"type":20,"value":1058},{"type":14,"tag":70,"props":9065,"children":9066},{"style":83},[9067],{"type":20,"value":9068},"Operator",{"type":14,"tag":70,"props":9070,"children":9071},{"style":89},[9072],{"type":20,"value":1031},{"type":14,"tag":70,"props":9074,"children":9075},{"class":72,"line":501},[9076],{"type":14,"tag":70,"props":9077,"children":9078},{"style":89},[9079],{"type":20,"value":9080},"    result_identifier,\n",{"type":14,"tag":70,"props":9082,"children":9083},{"class":72,"line":522},[9084,9089,9093,9097],{"type":14,"tag":70,"props":9085,"children":9086},{"style":83},[9087],{"type":20,"value":9088},"    Box",{"type":14,"tag":70,"props":9090,"children":9091},{"style":77},[9092],{"type":20,"value":1058},{"type":14,"tag":70,"props":9094,"children":9095},{"style":83},[9096],{"type":20,"value":1199},{"type":14,"tag":70,"props":9098,"children":9099},{"style":89},[9100],{"type":20,"value":9101},"(left),\n",{"type":14,"tag":70,"props":9103,"children":9104},{"class":72,"line":1275},[9105],{"type":14,"tag":70,"props":9106,"children":9107},{"style":89},[9108],{"type":20,"value":9109},"    op,\n",{"type":14,"tag":70,"props":9111,"children":9112},{"class":72,"line":1283},[9113,9117,9121,9125],{"type":14,"tag":70,"props":9114,"children":9115},{"style":83},[9116],{"type":20,"value":9088},{"type":14,"tag":70,"props":9118,"children":9119},{"style":77},[9120],{"type":20,"value":1058},{"type":14,"tag":70,"props":9122,"children":9123},{"style":83},[9124],{"type":20,"value":1199},{"type":14,"tag":70,"props":9126,"children":9127},{"style":89},[9128],{"type":20,"value":9129},"(right),\n",{"type":14,"tag":70,"props":9131,"children":9132},{"class":72,"line":1307},[9133],{"type":14,"tag":70,"props":9134,"children":9135},{"style":89},[9136],{"type":20,"value":9137},")))\n",{"type":14,"tag":40,"props":9139,"children":9141},{"id":9140},"code-gen-1",[9142],{"type":20,"value":7151},{"type":14,"tag":22,"props":9144,"children":9145},{},[9146],{"type":20,"value":9147},"Now in the code gen instead of using a new pointer we will load one from the local vars:",{"type":14,"tag":59,"props":9149,"children":9151},{"code":9150,"language":177,"meta":7,"className":178,"style":7},"ir::BooleanExpression::Operator(result_identifier, left, op, right) => {\n    // ...\n    let pointer = *self.local_vars.get(result_identifier).unwrap();\n    // ...\n}\n",[9152],{"type":14,"tag":66,"props":9153,"children":9154},{"__ignoreMap":7},[9155,9191,9198,9255,9262],{"type":14,"tag":70,"props":9156,"children":9157},{"class":72,"line":73},[9158,9162,9166,9170,9174,9178,9183,9187],{"type":14,"tag":70,"props":9159,"children":9160},{"style":83},[9161],{"type":20,"value":1339},{"type":14,"tag":70,"props":9163,"children":9164},{"style":77},[9165],{"type":20,"value":1058},{"type":14,"tag":70,"props":9167,"children":9168},{"style":83},[9169],{"type":20,"value":3681},{"type":14,"tag":70,"props":9171,"children":9172},{"style":77},[9173],{"type":20,"value":1058},{"type":14,"tag":70,"props":9175,"children":9176},{"style":83},[9177],{"type":20,"value":9068},{"type":14,"tag":70,"props":9179,"children":9180},{"style":89},[9181],{"type":20,"value":9182},"(result_identifier, left, op, right) ",{"type":14,"tag":70,"props":9184,"children":9185},{"style":77},[9186],{"type":20,"value":1161},{"type":14,"tag":70,"props":9188,"children":9189},{"style":89},[9190],{"type":20,"value":473},{"type":14,"tag":70,"props":9192,"children":9193},{"class":72,"line":95},[9194],{"type":14,"tag":70,"props":9195,"children":9196},{"style":165},[9197],{"type":20,"value":3879},{"type":14,"tag":70,"props":9199,"children":9200},{"class":72,"line":115},[9201,9205,9209,9213,9218,9222,9226,9230,9234,9238,9243,9247,9251],{"type":14,"tag":70,"props":9202,"children":9203},{"style":77},[9204],{"type":20,"value":208},{"type":14,"tag":70,"props":9206,"children":9207},{"style":89},[9208],{"type":20,"value":8190},{"type":14,"tag":70,"props":9210,"children":9211},{"style":77},[9212],{"type":20,"value":106},{"type":14,"tag":70,"props":9214,"children":9215},{"style":77},[9216],{"type":20,"value":9217}," *",{"type":14,"tag":70,"props":9219,"children":9220},{"style":109},[9221],{"type":20,"value":1498},{"type":14,"tag":70,"props":9223,"children":9224},{"style":77},[9225],{"type":20,"value":1294},{"type":14,"tag":70,"props":9227,"children":9228},{"style":89},[9229],{"type":20,"value":7657},{"type":14,"tag":70,"props":9231,"children":9232},{"style":77},[9233],{"type":20,"value":1294},{"type":14,"tag":70,"props":9235,"children":9236},{"style":83},[9237],{"type":20,"value":6334},{"type":14,"tag":70,"props":9239,"children":9240},{"style":89},[9241],{"type":20,"value":9242},"(result_identifier)",{"type":14,"tag":70,"props":9244,"children":9245},{"style":77},[9246],{"type":20,"value":1294},{"type":14,"tag":70,"props":9248,"children":9249},{"style":83},[9250],{"type":20,"value":5514},{"type":14,"tag":70,"props":9252,"children":9253},{"style":89},[9254],{"type":20,"value":1204},{"type":14,"tag":70,"props":9256,"children":9257},{"class":72,"line":129},[9258],{"type":14,"tag":70,"props":9259,"children":9260},{"style":165},[9261],{"type":20,"value":3879},{"type":14,"tag":70,"props":9263,"children":9264},{"class":72,"line":147},[9265],{"type":14,"tag":70,"props":9266,"children":9267},{"style":89},[9268],{"type":20,"value":663},{"type":14,"tag":22,"props":9270,"children":9271},{},[9272],{"type":20,"value":9273},"And now we should be avoiding memory leaks in out boolean operators.",{"type":14,"tag":858,"props":9275,"children":9277},{"id":9276},"conclusion",[9278],{"type":20,"value":9279},"Conclusion",{"type":14,"tag":22,"props":9281,"children":9282},{},[9283,9285,9291,9292,9298],{"type":20,"value":9284},"Now that we have variables this is looking more like a proper language, in the next post we will be adding control flow, like ",{"type":14,"tag":66,"props":9286,"children":9288},{"className":9287},[],[9289],{"type":20,"value":9290},"if",{"type":20,"value":1972},{"type":14,"tag":66,"props":9293,"children":9295},{"className":9294},[],[9296],{"type":20,"value":9297},"while",{"type":20,"value":9299},", etc. So look forward to that!",{"type":14,"tag":9301,"props":9302,"children":9303},"style",{},[9304],{"type":20,"value":9305},"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":7,"searchDepth":95,"depth":95,"links":9307},[9308,9309,9310,9311,9312,9317,9321],{"id":42,"depth":115,"text":45},{"id":682,"depth":115,"text":685},{"id":693,"depth":115,"text":696},{"id":860,"depth":95,"text":863},{"id":2011,"depth":95,"text":2014,"children":9313},[9314,9315,9316],{"id":2076,"depth":115,"text":2079},{"id":3385,"depth":115,"text":3388},{"id":7148,"depth":115,"text":7151},{"id":8700,"depth":95,"text":8703,"children":9318},[9319,9320],{"id":8725,"depth":115,"text":3388},{"id":9140,"depth":115,"text":7151},{"id":9276,"depth":95,"text":9279},"markdown","content:blog:6.compiler_6.md","content","blog/6.compiler_6.md","md",1703982906027]