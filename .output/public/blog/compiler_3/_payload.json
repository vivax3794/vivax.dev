[{"data":1,"prerenderedAt":9013},["Reactive",2],{"content-query-AKK3P3V7Ca":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"body":10,"_type":9008,"_id":9009,"_source":9010,"_file":9011,"_extension":9012},"/blog/compiler_3","blog",false,"","Compiler part 2.2 - Type analysis and Code geneation!","So in the last blog post, we created the parsing module that generated our AST! Today we will be generating the internal IR, code generation (what we did in part 1, but now based on our IR!), and then also adding those shell commands we used afterward to the compiler itself.",{"type":11,"children":12,"toc":8995},"root",[13,21,36,53,60,69,74,203,210,247,567,580,586,591,905,918,923,1272,1280,2009,2014,2427,2440,2621,2627,2640,2646,3650,3655,3995,4008,5653,5658,5670,5675,5952,5957,5983,6010,6015,6246,6259,6267,6273,6301,6306,6813,6826,6831,7596,7608,8053,8058,8471,8501,8507,8519,8888,8893,8944,8950,8955,8961,8966,8984,8989],{"type":14,"tag":15,"props":16,"children":18},"element","h1",{"id":17},"compiler-part-22-type-analysis-and-code-geneation",[19],{"type":20,"value":8},"text",{"type":14,"tag":22,"props":23,"children":24},"p",{},[25,27,34],{"type":20,"value":26},"So in the last blog post, we created the ",{"type":14,"tag":28,"props":29,"children":31},"code",{"className":30},[],[32],{"type":20,"value":33},"parsing",{"type":20,"value":35}," module that generated our AST! Today we will be generating the internal IR, code generation (what we did in part 1, but now based on our IR!), and then also adding those shell commands we used afterward to the compiler itself.",{"type":14,"tag":37,"props":38,"children":39},"blockquote",{},[40],{"type":14,"tag":22,"props":41,"children":42},{},[43,45],{"type":20,"value":44},"The full code for this post can be found at ",{"type":14,"tag":46,"props":47,"children":51},"a",{"href":48,"rel":49},"https://github.com/vivax3794/viv_script_blog/tree/0a4be49ac325d2275b3352b36f94f91bbb2030f6",[50],"nofollow",[52],{"type":20,"value":48},{"type":14,"tag":54,"props":55,"children":57},"h2",{"id":56},"type-analysis",[58],{"type":20,"value":59},"Type analysis",{"type":14,"tag":22,"props":61,"children":62},{},[63,65],{"type":20,"value":64},"This step is basically \"figure out what everything is!\", we basically apply a bunch of rules to give every part of our compiler a type ",{"type":14,"tag":66,"props":67,"children":68},"d",{},[],{"type":14,"tag":22,"props":70,"children":71},{},[72],{"type":20,"value":73},"This might sound hard, but it is rather simple, code might be something along the lines of",{"type":14,"tag":75,"props":76,"children":80},"pre",{"code":77,"language":78,"meta":7,"className":79,"style":7},"if plus.left == int a&& plus.right == int {plus.result = int}\nelse {error(...)}\n","rust","language-rust shiki shiki-themes github-dark",[81],{"type":14,"tag":28,"props":82,"children":83},{"__ignoreMap":7},[84,168],{"type":14,"tag":85,"props":86,"children":89},"span",{"class":87,"line":88},"line",1,[90,96,102,107,112,117,122,127,131,135,140,144,149,153,158,163],{"type":14,"tag":85,"props":91,"children":93},{"style":92},"--shiki-default:#F97583",[94],{"type":20,"value":95},"if",{"type":14,"tag":85,"props":97,"children":99},{"style":98},"--shiki-default:#E1E4E8",[100],{"type":20,"value":101}," plus",{"type":14,"tag":85,"props":103,"children":104},{"style":92},[105],{"type":20,"value":106},".",{"type":14,"tag":85,"props":108,"children":109},{"style":98},[110],{"type":20,"value":111},"left ",{"type":14,"tag":85,"props":113,"children":114},{"style":92},[115],{"type":20,"value":116},"==",{"type":14,"tag":85,"props":118,"children":119},{"style":98},[120],{"type":20,"value":121}," int a",{"type":14,"tag":85,"props":123,"children":124},{"style":92},[125],{"type":20,"value":126},"&&",{"type":14,"tag":85,"props":128,"children":129},{"style":98},[130],{"type":20,"value":101},{"type":14,"tag":85,"props":132,"children":133},{"style":92},[134],{"type":20,"value":106},{"type":14,"tag":85,"props":136,"children":137},{"style":98},[138],{"type":20,"value":139},"right ",{"type":14,"tag":85,"props":141,"children":142},{"style":92},[143],{"type":20,"value":116},{"type":14,"tag":85,"props":145,"children":146},{"style":98},[147],{"type":20,"value":148}," int {plus",{"type":14,"tag":85,"props":150,"children":151},{"style":92},[152],{"type":20,"value":106},{"type":14,"tag":85,"props":154,"children":155},{"style":98},[156],{"type":20,"value":157},"result ",{"type":14,"tag":85,"props":159,"children":160},{"style":92},[161],{"type":20,"value":162},"=",{"type":14,"tag":85,"props":164,"children":165},{"style":98},[166],{"type":20,"value":167}," int}\n",{"type":14,"tag":85,"props":169,"children":171},{"class":87,"line":170},2,[172,177,182,188,193,198],{"type":14,"tag":85,"props":173,"children":174},{"style":92},[175],{"type":20,"value":176},"else",{"type":14,"tag":85,"props":178,"children":179},{"style":98},[180],{"type":20,"value":181}," {",{"type":14,"tag":85,"props":183,"children":185},{"style":184},"--shiki-default:#B392F0",[186],{"type":20,"value":187},"error",{"type":14,"tag":85,"props":189,"children":190},{"style":98},[191],{"type":20,"value":192},"(",{"type":14,"tag":85,"props":194,"children":195},{"style":92},[196],{"type":20,"value":197},"...",{"type":14,"tag":85,"props":199,"children":200},{"style":98},[201],{"type":20,"value":202},")}\n",{"type":14,"tag":204,"props":205,"children":207},"h3",{"id":206},"ir",[208],{"type":20,"value":209},"Ir",{"type":14,"tag":22,"props":211,"children":212},{},[213,215,221,223,229,231,237,239,245],{"type":20,"value":214},"Our IR will contain type information in contrast to the AST, we could encode this using fields (and we will for dynamic types like structs.). While the AST represents what the code looks like, the IR should represent what the code ",{"type":14,"tag":216,"props":217,"children":218},"em",{},[219],{"type":20,"value":220},"does",{"type":20,"value":222},". so instead of just ",{"type":14,"tag":28,"props":224,"children":226},{"className":225},[],[227],{"type":20,"value":228},"add",{"type":20,"value":230},", we will have ",{"type":14,"tag":28,"props":232,"children":234},{"className":233},[],[235],{"type":20,"value":236},"AddInt",{"type":20,"value":238},", ",{"type":14,"tag":28,"props":240,"children":242},{"className":241},[],[243],{"type":20,"value":244},"AddFloat",{"type":20,"value":246},", etc, etc.",{"type":14,"tag":75,"props":248,"children":250},{"code":249,"language":78,"meta":7,"className":79,"style":7},"/// ir.rs\n\n#[derive(Debug)]\npub struct Module(pub Vec\u003CStatement>);\n\n#[derive(Debug)]\npub enum Statement {\n    Print(PrintStatement),\n}\n\n#[derive(Debug)]\npub enum PrintStatement {\n    Int(IntExpression),\n}\n\n#[derive(Debug)]\npub enum IntExpression {\n    Literal(i32),\n}\n",[251],{"type":14,"tag":28,"props":252,"children":253},{"__ignoreMap":7},[254,263,272,291,338,346,362,385,408,417,425,441,462,484,492,500,516,537,559],{"type":14,"tag":85,"props":255,"children":256},{"class":87,"line":88},[257],{"type":14,"tag":85,"props":258,"children":260},{"style":259},"--shiki-default:#6A737D",[261],{"type":20,"value":262},"/// ir.rs\n",{"type":14,"tag":85,"props":264,"children":265},{"class":87,"line":170},[266],{"type":14,"tag":85,"props":267,"children":269},{"emptyLinePlaceholder":268},true,[270],{"type":20,"value":271},"\n",{"type":14,"tag":85,"props":273,"children":275},{"class":87,"line":274},3,[276,281,286],{"type":14,"tag":85,"props":277,"children":278},{"style":98},[279],{"type":20,"value":280},"#[derive(",{"type":14,"tag":85,"props":282,"children":283},{"style":184},[284],{"type":20,"value":285},"Debug",{"type":14,"tag":85,"props":287,"children":288},{"style":98},[289],{"type":20,"value":290},")]\n",{"type":14,"tag":85,"props":292,"children":294},{"class":87,"line":293},4,[295,300,305,310,314,318,323,328,333],{"type":14,"tag":85,"props":296,"children":297},{"style":92},[298],{"type":20,"value":299},"pub",{"type":14,"tag":85,"props":301,"children":302},{"style":92},[303],{"type":20,"value":304}," struct",{"type":14,"tag":85,"props":306,"children":307},{"style":184},[308],{"type":20,"value":309}," Module",{"type":14,"tag":85,"props":311,"children":312},{"style":98},[313],{"type":20,"value":192},{"type":14,"tag":85,"props":315,"children":316},{"style":92},[317],{"type":20,"value":299},{"type":14,"tag":85,"props":319,"children":320},{"style":184},[321],{"type":20,"value":322}," Vec",{"type":14,"tag":85,"props":324,"children":325},{"style":98},[326],{"type":20,"value":327},"\u003C",{"type":14,"tag":85,"props":329,"children":330},{"style":184},[331],{"type":20,"value":332},"Statement",{"type":14,"tag":85,"props":334,"children":335},{"style":98},[336],{"type":20,"value":337},">);\n",{"type":14,"tag":85,"props":339,"children":341},{"class":87,"line":340},5,[342],{"type":14,"tag":85,"props":343,"children":344},{"emptyLinePlaceholder":268},[345],{"type":20,"value":271},{"type":14,"tag":85,"props":347,"children":349},{"class":87,"line":348},6,[350,354,358],{"type":14,"tag":85,"props":351,"children":352},{"style":98},[353],{"type":20,"value":280},{"type":14,"tag":85,"props":355,"children":356},{"style":184},[357],{"type":20,"value":285},{"type":14,"tag":85,"props":359,"children":360},{"style":98},[361],{"type":20,"value":290},{"type":14,"tag":85,"props":363,"children":365},{"class":87,"line":364},7,[366,370,375,380],{"type":14,"tag":85,"props":367,"children":368},{"style":92},[369],{"type":20,"value":299},{"type":14,"tag":85,"props":371,"children":372},{"style":92},[373],{"type":20,"value":374}," enum",{"type":14,"tag":85,"props":376,"children":377},{"style":184},[378],{"type":20,"value":379}," Statement",{"type":14,"tag":85,"props":381,"children":382},{"style":98},[383],{"type":20,"value":384}," {\n",{"type":14,"tag":85,"props":386,"children":388},{"class":87,"line":387},8,[389,394,398,403],{"type":14,"tag":85,"props":390,"children":391},{"style":184},[392],{"type":20,"value":393},"    Print",{"type":14,"tag":85,"props":395,"children":396},{"style":98},[397],{"type":20,"value":192},{"type":14,"tag":85,"props":399,"children":400},{"style":184},[401],{"type":20,"value":402},"PrintStatement",{"type":14,"tag":85,"props":404,"children":405},{"style":98},[406],{"type":20,"value":407},"),\n",{"type":14,"tag":85,"props":409,"children":411},{"class":87,"line":410},9,[412],{"type":14,"tag":85,"props":413,"children":414},{"style":98},[415],{"type":20,"value":416},"}\n",{"type":14,"tag":85,"props":418,"children":420},{"class":87,"line":419},10,[421],{"type":14,"tag":85,"props":422,"children":423},{"emptyLinePlaceholder":268},[424],{"type":20,"value":271},{"type":14,"tag":85,"props":426,"children":428},{"class":87,"line":427},11,[429,433,437],{"type":14,"tag":85,"props":430,"children":431},{"style":98},[432],{"type":20,"value":280},{"type":14,"tag":85,"props":434,"children":435},{"style":184},[436],{"type":20,"value":285},{"type":14,"tag":85,"props":438,"children":439},{"style":98},[440],{"type":20,"value":290},{"type":14,"tag":85,"props":442,"children":444},{"class":87,"line":443},12,[445,449,453,458],{"type":14,"tag":85,"props":446,"children":447},{"style":92},[448],{"type":20,"value":299},{"type":14,"tag":85,"props":450,"children":451},{"style":92},[452],{"type":20,"value":374},{"type":14,"tag":85,"props":454,"children":455},{"style":184},[456],{"type":20,"value":457}," PrintStatement",{"type":14,"tag":85,"props":459,"children":460},{"style":98},[461],{"type":20,"value":384},{"type":14,"tag":85,"props":463,"children":465},{"class":87,"line":464},13,[466,471,475,480],{"type":14,"tag":85,"props":467,"children":468},{"style":184},[469],{"type":20,"value":470},"    Int",{"type":14,"tag":85,"props":472,"children":473},{"style":98},[474],{"type":20,"value":192},{"type":14,"tag":85,"props":476,"children":477},{"style":184},[478],{"type":20,"value":479},"IntExpression",{"type":14,"tag":85,"props":481,"children":482},{"style":98},[483],{"type":20,"value":407},{"type":14,"tag":85,"props":485,"children":487},{"class":87,"line":486},14,[488],{"type":14,"tag":85,"props":489,"children":490},{"style":98},[491],{"type":20,"value":416},{"type":14,"tag":85,"props":493,"children":495},{"class":87,"line":494},15,[496],{"type":14,"tag":85,"props":497,"children":498},{"emptyLinePlaceholder":268},[499],{"type":20,"value":271},{"type":14,"tag":85,"props":501,"children":503},{"class":87,"line":502},16,[504,508,512],{"type":14,"tag":85,"props":505,"children":506},{"style":98},[507],{"type":20,"value":280},{"type":14,"tag":85,"props":509,"children":510},{"style":184},[511],{"type":20,"value":285},{"type":14,"tag":85,"props":513,"children":514},{"style":98},[515],{"type":20,"value":290},{"type":14,"tag":85,"props":517,"children":519},{"class":87,"line":518},17,[520,524,528,533],{"type":14,"tag":85,"props":521,"children":522},{"style":92},[523],{"type":20,"value":299},{"type":14,"tag":85,"props":525,"children":526},{"style":92},[527],{"type":20,"value":374},{"type":14,"tag":85,"props":529,"children":530},{"style":184},[531],{"type":20,"value":532}," IntExpression",{"type":14,"tag":85,"props":534,"children":535},{"style":98},[536],{"type":20,"value":384},{"type":14,"tag":85,"props":538,"children":540},{"class":87,"line":539},18,[541,546,550,555],{"type":14,"tag":85,"props":542,"children":543},{"style":184},[544],{"type":20,"value":545},"    Literal",{"type":14,"tag":85,"props":547,"children":548},{"style":98},[549],{"type":20,"value":192},{"type":14,"tag":85,"props":551,"children":552},{"style":184},[553],{"type":20,"value":554},"i32",{"type":14,"tag":85,"props":556,"children":557},{"style":98},[558],{"type":20,"value":407},{"type":14,"tag":85,"props":560,"children":562},{"class":87,"line":561},19,[563],{"type":14,"tag":85,"props":564,"children":565},{"style":98},[566],{"type":20,"value":416},{"type":14,"tag":22,"props":568,"children":569},{},[570,572,578],{"type":20,"value":571},"This also gives us a benefit from the rust compiler, We can't for example construct an ",{"type":14,"tag":28,"props":573,"children":575},{"className":574},[],[576],{"type":20,"value":577},"Int",{"type":20,"value":579}," type print and give it a String by accident!\nThis ensures we do the type analysis correctly.",{"type":14,"tag":204,"props":581,"children":583},{"id":582},"resolving-types",[584],{"type":20,"value":585},"Resolving Types",{"type":14,"tag":22,"props":587,"children":588},{},[589],{"type":20,"value":590},"Now we can do some type analyzing, with so few instructions it is rather simple:",{"type":14,"tag":75,"props":592,"children":594},{"code":593,"language":78,"meta":7,"className":79,"style":7},"// type_analyzer.rs\nuse crate::ir;\n\nenum TypedExpression {\n    Int(ir::IntExpression),\n}\n\nimpl TypedExpression {\n    fn is_int(&self) -> bool {\n        match self {\n            TypedExpression::Int(_) => true,\n        }\n    }\n}\n\n#[derive(Debug, Error)]\n#[error(\"Type error: {0}\")]\nstruct TypeError(String);\n",[595],{"type":14,"tag":28,"props":596,"children":597},{"__ignoreMap":7},[598,606,624,631,648,676,683,690,706,753,770,806,814,822,829,836,860,878],{"type":14,"tag":85,"props":599,"children":600},{"class":87,"line":88},[601],{"type":14,"tag":85,"props":602,"children":603},{"style":259},[604],{"type":20,"value":605},"// type_analyzer.rs\n",{"type":14,"tag":85,"props":607,"children":608},{"class":87,"line":170},[609,614,619],{"type":14,"tag":85,"props":610,"children":611},{"style":92},[612],{"type":20,"value":613},"use",{"type":14,"tag":85,"props":615,"children":616},{"style":92},[617],{"type":20,"value":618}," crate::",{"type":14,"tag":85,"props":620,"children":621},{"style":98},[622],{"type":20,"value":623},"ir;\n",{"type":14,"tag":85,"props":625,"children":626},{"class":87,"line":274},[627],{"type":14,"tag":85,"props":628,"children":629},{"emptyLinePlaceholder":268},[630],{"type":20,"value":271},{"type":14,"tag":85,"props":632,"children":633},{"class":87,"line":293},[634,639,644],{"type":14,"tag":85,"props":635,"children":636},{"style":92},[637],{"type":20,"value":638},"enum",{"type":14,"tag":85,"props":640,"children":641},{"style":184},[642],{"type":20,"value":643}," TypedExpression",{"type":14,"tag":85,"props":645,"children":646},{"style":98},[647],{"type":20,"value":384},{"type":14,"tag":85,"props":649,"children":650},{"class":87,"line":340},[651,655,659,663,668,672],{"type":14,"tag":85,"props":652,"children":653},{"style":184},[654],{"type":20,"value":470},{"type":14,"tag":85,"props":656,"children":657},{"style":98},[658],{"type":20,"value":192},{"type":14,"tag":85,"props":660,"children":661},{"style":184},[662],{"type":20,"value":206},{"type":14,"tag":85,"props":664,"children":665},{"style":92},[666],{"type":20,"value":667},"::",{"type":14,"tag":85,"props":669,"children":670},{"style":184},[671],{"type":20,"value":479},{"type":14,"tag":85,"props":673,"children":674},{"style":98},[675],{"type":20,"value":407},{"type":14,"tag":85,"props":677,"children":678},{"class":87,"line":348},[679],{"type":14,"tag":85,"props":680,"children":681},{"style":98},[682],{"type":20,"value":416},{"type":14,"tag":85,"props":684,"children":685},{"class":87,"line":364},[686],{"type":14,"tag":85,"props":687,"children":688},{"emptyLinePlaceholder":268},[689],{"type":20,"value":271},{"type":14,"tag":85,"props":691,"children":692},{"class":87,"line":387},[693,698,702],{"type":14,"tag":85,"props":694,"children":695},{"style":92},[696],{"type":20,"value":697},"impl",{"type":14,"tag":85,"props":699,"children":700},{"style":184},[701],{"type":20,"value":643},{"type":14,"tag":85,"props":703,"children":704},{"style":98},[705],{"type":20,"value":384},{"type":14,"tag":85,"props":707,"children":708},{"class":87,"line":410},[709,714,719,723,728,734,739,744,749],{"type":14,"tag":85,"props":710,"children":711},{"style":92},[712],{"type":20,"value":713},"    fn",{"type":14,"tag":85,"props":715,"children":716},{"style":184},[717],{"type":20,"value":718}," is_int",{"type":14,"tag":85,"props":720,"children":721},{"style":98},[722],{"type":20,"value":192},{"type":14,"tag":85,"props":724,"children":725},{"style":92},[726],{"type":20,"value":727},"&",{"type":14,"tag":85,"props":729,"children":731},{"style":730},"--shiki-default:#79B8FF",[732],{"type":20,"value":733},"self",{"type":14,"tag":85,"props":735,"children":736},{"style":98},[737],{"type":20,"value":738},") ",{"type":14,"tag":85,"props":740,"children":741},{"style":92},[742],{"type":20,"value":743},"->",{"type":14,"tag":85,"props":745,"children":746},{"style":184},[747],{"type":20,"value":748}," bool",{"type":14,"tag":85,"props":750,"children":751},{"style":98},[752],{"type":20,"value":384},{"type":14,"tag":85,"props":754,"children":755},{"class":87,"line":419},[756,761,766],{"type":14,"tag":85,"props":757,"children":758},{"style":92},[759],{"type":20,"value":760},"        match",{"type":14,"tag":85,"props":762,"children":763},{"style":730},[764],{"type":20,"value":765}," self",{"type":14,"tag":85,"props":767,"children":768},{"style":98},[769],{"type":20,"value":384},{"type":14,"tag":85,"props":771,"children":772},{"class":87,"line":427},[773,778,782,786,791,796,801],{"type":14,"tag":85,"props":774,"children":775},{"style":184},[776],{"type":20,"value":777},"            TypedExpression",{"type":14,"tag":85,"props":779,"children":780},{"style":92},[781],{"type":20,"value":667},{"type":14,"tag":85,"props":783,"children":784},{"style":184},[785],{"type":20,"value":577},{"type":14,"tag":85,"props":787,"children":788},{"style":98},[789],{"type":20,"value":790},"(_) ",{"type":14,"tag":85,"props":792,"children":793},{"style":92},[794],{"type":20,"value":795},"=>",{"type":14,"tag":85,"props":797,"children":798},{"style":730},[799],{"type":20,"value":800}," true",{"type":14,"tag":85,"props":802,"children":803},{"style":98},[804],{"type":20,"value":805},",\n",{"type":14,"tag":85,"props":807,"children":808},{"class":87,"line":443},[809],{"type":14,"tag":85,"props":810,"children":811},{"style":98},[812],{"type":20,"value":813},"        }\n",{"type":14,"tag":85,"props":815,"children":816},{"class":87,"line":464},[817],{"type":14,"tag":85,"props":818,"children":819},{"style":98},[820],{"type":20,"value":821},"    }\n",{"type":14,"tag":85,"props":823,"children":824},{"class":87,"line":486},[825],{"type":14,"tag":85,"props":826,"children":827},{"style":98},[828],{"type":20,"value":416},{"type":14,"tag":85,"props":830,"children":831},{"class":87,"line":494},[832],{"type":14,"tag":85,"props":833,"children":834},{"emptyLinePlaceholder":268},[835],{"type":20,"value":271},{"type":14,"tag":85,"props":837,"children":838},{"class":87,"line":502},[839,843,847,851,856],{"type":14,"tag":85,"props":840,"children":841},{"style":98},[842],{"type":20,"value":280},{"type":14,"tag":85,"props":844,"children":845},{"style":184},[846],{"type":20,"value":285},{"type":14,"tag":85,"props":848,"children":849},{"style":98},[850],{"type":20,"value":238},{"type":14,"tag":85,"props":852,"children":853},{"style":184},[854],{"type":20,"value":855},"Error",{"type":14,"tag":85,"props":857,"children":858},{"style":98},[859],{"type":20,"value":290},{"type":14,"tag":85,"props":861,"children":862},{"class":87,"line":518},[863,868,874],{"type":14,"tag":85,"props":864,"children":865},{"style":98},[866],{"type":20,"value":867},"#[error(",{"type":14,"tag":85,"props":869,"children":871},{"style":870},"--shiki-default:#9ECBFF",[872],{"type":20,"value":873},"\"Type error: {0}\"",{"type":14,"tag":85,"props":875,"children":876},{"style":98},[877],{"type":20,"value":290},{"type":14,"tag":85,"props":879,"children":880},{"class":87,"line":539},[881,886,891,895,900],{"type":14,"tag":85,"props":882,"children":883},{"style":92},[884],{"type":20,"value":885},"struct",{"type":14,"tag":85,"props":887,"children":888},{"style":184},[889],{"type":20,"value":890}," TypeError",{"type":14,"tag":85,"props":892,"children":893},{"style":98},[894],{"type":20,"value":192},{"type":14,"tag":85,"props":896,"children":897},{"style":184},[898],{"type":20,"value":899},"String",{"type":14,"tag":85,"props":901,"children":902},{"style":98},[903],{"type":20,"value":904},");\n",{"type":14,"tag":22,"props":906,"children":907},{},[908,910,916],{"type":20,"value":909},"So why this enum? Well consider ",{"type":14,"tag":28,"props":911,"children":913},{"className":912},[],[914],{"type":20,"value":915},"resolve_expression",{"type":20,"value":917},", we don't know what the type should be when we walk an expression, so what is the return type? This is one of those times you would want a union, but in Rust, we shall use more enums!",{"type":14,"tag":22,"props":919,"children":920},{},[921],{"type":20,"value":922},"Now for the analyzing!",{"type":14,"tag":75,"props":924,"children":926},{"code":925,"language":78,"meta":7,"className":79,"style":7},"fn resolve_literal(literal: &ast::Literal) -> anyhow::Result\u003CTypedExpression> {\n    match literal {\n        ast::Literal::Integer(int) => Ok(TypedExpression::Int(ir::IntExpression::Literal(*int))),\n    }\n}\n\nfn resolve_expression(expression: &ast::Expression) -> anyhow::Result\u003CTypedExpression> {\n    match expression {\n        ast::Expression::Literal(literal) => resolve_literal(literal),\n    }\n}\n",[927],{"type":14,"tag":28,"props":928,"children":929},{"__ignoreMap":7},[930,1008,1021,1114,1121,1128,1135,1205,1217,1258,1265],{"type":14,"tag":85,"props":931,"children":932},{"class":87,"line":88},[933,938,943,948,953,958,963,967,972,976,980,985,989,994,998,1003],{"type":14,"tag":85,"props":934,"children":935},{"style":92},[936],{"type":20,"value":937},"fn",{"type":14,"tag":85,"props":939,"children":940},{"style":184},[941],{"type":20,"value":942}," resolve_literal",{"type":14,"tag":85,"props":944,"children":945},{"style":98},[946],{"type":20,"value":947},"(literal",{"type":14,"tag":85,"props":949,"children":950},{"style":92},[951],{"type":20,"value":952},":",{"type":14,"tag":85,"props":954,"children":955},{"style":92},[956],{"type":20,"value":957}," &",{"type":14,"tag":85,"props":959,"children":960},{"style":184},[961],{"type":20,"value":962},"ast",{"type":14,"tag":85,"props":964,"children":965},{"style":92},[966],{"type":20,"value":667},{"type":14,"tag":85,"props":968,"children":969},{"style":184},[970],{"type":20,"value":971},"Literal",{"type":14,"tag":85,"props":973,"children":974},{"style":98},[975],{"type":20,"value":738},{"type":14,"tag":85,"props":977,"children":978},{"style":92},[979],{"type":20,"value":743},{"type":14,"tag":85,"props":981,"children":982},{"style":184},[983],{"type":20,"value":984}," anyhow",{"type":14,"tag":85,"props":986,"children":987},{"style":92},[988],{"type":20,"value":667},{"type":14,"tag":85,"props":990,"children":991},{"style":184},[992],{"type":20,"value":993},"Result",{"type":14,"tag":85,"props":995,"children":996},{"style":98},[997],{"type":20,"value":327},{"type":14,"tag":85,"props":999,"children":1000},{"style":184},[1001],{"type":20,"value":1002},"TypedExpression",{"type":14,"tag":85,"props":1004,"children":1005},{"style":98},[1006],{"type":20,"value":1007},"> {\n",{"type":14,"tag":85,"props":1009,"children":1010},{"class":87,"line":170},[1011,1016],{"type":14,"tag":85,"props":1012,"children":1013},{"style":92},[1014],{"type":20,"value":1015},"    match",{"type":14,"tag":85,"props":1017,"children":1018},{"style":98},[1019],{"type":20,"value":1020}," literal {\n",{"type":14,"tag":85,"props":1022,"children":1023},{"class":87,"line":274},[1024,1029,1033,1037,1041,1046,1051,1055,1060,1064,1068,1072,1076,1080,1084,1088,1092,1096,1100,1104,1109],{"type":14,"tag":85,"props":1025,"children":1026},{"style":184},[1027],{"type":20,"value":1028},"        ast",{"type":14,"tag":85,"props":1030,"children":1031},{"style":92},[1032],{"type":20,"value":667},{"type":14,"tag":85,"props":1034,"children":1035},{"style":184},[1036],{"type":20,"value":971},{"type":14,"tag":85,"props":1038,"children":1039},{"style":92},[1040],{"type":20,"value":667},{"type":14,"tag":85,"props":1042,"children":1043},{"style":184},[1044],{"type":20,"value":1045},"Integer",{"type":14,"tag":85,"props":1047,"children":1048},{"style":98},[1049],{"type":20,"value":1050},"(int) ",{"type":14,"tag":85,"props":1052,"children":1053},{"style":92},[1054],{"type":20,"value":795},{"type":14,"tag":85,"props":1056,"children":1057},{"style":184},[1058],{"type":20,"value":1059}," Ok",{"type":14,"tag":85,"props":1061,"children":1062},{"style":98},[1063],{"type":20,"value":192},{"type":14,"tag":85,"props":1065,"children":1066},{"style":184},[1067],{"type":20,"value":1002},{"type":14,"tag":85,"props":1069,"children":1070},{"style":92},[1071],{"type":20,"value":667},{"type":14,"tag":85,"props":1073,"children":1074},{"style":184},[1075],{"type":20,"value":577},{"type":14,"tag":85,"props":1077,"children":1078},{"style":98},[1079],{"type":20,"value":192},{"type":14,"tag":85,"props":1081,"children":1082},{"style":184},[1083],{"type":20,"value":206},{"type":14,"tag":85,"props":1085,"children":1086},{"style":92},[1087],{"type":20,"value":667},{"type":14,"tag":85,"props":1089,"children":1090},{"style":184},[1091],{"type":20,"value":479},{"type":14,"tag":85,"props":1093,"children":1094},{"style":92},[1095],{"type":20,"value":667},{"type":14,"tag":85,"props":1097,"children":1098},{"style":184},[1099],{"type":20,"value":971},{"type":14,"tag":85,"props":1101,"children":1102},{"style":98},[1103],{"type":20,"value":192},{"type":14,"tag":85,"props":1105,"children":1106},{"style":92},[1107],{"type":20,"value":1108},"*",{"type":14,"tag":85,"props":1110,"children":1111},{"style":98},[1112],{"type":20,"value":1113},"int))),\n",{"type":14,"tag":85,"props":1115,"children":1116},{"class":87,"line":293},[1117],{"type":14,"tag":85,"props":1118,"children":1119},{"style":98},[1120],{"type":20,"value":821},{"type":14,"tag":85,"props":1122,"children":1123},{"class":87,"line":340},[1124],{"type":14,"tag":85,"props":1125,"children":1126},{"style":98},[1127],{"type":20,"value":416},{"type":14,"tag":85,"props":1129,"children":1130},{"class":87,"line":348},[1131],{"type":14,"tag":85,"props":1132,"children":1133},{"emptyLinePlaceholder":268},[1134],{"type":20,"value":271},{"type":14,"tag":85,"props":1136,"children":1137},{"class":87,"line":364},[1138,1142,1147,1152,1156,1160,1164,1168,1173,1177,1181,1185,1189,1193,1197,1201],{"type":14,"tag":85,"props":1139,"children":1140},{"style":92},[1141],{"type":20,"value":937},{"type":14,"tag":85,"props":1143,"children":1144},{"style":184},[1145],{"type":20,"value":1146}," resolve_expression",{"type":14,"tag":85,"props":1148,"children":1149},{"style":98},[1150],{"type":20,"value":1151},"(expression",{"type":14,"tag":85,"props":1153,"children":1154},{"style":92},[1155],{"type":20,"value":952},{"type":14,"tag":85,"props":1157,"children":1158},{"style":92},[1159],{"type":20,"value":957},{"type":14,"tag":85,"props":1161,"children":1162},{"style":184},[1163],{"type":20,"value":962},{"type":14,"tag":85,"props":1165,"children":1166},{"style":92},[1167],{"type":20,"value":667},{"type":14,"tag":85,"props":1169,"children":1170},{"style":184},[1171],{"type":20,"value":1172},"Expression",{"type":14,"tag":85,"props":1174,"children":1175},{"style":98},[1176],{"type":20,"value":738},{"type":14,"tag":85,"props":1178,"children":1179},{"style":92},[1180],{"type":20,"value":743},{"type":14,"tag":85,"props":1182,"children":1183},{"style":184},[1184],{"type":20,"value":984},{"type":14,"tag":85,"props":1186,"children":1187},{"style":92},[1188],{"type":20,"value":667},{"type":14,"tag":85,"props":1190,"children":1191},{"style":184},[1192],{"type":20,"value":993},{"type":14,"tag":85,"props":1194,"children":1195},{"style":98},[1196],{"type":20,"value":327},{"type":14,"tag":85,"props":1198,"children":1199},{"style":184},[1200],{"type":20,"value":1002},{"type":14,"tag":85,"props":1202,"children":1203},{"style":98},[1204],{"type":20,"value":1007},{"type":14,"tag":85,"props":1206,"children":1207},{"class":87,"line":387},[1208,1212],{"type":14,"tag":85,"props":1209,"children":1210},{"style":92},[1211],{"type":20,"value":1015},{"type":14,"tag":85,"props":1213,"children":1214},{"style":98},[1215],{"type":20,"value":1216}," expression {\n",{"type":14,"tag":85,"props":1218,"children":1219},{"class":87,"line":410},[1220,1224,1228,1232,1236,1240,1245,1249,1253],{"type":14,"tag":85,"props":1221,"children":1222},{"style":184},[1223],{"type":20,"value":1028},{"type":14,"tag":85,"props":1225,"children":1226},{"style":92},[1227],{"type":20,"value":667},{"type":14,"tag":85,"props":1229,"children":1230},{"style":184},[1231],{"type":20,"value":1172},{"type":14,"tag":85,"props":1233,"children":1234},{"style":92},[1235],{"type":20,"value":667},{"type":14,"tag":85,"props":1237,"children":1238},{"style":184},[1239],{"type":20,"value":971},{"type":14,"tag":85,"props":1241,"children":1242},{"style":98},[1243],{"type":20,"value":1244},"(literal) ",{"type":14,"tag":85,"props":1246,"children":1247},{"style":92},[1248],{"type":20,"value":795},{"type":14,"tag":85,"props":1250,"children":1251},{"style":184},[1252],{"type":20,"value":942},{"type":14,"tag":85,"props":1254,"children":1255},{"style":98},[1256],{"type":20,"value":1257},"(literal),\n",{"type":14,"tag":85,"props":1259,"children":1260},{"class":87,"line":419},[1261],{"type":14,"tag":85,"props":1262,"children":1263},{"style":98},[1264],{"type":20,"value":821},{"type":14,"tag":85,"props":1266,"children":1267},{"class":87,"line":427},[1268],{"type":14,"tag":85,"props":1269,"children":1270},{"style":98},[1271],{"type":20,"value":416},{"type":14,"tag":22,"props":1273,"children":1274},{},[1275,1277],{"type":20,"value":1276},"Again here we use the power of abstraction! Very simple so far, but even with more complex rules this will stay simple ",{"type":14,"tag":66,"props":1278,"children":1279},{},[],{"type":14,"tag":75,"props":1281,"children":1283},{"code":1282,"language":78,"meta":7,"className":79,"style":7},"fn resolve_print_statement(expression: &ast::Expression) -> anyhow::Result\u003Cir::PrintStatement> {\n    let typed_expression = resolve_expression(expression)?;\n\n    match typed_expression {\n        TypedExpression::Int(int_expression) => Ok(ir::PrintStatement::Int(int_expression)),\n    }\n}\n\nfn resolve_statement(statement: &ast::Statement) -> anyhow::Result\u003Cir::Statement> {\n    match statement {\n        ast::Statement::Print(expression) => {\n            let print_statement = resolve_print_statement(expression)?;\n\n            Ok(ir::Statement::Print(print_statement))\n        }\n    }\n}\n\npub fn resolve_module(module: &ast::Module) -> anyhow::Result\u003Cir::Module> {\n    let mut ir_statements = Vec::new();\n\n    for statement in &module.0 {\n        let ir_statement = resolve_statement(statement)?;\n\n        ir_statements.push(ir_statement);\n    }\n\n    Ok(ir::Module(ir_statements))\n}\n",[1284],{"type":14,"tag":28,"props":1285,"children":1286},{"__ignoreMap":7},[1287,1360,1396,1403,1415,1473,1480,1487,1494,1567,1579,1616,1649,1656,1693,1700,1707,1714,1721,1800,1840,1848,1889,1924,1932,1955,1963,1971,2001],{"type":14,"tag":85,"props":1288,"children":1289},{"class":87,"line":88},[1290,1294,1299,1303,1307,1311,1315,1319,1323,1327,1331,1335,1339,1343,1348,1352,1356],{"type":14,"tag":85,"props":1291,"children":1292},{"style":92},[1293],{"type":20,"value":937},{"type":14,"tag":85,"props":1295,"children":1296},{"style":184},[1297],{"type":20,"value":1298}," resolve_print_statement",{"type":14,"tag":85,"props":1300,"children":1301},{"style":98},[1302],{"type":20,"value":1151},{"type":14,"tag":85,"props":1304,"children":1305},{"style":92},[1306],{"type":20,"value":952},{"type":14,"tag":85,"props":1308,"children":1309},{"style":92},[1310],{"type":20,"value":957},{"type":14,"tag":85,"props":1312,"children":1313},{"style":184},[1314],{"type":20,"value":962},{"type":14,"tag":85,"props":1316,"children":1317},{"style":92},[1318],{"type":20,"value":667},{"type":14,"tag":85,"props":1320,"children":1321},{"style":184},[1322],{"type":20,"value":1172},{"type":14,"tag":85,"props":1324,"children":1325},{"style":98},[1326],{"type":20,"value":738},{"type":14,"tag":85,"props":1328,"children":1329},{"style":92},[1330],{"type":20,"value":743},{"type":14,"tag":85,"props":1332,"children":1333},{"style":184},[1334],{"type":20,"value":984},{"type":14,"tag":85,"props":1336,"children":1337},{"style":92},[1338],{"type":20,"value":667},{"type":14,"tag":85,"props":1340,"children":1341},{"style":184},[1342],{"type":20,"value":993},{"type":14,"tag":85,"props":1344,"children":1345},{"style":98},[1346],{"type":20,"value":1347},"\u003Cir",{"type":14,"tag":85,"props":1349,"children":1350},{"style":92},[1351],{"type":20,"value":667},{"type":14,"tag":85,"props":1353,"children":1354},{"style":184},[1355],{"type":20,"value":402},{"type":14,"tag":85,"props":1357,"children":1358},{"style":98},[1359],{"type":20,"value":1007},{"type":14,"tag":85,"props":1361,"children":1362},{"class":87,"line":170},[1363,1368,1373,1377,1381,1386,1391],{"type":14,"tag":85,"props":1364,"children":1365},{"style":92},[1366],{"type":20,"value":1367},"    let",{"type":14,"tag":85,"props":1369,"children":1370},{"style":98},[1371],{"type":20,"value":1372}," typed_expression ",{"type":14,"tag":85,"props":1374,"children":1375},{"style":92},[1376],{"type":20,"value":162},{"type":14,"tag":85,"props":1378,"children":1379},{"style":184},[1380],{"type":20,"value":1146},{"type":14,"tag":85,"props":1382,"children":1383},{"style":98},[1384],{"type":20,"value":1385},"(expression)",{"type":14,"tag":85,"props":1387,"children":1388},{"style":92},[1389],{"type":20,"value":1390},"?",{"type":14,"tag":85,"props":1392,"children":1393},{"style":98},[1394],{"type":20,"value":1395},";\n",{"type":14,"tag":85,"props":1397,"children":1398},{"class":87,"line":274},[1399],{"type":14,"tag":85,"props":1400,"children":1401},{"emptyLinePlaceholder":268},[1402],{"type":20,"value":271},{"type":14,"tag":85,"props":1404,"children":1405},{"class":87,"line":293},[1406,1410],{"type":14,"tag":85,"props":1407,"children":1408},{"style":92},[1409],{"type":20,"value":1015},{"type":14,"tag":85,"props":1411,"children":1412},{"style":98},[1413],{"type":20,"value":1414}," typed_expression {\n",{"type":14,"tag":85,"props":1416,"children":1417},{"class":87,"line":340},[1418,1423,1427,1431,1436,1440,1444,1448,1452,1456,1460,1464,1468],{"type":14,"tag":85,"props":1419,"children":1420},{"style":184},[1421],{"type":20,"value":1422},"        TypedExpression",{"type":14,"tag":85,"props":1424,"children":1425},{"style":92},[1426],{"type":20,"value":667},{"type":14,"tag":85,"props":1428,"children":1429},{"style":184},[1430],{"type":20,"value":577},{"type":14,"tag":85,"props":1432,"children":1433},{"style":98},[1434],{"type":20,"value":1435},"(int_expression) ",{"type":14,"tag":85,"props":1437,"children":1438},{"style":92},[1439],{"type":20,"value":795},{"type":14,"tag":85,"props":1441,"children":1442},{"style":184},[1443],{"type":20,"value":1059},{"type":14,"tag":85,"props":1445,"children":1446},{"style":98},[1447],{"type":20,"value":192},{"type":14,"tag":85,"props":1449,"children":1450},{"style":184},[1451],{"type":20,"value":206},{"type":14,"tag":85,"props":1453,"children":1454},{"style":92},[1455],{"type":20,"value":667},{"type":14,"tag":85,"props":1457,"children":1458},{"style":184},[1459],{"type":20,"value":402},{"type":14,"tag":85,"props":1461,"children":1462},{"style":92},[1463],{"type":20,"value":667},{"type":14,"tag":85,"props":1465,"children":1466},{"style":184},[1467],{"type":20,"value":577},{"type":14,"tag":85,"props":1469,"children":1470},{"style":98},[1471],{"type":20,"value":1472},"(int_expression)),\n",{"type":14,"tag":85,"props":1474,"children":1475},{"class":87,"line":348},[1476],{"type":14,"tag":85,"props":1477,"children":1478},{"style":98},[1479],{"type":20,"value":821},{"type":14,"tag":85,"props":1481,"children":1482},{"class":87,"line":364},[1483],{"type":14,"tag":85,"props":1484,"children":1485},{"style":98},[1486],{"type":20,"value":416},{"type":14,"tag":85,"props":1488,"children":1489},{"class":87,"line":387},[1490],{"type":14,"tag":85,"props":1491,"children":1492},{"emptyLinePlaceholder":268},[1493],{"type":20,"value":271},{"type":14,"tag":85,"props":1495,"children":1496},{"class":87,"line":410},[1497,1501,1506,1511,1515,1519,1523,1527,1531,1535,1539,1543,1547,1551,1555,1559,1563],{"type":14,"tag":85,"props":1498,"children":1499},{"style":92},[1500],{"type":20,"value":937},{"type":14,"tag":85,"props":1502,"children":1503},{"style":184},[1504],{"type":20,"value":1505}," resolve_statement",{"type":14,"tag":85,"props":1507,"children":1508},{"style":98},[1509],{"type":20,"value":1510},"(statement",{"type":14,"tag":85,"props":1512,"children":1513},{"style":92},[1514],{"type":20,"value":952},{"type":14,"tag":85,"props":1516,"children":1517},{"style":92},[1518],{"type":20,"value":957},{"type":14,"tag":85,"props":1520,"children":1521},{"style":184},[1522],{"type":20,"value":962},{"type":14,"tag":85,"props":1524,"children":1525},{"style":92},[1526],{"type":20,"value":667},{"type":14,"tag":85,"props":1528,"children":1529},{"style":184},[1530],{"type":20,"value":332},{"type":14,"tag":85,"props":1532,"children":1533},{"style":98},[1534],{"type":20,"value":738},{"type":14,"tag":85,"props":1536,"children":1537},{"style":92},[1538],{"type":20,"value":743},{"type":14,"tag":85,"props":1540,"children":1541},{"style":184},[1542],{"type":20,"value":984},{"type":14,"tag":85,"props":1544,"children":1545},{"style":92},[1546],{"type":20,"value":667},{"type":14,"tag":85,"props":1548,"children":1549},{"style":184},[1550],{"type":20,"value":993},{"type":14,"tag":85,"props":1552,"children":1553},{"style":98},[1554],{"type":20,"value":1347},{"type":14,"tag":85,"props":1556,"children":1557},{"style":92},[1558],{"type":20,"value":667},{"type":14,"tag":85,"props":1560,"children":1561},{"style":184},[1562],{"type":20,"value":332},{"type":14,"tag":85,"props":1564,"children":1565},{"style":98},[1566],{"type":20,"value":1007},{"type":14,"tag":85,"props":1568,"children":1569},{"class":87,"line":419},[1570,1574],{"type":14,"tag":85,"props":1571,"children":1572},{"style":92},[1573],{"type":20,"value":1015},{"type":14,"tag":85,"props":1575,"children":1576},{"style":98},[1577],{"type":20,"value":1578}," statement {\n",{"type":14,"tag":85,"props":1580,"children":1581},{"class":87,"line":427},[1582,1586,1590,1594,1598,1603,1608,1612],{"type":14,"tag":85,"props":1583,"children":1584},{"style":184},[1585],{"type":20,"value":1028},{"type":14,"tag":85,"props":1587,"children":1588},{"style":92},[1589],{"type":20,"value":667},{"type":14,"tag":85,"props":1591,"children":1592},{"style":184},[1593],{"type":20,"value":332},{"type":14,"tag":85,"props":1595,"children":1596},{"style":92},[1597],{"type":20,"value":667},{"type":14,"tag":85,"props":1599,"children":1600},{"style":184},[1601],{"type":20,"value":1602},"Print",{"type":14,"tag":85,"props":1604,"children":1605},{"style":98},[1606],{"type":20,"value":1607},"(expression) ",{"type":14,"tag":85,"props":1609,"children":1610},{"style":92},[1611],{"type":20,"value":795},{"type":14,"tag":85,"props":1613,"children":1614},{"style":98},[1615],{"type":20,"value":384},{"type":14,"tag":85,"props":1617,"children":1618},{"class":87,"line":443},[1619,1624,1629,1633,1637,1641,1645],{"type":14,"tag":85,"props":1620,"children":1621},{"style":92},[1622],{"type":20,"value":1623},"            let",{"type":14,"tag":85,"props":1625,"children":1626},{"style":98},[1627],{"type":20,"value":1628}," print_statement ",{"type":14,"tag":85,"props":1630,"children":1631},{"style":92},[1632],{"type":20,"value":162},{"type":14,"tag":85,"props":1634,"children":1635},{"style":184},[1636],{"type":20,"value":1298},{"type":14,"tag":85,"props":1638,"children":1639},{"style":98},[1640],{"type":20,"value":1385},{"type":14,"tag":85,"props":1642,"children":1643},{"style":92},[1644],{"type":20,"value":1390},{"type":14,"tag":85,"props":1646,"children":1647},{"style":98},[1648],{"type":20,"value":1395},{"type":14,"tag":85,"props":1650,"children":1651},{"class":87,"line":464},[1652],{"type":14,"tag":85,"props":1653,"children":1654},{"emptyLinePlaceholder":268},[1655],{"type":20,"value":271},{"type":14,"tag":85,"props":1657,"children":1658},{"class":87,"line":486},[1659,1664,1668,1672,1676,1680,1684,1688],{"type":14,"tag":85,"props":1660,"children":1661},{"style":184},[1662],{"type":20,"value":1663},"            Ok",{"type":14,"tag":85,"props":1665,"children":1666},{"style":98},[1667],{"type":20,"value":192},{"type":14,"tag":85,"props":1669,"children":1670},{"style":184},[1671],{"type":20,"value":206},{"type":14,"tag":85,"props":1673,"children":1674},{"style":92},[1675],{"type":20,"value":667},{"type":14,"tag":85,"props":1677,"children":1678},{"style":184},[1679],{"type":20,"value":332},{"type":14,"tag":85,"props":1681,"children":1682},{"style":92},[1683],{"type":20,"value":667},{"type":14,"tag":85,"props":1685,"children":1686},{"style":184},[1687],{"type":20,"value":1602},{"type":14,"tag":85,"props":1689,"children":1690},{"style":98},[1691],{"type":20,"value":1692},"(print_statement))\n",{"type":14,"tag":85,"props":1694,"children":1695},{"class":87,"line":494},[1696],{"type":14,"tag":85,"props":1697,"children":1698},{"style":98},[1699],{"type":20,"value":813},{"type":14,"tag":85,"props":1701,"children":1702},{"class":87,"line":502},[1703],{"type":14,"tag":85,"props":1704,"children":1705},{"style":98},[1706],{"type":20,"value":821},{"type":14,"tag":85,"props":1708,"children":1709},{"class":87,"line":518},[1710],{"type":14,"tag":85,"props":1711,"children":1712},{"style":98},[1713],{"type":20,"value":416},{"type":14,"tag":85,"props":1715,"children":1716},{"class":87,"line":539},[1717],{"type":14,"tag":85,"props":1718,"children":1719},{"emptyLinePlaceholder":268},[1720],{"type":20,"value":271},{"type":14,"tag":85,"props":1722,"children":1723},{"class":87,"line":561},[1724,1728,1733,1738,1743,1747,1751,1755,1759,1764,1768,1772,1776,1780,1784,1788,1792,1796],{"type":14,"tag":85,"props":1725,"children":1726},{"style":92},[1727],{"type":20,"value":299},{"type":14,"tag":85,"props":1729,"children":1730},{"style":92},[1731],{"type":20,"value":1732}," fn",{"type":14,"tag":85,"props":1734,"children":1735},{"style":184},[1736],{"type":20,"value":1737}," resolve_module",{"type":14,"tag":85,"props":1739,"children":1740},{"style":98},[1741],{"type":20,"value":1742},"(module",{"type":14,"tag":85,"props":1744,"children":1745},{"style":92},[1746],{"type":20,"value":952},{"type":14,"tag":85,"props":1748,"children":1749},{"style":92},[1750],{"type":20,"value":957},{"type":14,"tag":85,"props":1752,"children":1753},{"style":184},[1754],{"type":20,"value":962},{"type":14,"tag":85,"props":1756,"children":1757},{"style":92},[1758],{"type":20,"value":667},{"type":14,"tag":85,"props":1760,"children":1761},{"style":184},[1762],{"type":20,"value":1763},"Module",{"type":14,"tag":85,"props":1765,"children":1766},{"style":98},[1767],{"type":20,"value":738},{"type":14,"tag":85,"props":1769,"children":1770},{"style":92},[1771],{"type":20,"value":743},{"type":14,"tag":85,"props":1773,"children":1774},{"style":184},[1775],{"type":20,"value":984},{"type":14,"tag":85,"props":1777,"children":1778},{"style":92},[1779],{"type":20,"value":667},{"type":14,"tag":85,"props":1781,"children":1782},{"style":184},[1783],{"type":20,"value":993},{"type":14,"tag":85,"props":1785,"children":1786},{"style":98},[1787],{"type":20,"value":1347},{"type":14,"tag":85,"props":1789,"children":1790},{"style":92},[1791],{"type":20,"value":667},{"type":14,"tag":85,"props":1793,"children":1794},{"style":184},[1795],{"type":20,"value":1763},{"type":14,"tag":85,"props":1797,"children":1798},{"style":98},[1799],{"type":20,"value":1007},{"type":14,"tag":85,"props":1801,"children":1803},{"class":87,"line":1802},20,[1804,1808,1813,1818,1822,1826,1830,1835],{"type":14,"tag":85,"props":1805,"children":1806},{"style":92},[1807],{"type":20,"value":1367},{"type":14,"tag":85,"props":1809,"children":1810},{"style":92},[1811],{"type":20,"value":1812}," mut",{"type":14,"tag":85,"props":1814,"children":1815},{"style":98},[1816],{"type":20,"value":1817}," ir_statements ",{"type":14,"tag":85,"props":1819,"children":1820},{"style":92},[1821],{"type":20,"value":162},{"type":14,"tag":85,"props":1823,"children":1824},{"style":184},[1825],{"type":20,"value":322},{"type":14,"tag":85,"props":1827,"children":1828},{"style":92},[1829],{"type":20,"value":667},{"type":14,"tag":85,"props":1831,"children":1832},{"style":184},[1833],{"type":20,"value":1834},"new",{"type":14,"tag":85,"props":1836,"children":1837},{"style":98},[1838],{"type":20,"value":1839},"();\n",{"type":14,"tag":85,"props":1841,"children":1843},{"class":87,"line":1842},21,[1844],{"type":14,"tag":85,"props":1845,"children":1846},{"emptyLinePlaceholder":268},[1847],{"type":20,"value":271},{"type":14,"tag":85,"props":1849,"children":1851},{"class":87,"line":1850},22,[1852,1857,1862,1867,1871,1876,1880,1885],{"type":14,"tag":85,"props":1853,"children":1854},{"style":92},[1855],{"type":20,"value":1856},"    for",{"type":14,"tag":85,"props":1858,"children":1859},{"style":98},[1860],{"type":20,"value":1861}," statement ",{"type":14,"tag":85,"props":1863,"children":1864},{"style":92},[1865],{"type":20,"value":1866},"in",{"type":14,"tag":85,"props":1868,"children":1869},{"style":92},[1870],{"type":20,"value":957},{"type":14,"tag":85,"props":1872,"children":1873},{"style":98},[1874],{"type":20,"value":1875},"module",{"type":14,"tag":85,"props":1877,"children":1878},{"style":92},[1879],{"type":20,"value":106},{"type":14,"tag":85,"props":1881,"children":1882},{"style":730},[1883],{"type":20,"value":1884},"0",{"type":14,"tag":85,"props":1886,"children":1887},{"style":98},[1888],{"type":20,"value":384},{"type":14,"tag":85,"props":1890,"children":1892},{"class":87,"line":1891},23,[1893,1898,1903,1907,1911,1916,1920],{"type":14,"tag":85,"props":1894,"children":1895},{"style":92},[1896],{"type":20,"value":1897},"        let",{"type":14,"tag":85,"props":1899,"children":1900},{"style":98},[1901],{"type":20,"value":1902}," ir_statement ",{"type":14,"tag":85,"props":1904,"children":1905},{"style":92},[1906],{"type":20,"value":162},{"type":14,"tag":85,"props":1908,"children":1909},{"style":184},[1910],{"type":20,"value":1505},{"type":14,"tag":85,"props":1912,"children":1913},{"style":98},[1914],{"type":20,"value":1915},"(statement)",{"type":14,"tag":85,"props":1917,"children":1918},{"style":92},[1919],{"type":20,"value":1390},{"type":14,"tag":85,"props":1921,"children":1922},{"style":98},[1923],{"type":20,"value":1395},{"type":14,"tag":85,"props":1925,"children":1927},{"class":87,"line":1926},24,[1928],{"type":14,"tag":85,"props":1929,"children":1930},{"emptyLinePlaceholder":268},[1931],{"type":20,"value":271},{"type":14,"tag":85,"props":1933,"children":1935},{"class":87,"line":1934},25,[1936,1941,1945,1950],{"type":14,"tag":85,"props":1937,"children":1938},{"style":98},[1939],{"type":20,"value":1940},"        ir_statements",{"type":14,"tag":85,"props":1942,"children":1943},{"style":92},[1944],{"type":20,"value":106},{"type":14,"tag":85,"props":1946,"children":1947},{"style":184},[1948],{"type":20,"value":1949},"push",{"type":14,"tag":85,"props":1951,"children":1952},{"style":98},[1953],{"type":20,"value":1954},"(ir_statement);\n",{"type":14,"tag":85,"props":1956,"children":1958},{"class":87,"line":1957},26,[1959],{"type":14,"tag":85,"props":1960,"children":1961},{"style":98},[1962],{"type":20,"value":821},{"type":14,"tag":85,"props":1964,"children":1966},{"class":87,"line":1965},27,[1967],{"type":14,"tag":85,"props":1968,"children":1969},{"emptyLinePlaceholder":268},[1970],{"type":20,"value":271},{"type":14,"tag":85,"props":1972,"children":1974},{"class":87,"line":1973},28,[1975,1980,1984,1988,1992,1996],{"type":14,"tag":85,"props":1976,"children":1977},{"style":184},[1978],{"type":20,"value":1979},"    Ok",{"type":14,"tag":85,"props":1981,"children":1982},{"style":98},[1983],{"type":20,"value":192},{"type":14,"tag":85,"props":1985,"children":1986},{"style":184},[1987],{"type":20,"value":206},{"type":14,"tag":85,"props":1989,"children":1990},{"style":92},[1991],{"type":20,"value":667},{"type":14,"tag":85,"props":1993,"children":1994},{"style":184},[1995],{"type":20,"value":1763},{"type":14,"tag":85,"props":1997,"children":1998},{"style":98},[1999],{"type":20,"value":2000},"(ir_statements))\n",{"type":14,"tag":85,"props":2002,"children":2004},{"class":87,"line":2003},29,[2005],{"type":14,"tag":85,"props":2006,"children":2007},{"style":98},[2008],{"type":20,"value":416},{"type":14,"tag":22,"props":2010,"children":2011},{},[2012],{"type":20,"value":2013},"This should also be really clear, and a bit similar to the parsing. And in a way, we are just \"parsing\" the AST into an IR.\nNow that we have this let's try to print it out!",{"type":14,"tag":75,"props":2015,"children":2017},{"code":2016,"language":78,"meta":7,"className":79,"style":7},"// lib.rs\n\npub fn build(file_name: &str, options: CompilerOptions) -> anyhow::Result\u003C()> {\n    let code = std::fs::read_to_string(file_name).context(\"Reading input file\")?;\n\n    let ast = parsing::parse(&code, &options).context(\"Parsing input file\")?;\n    let ir = type_analyzer::resolve_module(&ast).context(\"Resolving types\")?;\n\n    if options.output_ir {\n        println!(\"{ir:#?}\");\n    }\n\n    Ok(())\n}\n",[2018],{"type":14,"tag":28,"props":2019,"children":2020},{"__ignoreMap":7},[2021,2029,2036,2109,2184,2191,2272,2344,2351,2373,2394,2401,2408,2420],{"type":14,"tag":85,"props":2022,"children":2023},{"class":87,"line":88},[2024],{"type":14,"tag":85,"props":2025,"children":2026},{"style":259},[2027],{"type":20,"value":2028},"// lib.rs\n",{"type":14,"tag":85,"props":2030,"children":2031},{"class":87,"line":170},[2032],{"type":14,"tag":85,"props":2033,"children":2034},{"emptyLinePlaceholder":268},[2035],{"type":20,"value":271},{"type":14,"tag":85,"props":2037,"children":2038},{"class":87,"line":274},[2039,2043,2047,2052,2057,2061,2065,2070,2075,2079,2084,2088,2092,2096,2100,2104],{"type":14,"tag":85,"props":2040,"children":2041},{"style":92},[2042],{"type":20,"value":299},{"type":14,"tag":85,"props":2044,"children":2045},{"style":92},[2046],{"type":20,"value":1732},{"type":14,"tag":85,"props":2048,"children":2049},{"style":184},[2050],{"type":20,"value":2051}," build",{"type":14,"tag":85,"props":2053,"children":2054},{"style":98},[2055],{"type":20,"value":2056},"(file_name",{"type":14,"tag":85,"props":2058,"children":2059},{"style":92},[2060],{"type":20,"value":952},{"type":14,"tag":85,"props":2062,"children":2063},{"style":92},[2064],{"type":20,"value":957},{"type":14,"tag":85,"props":2066,"children":2067},{"style":184},[2068],{"type":20,"value":2069},"str",{"type":14,"tag":85,"props":2071,"children":2072},{"style":98},[2073],{"type":20,"value":2074},", options",{"type":14,"tag":85,"props":2076,"children":2077},{"style":92},[2078],{"type":20,"value":952},{"type":14,"tag":85,"props":2080,"children":2081},{"style":184},[2082],{"type":20,"value":2083}," CompilerOptions",{"type":14,"tag":85,"props":2085,"children":2086},{"style":98},[2087],{"type":20,"value":738},{"type":14,"tag":85,"props":2089,"children":2090},{"style":92},[2091],{"type":20,"value":743},{"type":14,"tag":85,"props":2093,"children":2094},{"style":184},[2095],{"type":20,"value":984},{"type":14,"tag":85,"props":2097,"children":2098},{"style":92},[2099],{"type":20,"value":667},{"type":14,"tag":85,"props":2101,"children":2102},{"style":184},[2103],{"type":20,"value":993},{"type":14,"tag":85,"props":2105,"children":2106},{"style":98},[2107],{"type":20,"value":2108},"\u003C()> {\n",{"type":14,"tag":85,"props":2110,"children":2111},{"class":87,"line":293},[2112,2116,2121,2125,2130,2134,2139,2143,2148,2153,2157,2162,2166,2171,2176,2180],{"type":14,"tag":85,"props":2113,"children":2114},{"style":92},[2115],{"type":20,"value":1367},{"type":14,"tag":85,"props":2117,"children":2118},{"style":98},[2119],{"type":20,"value":2120}," code ",{"type":14,"tag":85,"props":2122,"children":2123},{"style":92},[2124],{"type":20,"value":162},{"type":14,"tag":85,"props":2126,"children":2127},{"style":184},[2128],{"type":20,"value":2129}," std",{"type":14,"tag":85,"props":2131,"children":2132},{"style":92},[2133],{"type":20,"value":667},{"type":14,"tag":85,"props":2135,"children":2136},{"style":184},[2137],{"type":20,"value":2138},"fs",{"type":14,"tag":85,"props":2140,"children":2141},{"style":92},[2142],{"type":20,"value":667},{"type":14,"tag":85,"props":2144,"children":2145},{"style":184},[2146],{"type":20,"value":2147},"read_to_string",{"type":14,"tag":85,"props":2149,"children":2150},{"style":98},[2151],{"type":20,"value":2152},"(file_name)",{"type":14,"tag":85,"props":2154,"children":2155},{"style":92},[2156],{"type":20,"value":106},{"type":14,"tag":85,"props":2158,"children":2159},{"style":184},[2160],{"type":20,"value":2161},"context",{"type":14,"tag":85,"props":2163,"children":2164},{"style":98},[2165],{"type":20,"value":192},{"type":14,"tag":85,"props":2167,"children":2168},{"style":870},[2169],{"type":20,"value":2170},"\"Reading input file\"",{"type":14,"tag":85,"props":2172,"children":2173},{"style":98},[2174],{"type":20,"value":2175},")",{"type":14,"tag":85,"props":2177,"children":2178},{"style":92},[2179],{"type":20,"value":1390},{"type":14,"tag":85,"props":2181,"children":2182},{"style":98},[2183],{"type":20,"value":1395},{"type":14,"tag":85,"props":2185,"children":2186},{"class":87,"line":340},[2187],{"type":14,"tag":85,"props":2188,"children":2189},{"emptyLinePlaceholder":268},[2190],{"type":20,"value":271},{"type":14,"tag":85,"props":2192,"children":2193},{"class":87,"line":348},[2194,2198,2203,2207,2212,2216,2221,2225,2229,2234,2238,2243,2247,2251,2255,2260,2264,2268],{"type":14,"tag":85,"props":2195,"children":2196},{"style":92},[2197],{"type":20,"value":1367},{"type":14,"tag":85,"props":2199,"children":2200},{"style":98},[2201],{"type":20,"value":2202}," ast ",{"type":14,"tag":85,"props":2204,"children":2205},{"style":92},[2206],{"type":20,"value":162},{"type":14,"tag":85,"props":2208,"children":2209},{"style":184},[2210],{"type":20,"value":2211}," parsing",{"type":14,"tag":85,"props":2213,"children":2214},{"style":92},[2215],{"type":20,"value":667},{"type":14,"tag":85,"props":2217,"children":2218},{"style":184},[2219],{"type":20,"value":2220},"parse",{"type":14,"tag":85,"props":2222,"children":2223},{"style":98},[2224],{"type":20,"value":192},{"type":14,"tag":85,"props":2226,"children":2227},{"style":92},[2228],{"type":20,"value":727},{"type":14,"tag":85,"props":2230,"children":2231},{"style":98},[2232],{"type":20,"value":2233},"code, ",{"type":14,"tag":85,"props":2235,"children":2236},{"style":92},[2237],{"type":20,"value":727},{"type":14,"tag":85,"props":2239,"children":2240},{"style":98},[2241],{"type":20,"value":2242},"options)",{"type":14,"tag":85,"props":2244,"children":2245},{"style":92},[2246],{"type":20,"value":106},{"type":14,"tag":85,"props":2248,"children":2249},{"style":184},[2250],{"type":20,"value":2161},{"type":14,"tag":85,"props":2252,"children":2253},{"style":98},[2254],{"type":20,"value":192},{"type":14,"tag":85,"props":2256,"children":2257},{"style":870},[2258],{"type":20,"value":2259},"\"Parsing input file\"",{"type":14,"tag":85,"props":2261,"children":2262},{"style":98},[2263],{"type":20,"value":2175},{"type":14,"tag":85,"props":2265,"children":2266},{"style":92},[2267],{"type":20,"value":1390},{"type":14,"tag":85,"props":2269,"children":2270},{"style":98},[2271],{"type":20,"value":1395},{"type":14,"tag":85,"props":2273,"children":2274},{"class":87,"line":364},[2275,2279,2284,2288,2293,2297,2302,2306,2310,2315,2319,2323,2327,2332,2336,2340],{"type":14,"tag":85,"props":2276,"children":2277},{"style":92},[2278],{"type":20,"value":1367},{"type":14,"tag":85,"props":2280,"children":2281},{"style":98},[2282],{"type":20,"value":2283}," ir ",{"type":14,"tag":85,"props":2285,"children":2286},{"style":92},[2287],{"type":20,"value":162},{"type":14,"tag":85,"props":2289,"children":2290},{"style":184},[2291],{"type":20,"value":2292}," type_analyzer",{"type":14,"tag":85,"props":2294,"children":2295},{"style":92},[2296],{"type":20,"value":667},{"type":14,"tag":85,"props":2298,"children":2299},{"style":184},[2300],{"type":20,"value":2301},"resolve_module",{"type":14,"tag":85,"props":2303,"children":2304},{"style":98},[2305],{"type":20,"value":192},{"type":14,"tag":85,"props":2307,"children":2308},{"style":92},[2309],{"type":20,"value":727},{"type":14,"tag":85,"props":2311,"children":2312},{"style":98},[2313],{"type":20,"value":2314},"ast)",{"type":14,"tag":85,"props":2316,"children":2317},{"style":92},[2318],{"type":20,"value":106},{"type":14,"tag":85,"props":2320,"children":2321},{"style":184},[2322],{"type":20,"value":2161},{"type":14,"tag":85,"props":2324,"children":2325},{"style":98},[2326],{"type":20,"value":192},{"type":14,"tag":85,"props":2328,"children":2329},{"style":870},[2330],{"type":20,"value":2331},"\"Resolving types\"",{"type":14,"tag":85,"props":2333,"children":2334},{"style":98},[2335],{"type":20,"value":2175},{"type":14,"tag":85,"props":2337,"children":2338},{"style":92},[2339],{"type":20,"value":1390},{"type":14,"tag":85,"props":2341,"children":2342},{"style":98},[2343],{"type":20,"value":1395},{"type":14,"tag":85,"props":2345,"children":2346},{"class":87,"line":387},[2347],{"type":14,"tag":85,"props":2348,"children":2349},{"emptyLinePlaceholder":268},[2350],{"type":20,"value":271},{"type":14,"tag":85,"props":2352,"children":2353},{"class":87,"line":410},[2354,2359,2364,2368],{"type":14,"tag":85,"props":2355,"children":2356},{"style":92},[2357],{"type":20,"value":2358},"    if",{"type":14,"tag":85,"props":2360,"children":2361},{"style":98},[2362],{"type":20,"value":2363}," options",{"type":14,"tag":85,"props":2365,"children":2366},{"style":92},[2367],{"type":20,"value":106},{"type":14,"tag":85,"props":2369,"children":2370},{"style":98},[2371],{"type":20,"value":2372},"output_ir {\n",{"type":14,"tag":85,"props":2374,"children":2375},{"class":87,"line":419},[2376,2381,2385,2390],{"type":14,"tag":85,"props":2377,"children":2378},{"style":184},[2379],{"type":20,"value":2380},"        println!",{"type":14,"tag":85,"props":2382,"children":2383},{"style":98},[2384],{"type":20,"value":192},{"type":14,"tag":85,"props":2386,"children":2387},{"style":870},[2388],{"type":20,"value":2389},"\"{ir:#?}\"",{"type":14,"tag":85,"props":2391,"children":2392},{"style":98},[2393],{"type":20,"value":904},{"type":14,"tag":85,"props":2395,"children":2396},{"class":87,"line":427},[2397],{"type":14,"tag":85,"props":2398,"children":2399},{"style":98},[2400],{"type":20,"value":821},{"type":14,"tag":85,"props":2402,"children":2403},{"class":87,"line":443},[2404],{"type":14,"tag":85,"props":2405,"children":2406},{"emptyLinePlaceholder":268},[2407],{"type":20,"value":271},{"type":14,"tag":85,"props":2409,"children":2410},{"class":87,"line":464},[2411,2415],{"type":14,"tag":85,"props":2412,"children":2413},{"style":184},[2414],{"type":20,"value":1979},{"type":14,"tag":85,"props":2416,"children":2417},{"style":98},[2418],{"type":20,"value":2419},"(())\n",{"type":14,"tag":85,"props":2421,"children":2422},{"class":87,"line":486},[2423],{"type":14,"tag":85,"props":2424,"children":2425},{"style":98},[2426],{"type":20,"value":416},{"type":14,"tag":22,"props":2428,"children":2429},{},[2430,2432,2438],{"type":20,"value":2431},"Running our code now, ",{"type":14,"tag":28,"props":2433,"children":2435},{"className":2434},[],[2436],{"type":20,"value":2437},"cargo run -- run test.viv --output-ir",{"type":20,"value":2439}," you should get something like the following:",{"type":14,"tag":75,"props":2441,"children":2443},{"code":2442,"language":78,"meta":7,"className":79,"style":7},"Module(\n    [\n        Print(\n            Int(\n                Literal(\n                    1,\n                ),\n            ),\n        ),\n        Print(\n            Int(\n                Literal(\n                    2,\n                ),\n            ),\n        ),\n    ],\n)\n",[2444],{"type":14,"tag":28,"props":2445,"children":2446},{"__ignoreMap":7},[2447,2459,2467,2479,2491,2503,2515,2523,2531,2539,2550,2561,2572,2584,2591,2598,2605,2613],{"type":14,"tag":85,"props":2448,"children":2449},{"class":87,"line":88},[2450,2454],{"type":14,"tag":85,"props":2451,"children":2452},{"style":184},[2453],{"type":20,"value":1763},{"type":14,"tag":85,"props":2455,"children":2456},{"style":98},[2457],{"type":20,"value":2458},"(\n",{"type":14,"tag":85,"props":2460,"children":2461},{"class":87,"line":170},[2462],{"type":14,"tag":85,"props":2463,"children":2464},{"style":98},[2465],{"type":20,"value":2466},"    [\n",{"type":14,"tag":85,"props":2468,"children":2469},{"class":87,"line":274},[2470,2475],{"type":14,"tag":85,"props":2471,"children":2472},{"style":184},[2473],{"type":20,"value":2474},"        Print",{"type":14,"tag":85,"props":2476,"children":2477},{"style":98},[2478],{"type":20,"value":2458},{"type":14,"tag":85,"props":2480,"children":2481},{"class":87,"line":293},[2482,2487],{"type":14,"tag":85,"props":2483,"children":2484},{"style":184},[2485],{"type":20,"value":2486},"            Int",{"type":14,"tag":85,"props":2488,"children":2489},{"style":98},[2490],{"type":20,"value":2458},{"type":14,"tag":85,"props":2492,"children":2493},{"class":87,"line":340},[2494,2499],{"type":14,"tag":85,"props":2495,"children":2496},{"style":184},[2497],{"type":20,"value":2498},"                Literal",{"type":14,"tag":85,"props":2500,"children":2501},{"style":98},[2502],{"type":20,"value":2458},{"type":14,"tag":85,"props":2504,"children":2505},{"class":87,"line":348},[2506,2511],{"type":14,"tag":85,"props":2507,"children":2508},{"style":730},[2509],{"type":20,"value":2510},"                    1",{"type":14,"tag":85,"props":2512,"children":2513},{"style":98},[2514],{"type":20,"value":805},{"type":14,"tag":85,"props":2516,"children":2517},{"class":87,"line":364},[2518],{"type":14,"tag":85,"props":2519,"children":2520},{"style":98},[2521],{"type":20,"value":2522},"                ),\n",{"type":14,"tag":85,"props":2524,"children":2525},{"class":87,"line":387},[2526],{"type":14,"tag":85,"props":2527,"children":2528},{"style":98},[2529],{"type":20,"value":2530},"            ),\n",{"type":14,"tag":85,"props":2532,"children":2533},{"class":87,"line":410},[2534],{"type":14,"tag":85,"props":2535,"children":2536},{"style":98},[2537],{"type":20,"value":2538},"        ),\n",{"type":14,"tag":85,"props":2540,"children":2541},{"class":87,"line":419},[2542,2546],{"type":14,"tag":85,"props":2543,"children":2544},{"style":184},[2545],{"type":20,"value":2474},{"type":14,"tag":85,"props":2547,"children":2548},{"style":98},[2549],{"type":20,"value":2458},{"type":14,"tag":85,"props":2551,"children":2552},{"class":87,"line":427},[2553,2557],{"type":14,"tag":85,"props":2554,"children":2555},{"style":184},[2556],{"type":20,"value":2486},{"type":14,"tag":85,"props":2558,"children":2559},{"style":98},[2560],{"type":20,"value":2458},{"type":14,"tag":85,"props":2562,"children":2563},{"class":87,"line":443},[2564,2568],{"type":14,"tag":85,"props":2565,"children":2566},{"style":184},[2567],{"type":20,"value":2498},{"type":14,"tag":85,"props":2569,"children":2570},{"style":98},[2571],{"type":20,"value":2458},{"type":14,"tag":85,"props":2573,"children":2574},{"class":87,"line":464},[2575,2580],{"type":14,"tag":85,"props":2576,"children":2577},{"style":730},[2578],{"type":20,"value":2579},"                    2",{"type":14,"tag":85,"props":2581,"children":2582},{"style":98},[2583],{"type":20,"value":805},{"type":14,"tag":85,"props":2585,"children":2586},{"class":87,"line":486},[2587],{"type":14,"tag":85,"props":2588,"children":2589},{"style":98},[2590],{"type":20,"value":2522},{"type":14,"tag":85,"props":2592,"children":2593},{"class":87,"line":494},[2594],{"type":14,"tag":85,"props":2595,"children":2596},{"style":98},[2597],{"type":20,"value":2530},{"type":14,"tag":85,"props":2599,"children":2600},{"class":87,"line":502},[2601],{"type":14,"tag":85,"props":2602,"children":2603},{"style":98},[2604],{"type":20,"value":2538},{"type":14,"tag":85,"props":2606,"children":2607},{"class":87,"line":518},[2608],{"type":14,"tag":85,"props":2609,"children":2610},{"style":98},[2611],{"type":20,"value":2612},"    ],\n",{"type":14,"tag":85,"props":2614,"children":2615},{"class":87,"line":539},[2616],{"type":14,"tag":85,"props":2617,"children":2618},{"style":98},[2619],{"type":20,"value":2620},")\n",{"type":14,"tag":54,"props":2622,"children":2624},{"id":2623},"code-generation",[2625],{"type":20,"value":2626},"Code generation",{"type":14,"tag":22,"props":2628,"children":2629},{},[2630,2632,2638],{"type":20,"value":2631},"Now we are gonna turn this IR into some actual code! Using ",{"type":14,"tag":28,"props":2633,"children":2635},{"className":2634},[],[2636],{"type":20,"value":2637},"inkwell",{"type":20,"value":2639}," the same way we did in Part 1.",{"type":14,"tag":204,"props":2641,"children":2643},{"id":2642},"generating-llvm-ir",[2644],{"type":20,"value":2645},"Generating LLVM IR",{"type":14,"tag":75,"props":2647,"children":2649},{"code":2648,"language":78,"meta":7,"className":79,"style":7},"use inkwell::context::Context;\n\npub struct CodeGen\u003C'ctx> {\n    context: &'ctx Context,\n    module: inkwell::module::Module\u003C'ctx>,\n    builder: inkwell::builder::Builder\u003C'ctx>,\n    fpm: inkwell::passes::PassManager\u003Cinkwell::module::Module\u003C'ctx>>,\n}\n\nimpl\u003C'ctx> CodeGen\u003C'ctx> {\n    pub fn new(context: &'ctx Context) -> Self {\n        let module = context.create_module(\"main\");\n        let builder = context.create_builder();\n        let fpm = inkwell::passes::PassManager::create(());\n\n        fpm.add_ipsccp_pass();\n        fpm.add_new_gvn_pass();\n        fpm.add_ind_var_simplify_pass();\n        fpm.add_instruction_simplify_pass();\n        fpm.add_instruction_combining_pass();\n\n        fpm.add_constant_merge_pass();\n        fpm.add_global_optimizer_pass();\n\n        fpm.add_demote_memory_to_register_pass();\n        fpm.add_merge_functions_pass();\n        fpm.add_dead_arg_elimination_pass();\n        fpm.add_function_attrs_pass();\n        fpm.add_function_inlining_pass();\n        fpm.add_tail_call_elimination_pass();\n\n        fpm.add_licm_pass();\n        fpm.add_cfg_simplification_pass();\n\n        fpm.add_global_dce_pass();\n        fpm.add_aggressive_dce_pass();\n        fpm.add_loop_deletion_pass();\n\n        Self {\n            context: &context,\n            module,\n            builder,\n            fpm,\n        }\n    }\n}\n",[2650],{"type":14,"tag":28,"props":2651,"children":2652},{"__ignoreMap":7},[2653,2686,2693,2723,2757,2802,2848,2916,2923,2930,2967,3026,3069,3102,3152,3159,3180,3200,3220,3240,3260,3267,3287,3307,3314,3334,3354,3374,3394,3414,3435,3443,3464,3485,3493,3514,3535,3556,3564,3577,3599,3608,3617,3626,3634,3642],{"type":14,"tag":85,"props":2654,"children":2655},{"class":87,"line":88},[2656,2660,2665,2669,2673,2677,2682],{"type":14,"tag":85,"props":2657,"children":2658},{"style":92},[2659],{"type":20,"value":613},{"type":14,"tag":85,"props":2661,"children":2662},{"style":184},[2663],{"type":20,"value":2664}," inkwell",{"type":14,"tag":85,"props":2666,"children":2667},{"style":92},[2668],{"type":20,"value":667},{"type":14,"tag":85,"props":2670,"children":2671},{"style":184},[2672],{"type":20,"value":2161},{"type":14,"tag":85,"props":2674,"children":2675},{"style":92},[2676],{"type":20,"value":667},{"type":14,"tag":85,"props":2678,"children":2679},{"style":184},[2680],{"type":20,"value":2681},"Context",{"type":14,"tag":85,"props":2683,"children":2684},{"style":98},[2685],{"type":20,"value":1395},{"type":14,"tag":85,"props":2687,"children":2688},{"class":87,"line":170},[2689],{"type":14,"tag":85,"props":2690,"children":2691},{"emptyLinePlaceholder":268},[2692],{"type":20,"value":271},{"type":14,"tag":85,"props":2694,"children":2695},{"class":87,"line":274},[2696,2700,2704,2709,2714,2719],{"type":14,"tag":85,"props":2697,"children":2698},{"style":92},[2699],{"type":20,"value":299},{"type":14,"tag":85,"props":2701,"children":2702},{"style":92},[2703],{"type":20,"value":304},{"type":14,"tag":85,"props":2705,"children":2706},{"style":184},[2707],{"type":20,"value":2708}," CodeGen",{"type":14,"tag":85,"props":2710,"children":2711},{"style":98},[2712],{"type":20,"value":2713},"\u003C'",{"type":14,"tag":85,"props":2715,"children":2716},{"style":184},[2717],{"type":20,"value":2718},"ctx",{"type":14,"tag":85,"props":2720,"children":2721},{"style":98},[2722],{"type":20,"value":1007},{"type":14,"tag":85,"props":2724,"children":2725},{"class":87,"line":293},[2726,2731,2735,2739,2744,2748,2753],{"type":14,"tag":85,"props":2727,"children":2728},{"style":98},[2729],{"type":20,"value":2730},"    context",{"type":14,"tag":85,"props":2732,"children":2733},{"style":92},[2734],{"type":20,"value":952},{"type":14,"tag":85,"props":2736,"children":2737},{"style":92},[2738],{"type":20,"value":957},{"type":14,"tag":85,"props":2740,"children":2741},{"style":98},[2742],{"type":20,"value":2743},"'",{"type":14,"tag":85,"props":2745,"children":2746},{"style":184},[2747],{"type":20,"value":2718},{"type":14,"tag":85,"props":2749,"children":2750},{"style":184},[2751],{"type":20,"value":2752}," Context",{"type":14,"tag":85,"props":2754,"children":2755},{"style":98},[2756],{"type":20,"value":805},{"type":14,"tag":85,"props":2758,"children":2759},{"class":87,"line":340},[2760,2765,2769,2773,2777,2781,2785,2789,2793,2797],{"type":14,"tag":85,"props":2761,"children":2762},{"style":98},[2763],{"type":20,"value":2764},"    module",{"type":14,"tag":85,"props":2766,"children":2767},{"style":92},[2768],{"type":20,"value":952},{"type":14,"tag":85,"props":2770,"children":2771},{"style":184},[2772],{"type":20,"value":2664},{"type":14,"tag":85,"props":2774,"children":2775},{"style":92},[2776],{"type":20,"value":667},{"type":14,"tag":85,"props":2778,"children":2779},{"style":184},[2780],{"type":20,"value":1875},{"type":14,"tag":85,"props":2782,"children":2783},{"style":92},[2784],{"type":20,"value":667},{"type":14,"tag":85,"props":2786,"children":2787},{"style":184},[2788],{"type":20,"value":1763},{"type":14,"tag":85,"props":2790,"children":2791},{"style":98},[2792],{"type":20,"value":2713},{"type":14,"tag":85,"props":2794,"children":2795},{"style":184},[2796],{"type":20,"value":2718},{"type":14,"tag":85,"props":2798,"children":2799},{"style":98},[2800],{"type":20,"value":2801},">,\n",{"type":14,"tag":85,"props":2803,"children":2804},{"class":87,"line":348},[2805,2810,2814,2818,2822,2827,2831,2836,2840,2844],{"type":14,"tag":85,"props":2806,"children":2807},{"style":98},[2808],{"type":20,"value":2809},"    builder",{"type":14,"tag":85,"props":2811,"children":2812},{"style":92},[2813],{"type":20,"value":952},{"type":14,"tag":85,"props":2815,"children":2816},{"style":184},[2817],{"type":20,"value":2664},{"type":14,"tag":85,"props":2819,"children":2820},{"style":92},[2821],{"type":20,"value":667},{"type":14,"tag":85,"props":2823,"children":2824},{"style":184},[2825],{"type":20,"value":2826},"builder",{"type":14,"tag":85,"props":2828,"children":2829},{"style":92},[2830],{"type":20,"value":667},{"type":14,"tag":85,"props":2832,"children":2833},{"style":184},[2834],{"type":20,"value":2835},"Builder",{"type":14,"tag":85,"props":2837,"children":2838},{"style":98},[2839],{"type":20,"value":2713},{"type":14,"tag":85,"props":2841,"children":2842},{"style":184},[2843],{"type":20,"value":2718},{"type":14,"tag":85,"props":2845,"children":2846},{"style":98},[2847],{"type":20,"value":2801},{"type":14,"tag":85,"props":2849,"children":2850},{"class":87,"line":364},[2851,2856,2860,2864,2868,2873,2877,2882,2887,2891,2895,2899,2903,2907,2911],{"type":14,"tag":85,"props":2852,"children":2853},{"style":98},[2854],{"type":20,"value":2855},"    fpm",{"type":14,"tag":85,"props":2857,"children":2858},{"style":92},[2859],{"type":20,"value":952},{"type":14,"tag":85,"props":2861,"children":2862},{"style":184},[2863],{"type":20,"value":2664},{"type":14,"tag":85,"props":2865,"children":2866},{"style":92},[2867],{"type":20,"value":667},{"type":14,"tag":85,"props":2869,"children":2870},{"style":184},[2871],{"type":20,"value":2872},"passes",{"type":14,"tag":85,"props":2874,"children":2875},{"style":92},[2876],{"type":20,"value":667},{"type":14,"tag":85,"props":2878,"children":2879},{"style":184},[2880],{"type":20,"value":2881},"PassManager",{"type":14,"tag":85,"props":2883,"children":2884},{"style":98},[2885],{"type":20,"value":2886},"\u003Cinkwell",{"type":14,"tag":85,"props":2888,"children":2889},{"style":92},[2890],{"type":20,"value":667},{"type":14,"tag":85,"props":2892,"children":2893},{"style":98},[2894],{"type":20,"value":1875},{"type":14,"tag":85,"props":2896,"children":2897},{"style":92},[2898],{"type":20,"value":667},{"type":14,"tag":85,"props":2900,"children":2901},{"style":184},[2902],{"type":20,"value":1763},{"type":14,"tag":85,"props":2904,"children":2905},{"style":98},[2906],{"type":20,"value":2713},{"type":14,"tag":85,"props":2908,"children":2909},{"style":184},[2910],{"type":20,"value":2718},{"type":14,"tag":85,"props":2912,"children":2913},{"style":98},[2914],{"type":20,"value":2915},">>,\n",{"type":14,"tag":85,"props":2917,"children":2918},{"class":87,"line":387},[2919],{"type":14,"tag":85,"props":2920,"children":2921},{"style":98},[2922],{"type":20,"value":416},{"type":14,"tag":85,"props":2924,"children":2925},{"class":87,"line":410},[2926],{"type":14,"tag":85,"props":2927,"children":2928},{"emptyLinePlaceholder":268},[2929],{"type":20,"value":271},{"type":14,"tag":85,"props":2931,"children":2932},{"class":87,"line":419},[2933,2937,2941,2945,2950,2955,2959,2963],{"type":14,"tag":85,"props":2934,"children":2935},{"style":92},[2936],{"type":20,"value":697},{"type":14,"tag":85,"props":2938,"children":2939},{"style":98},[2940],{"type":20,"value":2713},{"type":14,"tag":85,"props":2942,"children":2943},{"style":184},[2944],{"type":20,"value":2718},{"type":14,"tag":85,"props":2946,"children":2947},{"style":98},[2948],{"type":20,"value":2949},"> ",{"type":14,"tag":85,"props":2951,"children":2952},{"style":184},[2953],{"type":20,"value":2954},"CodeGen",{"type":14,"tag":85,"props":2956,"children":2957},{"style":98},[2958],{"type":20,"value":2713},{"type":14,"tag":85,"props":2960,"children":2961},{"style":184},[2962],{"type":20,"value":2718},{"type":14,"tag":85,"props":2964,"children":2965},{"style":98},[2966],{"type":20,"value":1007},{"type":14,"tag":85,"props":2968,"children":2969},{"class":87,"line":427},[2970,2975,2979,2984,2989,2993,2997,3001,3005,3009,3013,3017,3022],{"type":14,"tag":85,"props":2971,"children":2972},{"style":92},[2973],{"type":20,"value":2974},"    pub",{"type":14,"tag":85,"props":2976,"children":2977},{"style":92},[2978],{"type":20,"value":1732},{"type":14,"tag":85,"props":2980,"children":2981},{"style":184},[2982],{"type":20,"value":2983}," new",{"type":14,"tag":85,"props":2985,"children":2986},{"style":98},[2987],{"type":20,"value":2988},"(context",{"type":14,"tag":85,"props":2990,"children":2991},{"style":92},[2992],{"type":20,"value":952},{"type":14,"tag":85,"props":2994,"children":2995},{"style":92},[2996],{"type":20,"value":957},{"type":14,"tag":85,"props":2998,"children":2999},{"style":98},[3000],{"type":20,"value":2743},{"type":14,"tag":85,"props":3002,"children":3003},{"style":184},[3004],{"type":20,"value":2718},{"type":14,"tag":85,"props":3006,"children":3007},{"style":184},[3008],{"type":20,"value":2752},{"type":14,"tag":85,"props":3010,"children":3011},{"style":98},[3012],{"type":20,"value":738},{"type":14,"tag":85,"props":3014,"children":3015},{"style":92},[3016],{"type":20,"value":743},{"type":14,"tag":85,"props":3018,"children":3019},{"style":730},[3020],{"type":20,"value":3021}," Self",{"type":14,"tag":85,"props":3023,"children":3024},{"style":98},[3025],{"type":20,"value":384},{"type":14,"tag":85,"props":3027,"children":3028},{"class":87,"line":443},[3029,3033,3038,3042,3047,3051,3056,3060,3065],{"type":14,"tag":85,"props":3030,"children":3031},{"style":92},[3032],{"type":20,"value":1897},{"type":14,"tag":85,"props":3034,"children":3035},{"style":98},[3036],{"type":20,"value":3037}," module ",{"type":14,"tag":85,"props":3039,"children":3040},{"style":92},[3041],{"type":20,"value":162},{"type":14,"tag":85,"props":3043,"children":3044},{"style":98},[3045],{"type":20,"value":3046}," context",{"type":14,"tag":85,"props":3048,"children":3049},{"style":92},[3050],{"type":20,"value":106},{"type":14,"tag":85,"props":3052,"children":3053},{"style":184},[3054],{"type":20,"value":3055},"create_module",{"type":14,"tag":85,"props":3057,"children":3058},{"style":98},[3059],{"type":20,"value":192},{"type":14,"tag":85,"props":3061,"children":3062},{"style":870},[3063],{"type":20,"value":3064},"\"main\"",{"type":14,"tag":85,"props":3066,"children":3067},{"style":98},[3068],{"type":20,"value":904},{"type":14,"tag":85,"props":3070,"children":3071},{"class":87,"line":464},[3072,3076,3081,3085,3089,3093,3098],{"type":14,"tag":85,"props":3073,"children":3074},{"style":92},[3075],{"type":20,"value":1897},{"type":14,"tag":85,"props":3077,"children":3078},{"style":98},[3079],{"type":20,"value":3080}," builder ",{"type":14,"tag":85,"props":3082,"children":3083},{"style":92},[3084],{"type":20,"value":162},{"type":14,"tag":85,"props":3086,"children":3087},{"style":98},[3088],{"type":20,"value":3046},{"type":14,"tag":85,"props":3090,"children":3091},{"style":92},[3092],{"type":20,"value":106},{"type":14,"tag":85,"props":3094,"children":3095},{"style":184},[3096],{"type":20,"value":3097},"create_builder",{"type":14,"tag":85,"props":3099,"children":3100},{"style":98},[3101],{"type":20,"value":1839},{"type":14,"tag":85,"props":3103,"children":3104},{"class":87,"line":486},[3105,3109,3114,3118,3122,3126,3130,3134,3138,3142,3147],{"type":14,"tag":85,"props":3106,"children":3107},{"style":92},[3108],{"type":20,"value":1897},{"type":14,"tag":85,"props":3110,"children":3111},{"style":98},[3112],{"type":20,"value":3113}," fpm ",{"type":14,"tag":85,"props":3115,"children":3116},{"style":92},[3117],{"type":20,"value":162},{"type":14,"tag":85,"props":3119,"children":3120},{"style":184},[3121],{"type":20,"value":2664},{"type":14,"tag":85,"props":3123,"children":3124},{"style":92},[3125],{"type":20,"value":667},{"type":14,"tag":85,"props":3127,"children":3128},{"style":184},[3129],{"type":20,"value":2872},{"type":14,"tag":85,"props":3131,"children":3132},{"style":92},[3133],{"type":20,"value":667},{"type":14,"tag":85,"props":3135,"children":3136},{"style":184},[3137],{"type":20,"value":2881},{"type":14,"tag":85,"props":3139,"children":3140},{"style":92},[3141],{"type":20,"value":667},{"type":14,"tag":85,"props":3143,"children":3144},{"style":184},[3145],{"type":20,"value":3146},"create",{"type":14,"tag":85,"props":3148,"children":3149},{"style":98},[3150],{"type":20,"value":3151},"(());\n",{"type":14,"tag":85,"props":3153,"children":3154},{"class":87,"line":494},[3155],{"type":14,"tag":85,"props":3156,"children":3157},{"emptyLinePlaceholder":268},[3158],{"type":20,"value":271},{"type":14,"tag":85,"props":3160,"children":3161},{"class":87,"line":502},[3162,3167,3171,3176],{"type":14,"tag":85,"props":3163,"children":3164},{"style":98},[3165],{"type":20,"value":3166},"        fpm",{"type":14,"tag":85,"props":3168,"children":3169},{"style":92},[3170],{"type":20,"value":106},{"type":14,"tag":85,"props":3172,"children":3173},{"style":184},[3174],{"type":20,"value":3175},"add_ipsccp_pass",{"type":14,"tag":85,"props":3177,"children":3178},{"style":98},[3179],{"type":20,"value":1839},{"type":14,"tag":85,"props":3181,"children":3182},{"class":87,"line":518},[3183,3187,3191,3196],{"type":14,"tag":85,"props":3184,"children":3185},{"style":98},[3186],{"type":20,"value":3166},{"type":14,"tag":85,"props":3188,"children":3189},{"style":92},[3190],{"type":20,"value":106},{"type":14,"tag":85,"props":3192,"children":3193},{"style":184},[3194],{"type":20,"value":3195},"add_new_gvn_pass",{"type":14,"tag":85,"props":3197,"children":3198},{"style":98},[3199],{"type":20,"value":1839},{"type":14,"tag":85,"props":3201,"children":3202},{"class":87,"line":539},[3203,3207,3211,3216],{"type":14,"tag":85,"props":3204,"children":3205},{"style":98},[3206],{"type":20,"value":3166},{"type":14,"tag":85,"props":3208,"children":3209},{"style":92},[3210],{"type":20,"value":106},{"type":14,"tag":85,"props":3212,"children":3213},{"style":184},[3214],{"type":20,"value":3215},"add_ind_var_simplify_pass",{"type":14,"tag":85,"props":3217,"children":3218},{"style":98},[3219],{"type":20,"value":1839},{"type":14,"tag":85,"props":3221,"children":3222},{"class":87,"line":561},[3223,3227,3231,3236],{"type":14,"tag":85,"props":3224,"children":3225},{"style":98},[3226],{"type":20,"value":3166},{"type":14,"tag":85,"props":3228,"children":3229},{"style":92},[3230],{"type":20,"value":106},{"type":14,"tag":85,"props":3232,"children":3233},{"style":184},[3234],{"type":20,"value":3235},"add_instruction_simplify_pass",{"type":14,"tag":85,"props":3237,"children":3238},{"style":98},[3239],{"type":20,"value":1839},{"type":14,"tag":85,"props":3241,"children":3242},{"class":87,"line":1802},[3243,3247,3251,3256],{"type":14,"tag":85,"props":3244,"children":3245},{"style":98},[3246],{"type":20,"value":3166},{"type":14,"tag":85,"props":3248,"children":3249},{"style":92},[3250],{"type":20,"value":106},{"type":14,"tag":85,"props":3252,"children":3253},{"style":184},[3254],{"type":20,"value":3255},"add_instruction_combining_pass",{"type":14,"tag":85,"props":3257,"children":3258},{"style":98},[3259],{"type":20,"value":1839},{"type":14,"tag":85,"props":3261,"children":3262},{"class":87,"line":1842},[3263],{"type":14,"tag":85,"props":3264,"children":3265},{"emptyLinePlaceholder":268},[3266],{"type":20,"value":271},{"type":14,"tag":85,"props":3268,"children":3269},{"class":87,"line":1850},[3270,3274,3278,3283],{"type":14,"tag":85,"props":3271,"children":3272},{"style":98},[3273],{"type":20,"value":3166},{"type":14,"tag":85,"props":3275,"children":3276},{"style":92},[3277],{"type":20,"value":106},{"type":14,"tag":85,"props":3279,"children":3280},{"style":184},[3281],{"type":20,"value":3282},"add_constant_merge_pass",{"type":14,"tag":85,"props":3284,"children":3285},{"style":98},[3286],{"type":20,"value":1839},{"type":14,"tag":85,"props":3288,"children":3289},{"class":87,"line":1891},[3290,3294,3298,3303],{"type":14,"tag":85,"props":3291,"children":3292},{"style":98},[3293],{"type":20,"value":3166},{"type":14,"tag":85,"props":3295,"children":3296},{"style":92},[3297],{"type":20,"value":106},{"type":14,"tag":85,"props":3299,"children":3300},{"style":184},[3301],{"type":20,"value":3302},"add_global_optimizer_pass",{"type":14,"tag":85,"props":3304,"children":3305},{"style":98},[3306],{"type":20,"value":1839},{"type":14,"tag":85,"props":3308,"children":3309},{"class":87,"line":1926},[3310],{"type":14,"tag":85,"props":3311,"children":3312},{"emptyLinePlaceholder":268},[3313],{"type":20,"value":271},{"type":14,"tag":85,"props":3315,"children":3316},{"class":87,"line":1934},[3317,3321,3325,3330],{"type":14,"tag":85,"props":3318,"children":3319},{"style":98},[3320],{"type":20,"value":3166},{"type":14,"tag":85,"props":3322,"children":3323},{"style":92},[3324],{"type":20,"value":106},{"type":14,"tag":85,"props":3326,"children":3327},{"style":184},[3328],{"type":20,"value":3329},"add_demote_memory_to_register_pass",{"type":14,"tag":85,"props":3331,"children":3332},{"style":98},[3333],{"type":20,"value":1839},{"type":14,"tag":85,"props":3335,"children":3336},{"class":87,"line":1957},[3337,3341,3345,3350],{"type":14,"tag":85,"props":3338,"children":3339},{"style":98},[3340],{"type":20,"value":3166},{"type":14,"tag":85,"props":3342,"children":3343},{"style":92},[3344],{"type":20,"value":106},{"type":14,"tag":85,"props":3346,"children":3347},{"style":184},[3348],{"type":20,"value":3349},"add_merge_functions_pass",{"type":14,"tag":85,"props":3351,"children":3352},{"style":98},[3353],{"type":20,"value":1839},{"type":14,"tag":85,"props":3355,"children":3356},{"class":87,"line":1965},[3357,3361,3365,3370],{"type":14,"tag":85,"props":3358,"children":3359},{"style":98},[3360],{"type":20,"value":3166},{"type":14,"tag":85,"props":3362,"children":3363},{"style":92},[3364],{"type":20,"value":106},{"type":14,"tag":85,"props":3366,"children":3367},{"style":184},[3368],{"type":20,"value":3369},"add_dead_arg_elimination_pass",{"type":14,"tag":85,"props":3371,"children":3372},{"style":98},[3373],{"type":20,"value":1839},{"type":14,"tag":85,"props":3375,"children":3376},{"class":87,"line":1973},[3377,3381,3385,3390],{"type":14,"tag":85,"props":3378,"children":3379},{"style":98},[3380],{"type":20,"value":3166},{"type":14,"tag":85,"props":3382,"children":3383},{"style":92},[3384],{"type":20,"value":106},{"type":14,"tag":85,"props":3386,"children":3387},{"style":184},[3388],{"type":20,"value":3389},"add_function_attrs_pass",{"type":14,"tag":85,"props":3391,"children":3392},{"style":98},[3393],{"type":20,"value":1839},{"type":14,"tag":85,"props":3395,"children":3396},{"class":87,"line":2003},[3397,3401,3405,3410],{"type":14,"tag":85,"props":3398,"children":3399},{"style":98},[3400],{"type":20,"value":3166},{"type":14,"tag":85,"props":3402,"children":3403},{"style":92},[3404],{"type":20,"value":106},{"type":14,"tag":85,"props":3406,"children":3407},{"style":184},[3408],{"type":20,"value":3409},"add_function_inlining_pass",{"type":14,"tag":85,"props":3411,"children":3412},{"style":98},[3413],{"type":20,"value":1839},{"type":14,"tag":85,"props":3415,"children":3417},{"class":87,"line":3416},30,[3418,3422,3426,3431],{"type":14,"tag":85,"props":3419,"children":3420},{"style":98},[3421],{"type":20,"value":3166},{"type":14,"tag":85,"props":3423,"children":3424},{"style":92},[3425],{"type":20,"value":106},{"type":14,"tag":85,"props":3427,"children":3428},{"style":184},[3429],{"type":20,"value":3430},"add_tail_call_elimination_pass",{"type":14,"tag":85,"props":3432,"children":3433},{"style":98},[3434],{"type":20,"value":1839},{"type":14,"tag":85,"props":3436,"children":3438},{"class":87,"line":3437},31,[3439],{"type":14,"tag":85,"props":3440,"children":3441},{"emptyLinePlaceholder":268},[3442],{"type":20,"value":271},{"type":14,"tag":85,"props":3444,"children":3446},{"class":87,"line":3445},32,[3447,3451,3455,3460],{"type":14,"tag":85,"props":3448,"children":3449},{"style":98},[3450],{"type":20,"value":3166},{"type":14,"tag":85,"props":3452,"children":3453},{"style":92},[3454],{"type":20,"value":106},{"type":14,"tag":85,"props":3456,"children":3457},{"style":184},[3458],{"type":20,"value":3459},"add_licm_pass",{"type":14,"tag":85,"props":3461,"children":3462},{"style":98},[3463],{"type":20,"value":1839},{"type":14,"tag":85,"props":3465,"children":3467},{"class":87,"line":3466},33,[3468,3472,3476,3481],{"type":14,"tag":85,"props":3469,"children":3470},{"style":98},[3471],{"type":20,"value":3166},{"type":14,"tag":85,"props":3473,"children":3474},{"style":92},[3475],{"type":20,"value":106},{"type":14,"tag":85,"props":3477,"children":3478},{"style":184},[3479],{"type":20,"value":3480},"add_cfg_simplification_pass",{"type":14,"tag":85,"props":3482,"children":3483},{"style":98},[3484],{"type":20,"value":1839},{"type":14,"tag":85,"props":3486,"children":3488},{"class":87,"line":3487},34,[3489],{"type":14,"tag":85,"props":3490,"children":3491},{"emptyLinePlaceholder":268},[3492],{"type":20,"value":271},{"type":14,"tag":85,"props":3494,"children":3496},{"class":87,"line":3495},35,[3497,3501,3505,3510],{"type":14,"tag":85,"props":3498,"children":3499},{"style":98},[3500],{"type":20,"value":3166},{"type":14,"tag":85,"props":3502,"children":3503},{"style":92},[3504],{"type":20,"value":106},{"type":14,"tag":85,"props":3506,"children":3507},{"style":184},[3508],{"type":20,"value":3509},"add_global_dce_pass",{"type":14,"tag":85,"props":3511,"children":3512},{"style":98},[3513],{"type":20,"value":1839},{"type":14,"tag":85,"props":3515,"children":3517},{"class":87,"line":3516},36,[3518,3522,3526,3531],{"type":14,"tag":85,"props":3519,"children":3520},{"style":98},[3521],{"type":20,"value":3166},{"type":14,"tag":85,"props":3523,"children":3524},{"style":92},[3525],{"type":20,"value":106},{"type":14,"tag":85,"props":3527,"children":3528},{"style":184},[3529],{"type":20,"value":3530},"add_aggressive_dce_pass",{"type":14,"tag":85,"props":3532,"children":3533},{"style":98},[3534],{"type":20,"value":1839},{"type":14,"tag":85,"props":3536,"children":3538},{"class":87,"line":3537},37,[3539,3543,3547,3552],{"type":14,"tag":85,"props":3540,"children":3541},{"style":98},[3542],{"type":20,"value":3166},{"type":14,"tag":85,"props":3544,"children":3545},{"style":92},[3546],{"type":20,"value":106},{"type":14,"tag":85,"props":3548,"children":3549},{"style":184},[3550],{"type":20,"value":3551},"add_loop_deletion_pass",{"type":14,"tag":85,"props":3553,"children":3554},{"style":98},[3555],{"type":20,"value":1839},{"type":14,"tag":85,"props":3557,"children":3559},{"class":87,"line":3558},38,[3560],{"type":14,"tag":85,"props":3561,"children":3562},{"emptyLinePlaceholder":268},[3563],{"type":20,"value":271},{"type":14,"tag":85,"props":3565,"children":3567},{"class":87,"line":3566},39,[3568,3573],{"type":14,"tag":85,"props":3569,"children":3570},{"style":730},[3571],{"type":20,"value":3572},"        Self",{"type":14,"tag":85,"props":3574,"children":3575},{"style":98},[3576],{"type":20,"value":384},{"type":14,"tag":85,"props":3578,"children":3580},{"class":87,"line":3579},40,[3581,3586,3590,3594],{"type":14,"tag":85,"props":3582,"children":3583},{"style":98},[3584],{"type":20,"value":3585},"            context",{"type":14,"tag":85,"props":3587,"children":3588},{"style":92},[3589],{"type":20,"value":952},{"type":14,"tag":85,"props":3591,"children":3592},{"style":92},[3593],{"type":20,"value":957},{"type":14,"tag":85,"props":3595,"children":3596},{"style":98},[3597],{"type":20,"value":3598},"context,\n",{"type":14,"tag":85,"props":3600,"children":3602},{"class":87,"line":3601},41,[3603],{"type":14,"tag":85,"props":3604,"children":3605},{"style":98},[3606],{"type":20,"value":3607},"            module,\n",{"type":14,"tag":85,"props":3609,"children":3611},{"class":87,"line":3610},42,[3612],{"type":14,"tag":85,"props":3613,"children":3614},{"style":98},[3615],{"type":20,"value":3616},"            builder,\n",{"type":14,"tag":85,"props":3618,"children":3620},{"class":87,"line":3619},43,[3621],{"type":14,"tag":85,"props":3622,"children":3623},{"style":98},[3624],{"type":20,"value":3625},"            fpm,\n",{"type":14,"tag":85,"props":3627,"children":3629},{"class":87,"line":3628},44,[3630],{"type":14,"tag":85,"props":3631,"children":3632},{"style":98},[3633],{"type":20,"value":813},{"type":14,"tag":85,"props":3635,"children":3637},{"class":87,"line":3636},45,[3638],{"type":14,"tag":85,"props":3639,"children":3640},{"style":98},[3641],{"type":20,"value":821},{"type":14,"tag":85,"props":3643,"children":3645},{"class":87,"line":3644},46,[3646],{"type":14,"tag":85,"props":3647,"children":3648},{"style":98},[3649],{"type":20,"value":416},{"type":14,"tag":22,"props":3651,"children":3652},{},[3653],{"type":20,"value":3654},"You will see a lot of the same structs here, with the addition of the fpm, it is the optimizer!\nWe don't have to write it ourselves! So instead of worrying about if we should optimize stuff, just don't first and see if LLVM does it for you, if it does, then great less work for us! So always try the simple stuff first, like we will output every variable on the heap, but LLVM will promote them to registers where it works.",{"type":14,"tag":75,"props":3656,"children":3658},{"code":3657,"language":78,"meta":7,"className":79,"style":7},"    fn int_type(&self) -> inkwell::types::IntType {\n        use crate::IntWidth;\n\n        match IntWidth {\n            8 => self.context.i8_type(),\n            16 => self.context.i16_type(),\n            32 => self.context.i32_type(),\n            64 => self.context.i64_type(),\n            128 => self.context.i128_type(),\n            _ => panic!(\"Invalid int width\"),\n        }\n    }\n",[3659],{"type":14,"tag":28,"props":3660,"children":3661},{"__ignoreMap":7},[3662,3720,3741,3748,3764,3803,3840,3877,3914,3951,3981,3988],{"type":14,"tag":85,"props":3663,"children":3664},{"class":87,"line":88},[3665,3669,3674,3678,3682,3686,3690,3694,3698,3702,3707,3711,3716],{"type":14,"tag":85,"props":3666,"children":3667},{"style":92},[3668],{"type":20,"value":713},{"type":14,"tag":85,"props":3670,"children":3671},{"style":184},[3672],{"type":20,"value":3673}," int_type",{"type":14,"tag":85,"props":3675,"children":3676},{"style":98},[3677],{"type":20,"value":192},{"type":14,"tag":85,"props":3679,"children":3680},{"style":92},[3681],{"type":20,"value":727},{"type":14,"tag":85,"props":3683,"children":3684},{"style":730},[3685],{"type":20,"value":733},{"type":14,"tag":85,"props":3687,"children":3688},{"style":98},[3689],{"type":20,"value":738},{"type":14,"tag":85,"props":3691,"children":3692},{"style":92},[3693],{"type":20,"value":743},{"type":14,"tag":85,"props":3695,"children":3696},{"style":184},[3697],{"type":20,"value":2664},{"type":14,"tag":85,"props":3699,"children":3700},{"style":92},[3701],{"type":20,"value":667},{"type":14,"tag":85,"props":3703,"children":3704},{"style":184},[3705],{"type":20,"value":3706},"types",{"type":14,"tag":85,"props":3708,"children":3709},{"style":92},[3710],{"type":20,"value":667},{"type":14,"tag":85,"props":3712,"children":3713},{"style":184},[3714],{"type":20,"value":3715},"IntType",{"type":14,"tag":85,"props":3717,"children":3718},{"style":98},[3719],{"type":20,"value":384},{"type":14,"tag":85,"props":3721,"children":3722},{"class":87,"line":170},[3723,3728,3732,3737],{"type":14,"tag":85,"props":3724,"children":3725},{"style":92},[3726],{"type":20,"value":3727},"        use",{"type":14,"tag":85,"props":3729,"children":3730},{"style":92},[3731],{"type":20,"value":618},{"type":14,"tag":85,"props":3733,"children":3734},{"style":184},[3735],{"type":20,"value":3736},"IntWidth",{"type":14,"tag":85,"props":3738,"children":3739},{"style":98},[3740],{"type":20,"value":1395},{"type":14,"tag":85,"props":3742,"children":3743},{"class":87,"line":274},[3744],{"type":14,"tag":85,"props":3745,"children":3746},{"emptyLinePlaceholder":268},[3747],{"type":20,"value":271},{"type":14,"tag":85,"props":3749,"children":3750},{"class":87,"line":293},[3751,3755,3760],{"type":14,"tag":85,"props":3752,"children":3753},{"style":92},[3754],{"type":20,"value":760},{"type":14,"tag":85,"props":3756,"children":3757},{"style":184},[3758],{"type":20,"value":3759}," IntWidth",{"type":14,"tag":85,"props":3761,"children":3762},{"style":98},[3763],{"type":20,"value":384},{"type":14,"tag":85,"props":3765,"children":3766},{"class":87,"line":340},[3767,3772,3777,3781,3785,3789,3793,3798],{"type":14,"tag":85,"props":3768,"children":3769},{"style":730},[3770],{"type":20,"value":3771},"            8",{"type":14,"tag":85,"props":3773,"children":3774},{"style":92},[3775],{"type":20,"value":3776}," =>",{"type":14,"tag":85,"props":3778,"children":3779},{"style":730},[3780],{"type":20,"value":765},{"type":14,"tag":85,"props":3782,"children":3783},{"style":92},[3784],{"type":20,"value":106},{"type":14,"tag":85,"props":3786,"children":3787},{"style":98},[3788],{"type":20,"value":2161},{"type":14,"tag":85,"props":3790,"children":3791},{"style":92},[3792],{"type":20,"value":106},{"type":14,"tag":85,"props":3794,"children":3795},{"style":184},[3796],{"type":20,"value":3797},"i8_type",{"type":14,"tag":85,"props":3799,"children":3800},{"style":98},[3801],{"type":20,"value":3802},"(),\n",{"type":14,"tag":85,"props":3804,"children":3805},{"class":87,"line":348},[3806,3811,3815,3819,3823,3827,3831,3836],{"type":14,"tag":85,"props":3807,"children":3808},{"style":730},[3809],{"type":20,"value":3810},"            16",{"type":14,"tag":85,"props":3812,"children":3813},{"style":92},[3814],{"type":20,"value":3776},{"type":14,"tag":85,"props":3816,"children":3817},{"style":730},[3818],{"type":20,"value":765},{"type":14,"tag":85,"props":3820,"children":3821},{"style":92},[3822],{"type":20,"value":106},{"type":14,"tag":85,"props":3824,"children":3825},{"style":98},[3826],{"type":20,"value":2161},{"type":14,"tag":85,"props":3828,"children":3829},{"style":92},[3830],{"type":20,"value":106},{"type":14,"tag":85,"props":3832,"children":3833},{"style":184},[3834],{"type":20,"value":3835},"i16_type",{"type":14,"tag":85,"props":3837,"children":3838},{"style":98},[3839],{"type":20,"value":3802},{"type":14,"tag":85,"props":3841,"children":3842},{"class":87,"line":364},[3843,3848,3852,3856,3860,3864,3868,3873],{"type":14,"tag":85,"props":3844,"children":3845},{"style":730},[3846],{"type":20,"value":3847},"            32",{"type":14,"tag":85,"props":3849,"children":3850},{"style":92},[3851],{"type":20,"value":3776},{"type":14,"tag":85,"props":3853,"children":3854},{"style":730},[3855],{"type":20,"value":765},{"type":14,"tag":85,"props":3857,"children":3858},{"style":92},[3859],{"type":20,"value":106},{"type":14,"tag":85,"props":3861,"children":3862},{"style":98},[3863],{"type":20,"value":2161},{"type":14,"tag":85,"props":3865,"children":3866},{"style":92},[3867],{"type":20,"value":106},{"type":14,"tag":85,"props":3869,"children":3870},{"style":184},[3871],{"type":20,"value":3872},"i32_type",{"type":14,"tag":85,"props":3874,"children":3875},{"style":98},[3876],{"type":20,"value":3802},{"type":14,"tag":85,"props":3878,"children":3879},{"class":87,"line":387},[3880,3885,3889,3893,3897,3901,3905,3910],{"type":14,"tag":85,"props":3881,"children":3882},{"style":730},[3883],{"type":20,"value":3884},"            64",{"type":14,"tag":85,"props":3886,"children":3887},{"style":92},[3888],{"type":20,"value":3776},{"type":14,"tag":85,"props":3890,"children":3891},{"style":730},[3892],{"type":20,"value":765},{"type":14,"tag":85,"props":3894,"children":3895},{"style":92},[3896],{"type":20,"value":106},{"type":14,"tag":85,"props":3898,"children":3899},{"style":98},[3900],{"type":20,"value":2161},{"type":14,"tag":85,"props":3902,"children":3903},{"style":92},[3904],{"type":20,"value":106},{"type":14,"tag":85,"props":3906,"children":3907},{"style":184},[3908],{"type":20,"value":3909},"i64_type",{"type":14,"tag":85,"props":3911,"children":3912},{"style":98},[3913],{"type":20,"value":3802},{"type":14,"tag":85,"props":3915,"children":3916},{"class":87,"line":410},[3917,3922,3926,3930,3934,3938,3942,3947],{"type":14,"tag":85,"props":3918,"children":3919},{"style":730},[3920],{"type":20,"value":3921},"            128",{"type":14,"tag":85,"props":3923,"children":3924},{"style":92},[3925],{"type":20,"value":3776},{"type":14,"tag":85,"props":3927,"children":3928},{"style":730},[3929],{"type":20,"value":765},{"type":14,"tag":85,"props":3931,"children":3932},{"style":92},[3933],{"type":20,"value":106},{"type":14,"tag":85,"props":3935,"children":3936},{"style":98},[3937],{"type":20,"value":2161},{"type":14,"tag":85,"props":3939,"children":3940},{"style":92},[3941],{"type":20,"value":106},{"type":14,"tag":85,"props":3943,"children":3944},{"style":184},[3945],{"type":20,"value":3946},"i128_type",{"type":14,"tag":85,"props":3948,"children":3949},{"style":98},[3950],{"type":20,"value":3802},{"type":14,"tag":85,"props":3952,"children":3953},{"class":87,"line":419},[3954,3959,3963,3968,3972,3977],{"type":14,"tag":85,"props":3955,"children":3956},{"style":98},[3957],{"type":20,"value":3958},"            _ ",{"type":14,"tag":85,"props":3960,"children":3961},{"style":92},[3962],{"type":20,"value":795},{"type":14,"tag":85,"props":3964,"children":3965},{"style":184},[3966],{"type":20,"value":3967}," panic!",{"type":14,"tag":85,"props":3969,"children":3970},{"style":98},[3971],{"type":20,"value":192},{"type":14,"tag":85,"props":3973,"children":3974},{"style":870},[3975],{"type":20,"value":3976},"\"Invalid int width\"",{"type":14,"tag":85,"props":3978,"children":3979},{"style":98},[3980],{"type":20,"value":407},{"type":14,"tag":85,"props":3982,"children":3983},{"class":87,"line":427},[3984],{"type":14,"tag":85,"props":3985,"children":3986},{"style":98},[3987],{"type":20,"value":813},{"type":14,"tag":85,"props":3989,"children":3990},{"class":87,"line":443},[3991],{"type":14,"tag":85,"props":3992,"children":3993},{"style":98},[3994],{"type":20,"value":821},{"type":14,"tag":22,"props":3996,"children":3997},{},[3998,4000,4006],{"type":20,"value":3999},"We also have this so the Int width in ",{"type":14,"tag":28,"props":4001,"children":4003},{"className":4002},[],[4004],{"type":20,"value":4005},"lib.rs",{"type":20,"value":4007}," is easier to work (this means we are restricted to these options.)\nNow we can actually do some code gen:",{"type":14,"tag":75,"props":4009,"children":4011},{"code":4010,"language":78,"meta":7,"className":79,"style":7},"    fn compile_libc_definitions(&mut self) {\n        let i32_type = self.context.i32_type();\n        let i8_type = self.context.i8_type();\n        let i8_ptr_type = i8_type.ptr_type(inkwell::AddressSpace::default());\n\n        let printf_type = i32_type.fn_type(&[i8_ptr_type.into()], true);\n        self.module.add_function(\"printf\", printf_type, None);\n    }\n\n    fn compile_int_expression(&self, expression: &ir::IntExpression) -> inkwell::values::IntValue {\n        match expression {\n            ir::IntExpression::Literal(int) => self.int_type().const_int(*int as u64, false),\n        }\n    }\n\n    fn compile_print_statement(&self, statement: &ir::PrintStatement) {\n        let printf = self.module.get_function(\"printf\").unwrap();\n\n        let format_string = match statement {\n            ir::PrintStatement::Int(_) => \"%d\\n\",\n        };\n        let format_string = self\n            .builder\n            .build_global_string_ptr(format_string, \"format_string\")\n            .as_pointer_value();\n\n        match statement {\n            ir::PrintStatement::Int(int_expression) => {\n                let int_value = self.compile_int_expression(int_expression);\n                self.builder.build_call(\n                    printf,\n                    &[format_string.into(), int_value.into()],\n                    \"printf\",\n                );\n            }\n        }\n    }\n\n    fn compile_statement(&self, statement: &ir::Statement) {\n        match statement {\n            ir::Statement::Print(print_statement) => self.compile_print_statement(print_statement),\n        }\n    }\n\n    pub fn compile_module(&mut self, module: &ir::Module) {\n        self.compile_libc_definitions();\n        // In the future we will have functions, for now put everything in main()\n\n        let i32_type = self.context.i32_type();\n        let main_type = i32_type.fn_type(&[], false);\n        let main = self.module.add_function(\"main\", main_type, None);\n        let main_block = self.context.append_basic_block(main, \"entry\");\n        self.builder.position_at_end(main_block);\n\n        for statement in &module.0 {\n            self.compile_statement(statement);\n        }\n\n        self.builder\n            .build_return(Some(&i32_type.const_int(0, false)));\n    }\n",[4012],{"type":14,"tag":28,"props":4013,"children":4014},{"__ignoreMap":7},[4015,4045,4085,4125,4186,4193,4259,4307,4314,4321,4404,4415,4510,4517,4524,4531,4584,4646,4653,4678,4728,4736,4756,4769,4795,4811,4818,4829,4864,4899,4928,4936,4975,4987,4995,5003,5010,5017,5024,5076,5087,5137,5144,5151,5158,5215,5235,5244,5252,5292,5342,5400,5452,5482,5490,5527,5550,5558,5566,5582,5645],{"type":14,"tag":85,"props":4016,"children":4017},{"class":87,"line":88},[4018,4022,4027,4031,4036,4040],{"type":14,"tag":85,"props":4019,"children":4020},{"style":92},[4021],{"type":20,"value":713},{"type":14,"tag":85,"props":4023,"children":4024},{"style":184},[4025],{"type":20,"value":4026}," compile_libc_definitions",{"type":14,"tag":85,"props":4028,"children":4029},{"style":98},[4030],{"type":20,"value":192},{"type":14,"tag":85,"props":4032,"children":4033},{"style":92},[4034],{"type":20,"value":4035},"&mut",{"type":14,"tag":85,"props":4037,"children":4038},{"style":730},[4039],{"type":20,"value":765},{"type":14,"tag":85,"props":4041,"children":4042},{"style":98},[4043],{"type":20,"value":4044},") {\n",{"type":14,"tag":85,"props":4046,"children":4047},{"class":87,"line":170},[4048,4052,4057,4061,4065,4069,4073,4077,4081],{"type":14,"tag":85,"props":4049,"children":4050},{"style":92},[4051],{"type":20,"value":1897},{"type":14,"tag":85,"props":4053,"children":4054},{"style":98},[4055],{"type":20,"value":4056}," i32_type ",{"type":14,"tag":85,"props":4058,"children":4059},{"style":92},[4060],{"type":20,"value":162},{"type":14,"tag":85,"props":4062,"children":4063},{"style":730},[4064],{"type":20,"value":765},{"type":14,"tag":85,"props":4066,"children":4067},{"style":92},[4068],{"type":20,"value":106},{"type":14,"tag":85,"props":4070,"children":4071},{"style":98},[4072],{"type":20,"value":2161},{"type":14,"tag":85,"props":4074,"children":4075},{"style":92},[4076],{"type":20,"value":106},{"type":14,"tag":85,"props":4078,"children":4079},{"style":184},[4080],{"type":20,"value":3872},{"type":14,"tag":85,"props":4082,"children":4083},{"style":98},[4084],{"type":20,"value":1839},{"type":14,"tag":85,"props":4086,"children":4087},{"class":87,"line":274},[4088,4092,4097,4101,4105,4109,4113,4117,4121],{"type":14,"tag":85,"props":4089,"children":4090},{"style":92},[4091],{"type":20,"value":1897},{"type":14,"tag":85,"props":4093,"children":4094},{"style":98},[4095],{"type":20,"value":4096}," i8_type ",{"type":14,"tag":85,"props":4098,"children":4099},{"style":92},[4100],{"type":20,"value":162},{"type":14,"tag":85,"props":4102,"children":4103},{"style":730},[4104],{"type":20,"value":765},{"type":14,"tag":85,"props":4106,"children":4107},{"style":92},[4108],{"type":20,"value":106},{"type":14,"tag":85,"props":4110,"children":4111},{"style":98},[4112],{"type":20,"value":2161},{"type":14,"tag":85,"props":4114,"children":4115},{"style":92},[4116],{"type":20,"value":106},{"type":14,"tag":85,"props":4118,"children":4119},{"style":184},[4120],{"type":20,"value":3797},{"type":14,"tag":85,"props":4122,"children":4123},{"style":98},[4124],{"type":20,"value":1839},{"type":14,"tag":85,"props":4126,"children":4127},{"class":87,"line":293},[4128,4132,4137,4141,4146,4150,4155,4159,4163,4167,4172,4176,4181],{"type":14,"tag":85,"props":4129,"children":4130},{"style":92},[4131],{"type":20,"value":1897},{"type":14,"tag":85,"props":4133,"children":4134},{"style":98},[4135],{"type":20,"value":4136}," i8_ptr_type ",{"type":14,"tag":85,"props":4138,"children":4139},{"style":92},[4140],{"type":20,"value":162},{"type":14,"tag":85,"props":4142,"children":4143},{"style":98},[4144],{"type":20,"value":4145}," i8_type",{"type":14,"tag":85,"props":4147,"children":4148},{"style":92},[4149],{"type":20,"value":106},{"type":14,"tag":85,"props":4151,"children":4152},{"style":184},[4153],{"type":20,"value":4154},"ptr_type",{"type":14,"tag":85,"props":4156,"children":4157},{"style":98},[4158],{"type":20,"value":192},{"type":14,"tag":85,"props":4160,"children":4161},{"style":184},[4162],{"type":20,"value":2637},{"type":14,"tag":85,"props":4164,"children":4165},{"style":92},[4166],{"type":20,"value":667},{"type":14,"tag":85,"props":4168,"children":4169},{"style":184},[4170],{"type":20,"value":4171},"AddressSpace",{"type":14,"tag":85,"props":4173,"children":4174},{"style":92},[4175],{"type":20,"value":667},{"type":14,"tag":85,"props":4177,"children":4178},{"style":184},[4179],{"type":20,"value":4180},"default",{"type":14,"tag":85,"props":4182,"children":4183},{"style":98},[4184],{"type":20,"value":4185},"());\n",{"type":14,"tag":85,"props":4187,"children":4188},{"class":87,"line":340},[4189],{"type":14,"tag":85,"props":4190,"children":4191},{"emptyLinePlaceholder":268},[4192],{"type":20,"value":271},{"type":14,"tag":85,"props":4194,"children":4195},{"class":87,"line":348},[4196,4200,4205,4209,4214,4218,4223,4227,4231,4236,4240,4245,4250,4255],{"type":14,"tag":85,"props":4197,"children":4198},{"style":92},[4199],{"type":20,"value":1897},{"type":14,"tag":85,"props":4201,"children":4202},{"style":98},[4203],{"type":20,"value":4204}," printf_type ",{"type":14,"tag":85,"props":4206,"children":4207},{"style":92},[4208],{"type":20,"value":162},{"type":14,"tag":85,"props":4210,"children":4211},{"style":98},[4212],{"type":20,"value":4213}," i32_type",{"type":14,"tag":85,"props":4215,"children":4216},{"style":92},[4217],{"type":20,"value":106},{"type":14,"tag":85,"props":4219,"children":4220},{"style":184},[4221],{"type":20,"value":4222},"fn_type",{"type":14,"tag":85,"props":4224,"children":4225},{"style":98},[4226],{"type":20,"value":192},{"type":14,"tag":85,"props":4228,"children":4229},{"style":92},[4230],{"type":20,"value":727},{"type":14,"tag":85,"props":4232,"children":4233},{"style":98},[4234],{"type":20,"value":4235},"[i8_ptr_type",{"type":14,"tag":85,"props":4237,"children":4238},{"style":92},[4239],{"type":20,"value":106},{"type":14,"tag":85,"props":4241,"children":4242},{"style":184},[4243],{"type":20,"value":4244},"into",{"type":14,"tag":85,"props":4246,"children":4247},{"style":98},[4248],{"type":20,"value":4249},"()], ",{"type":14,"tag":85,"props":4251,"children":4252},{"style":730},[4253],{"type":20,"value":4254},"true",{"type":14,"tag":85,"props":4256,"children":4257},{"style":98},[4258],{"type":20,"value":904},{"type":14,"tag":85,"props":4260,"children":4261},{"class":87,"line":364},[4262,4267,4271,4275,4279,4284,4288,4293,4298,4303],{"type":14,"tag":85,"props":4263,"children":4264},{"style":730},[4265],{"type":20,"value":4266},"        self",{"type":14,"tag":85,"props":4268,"children":4269},{"style":92},[4270],{"type":20,"value":106},{"type":14,"tag":85,"props":4272,"children":4273},{"style":98},[4274],{"type":20,"value":1875},{"type":14,"tag":85,"props":4276,"children":4277},{"style":92},[4278],{"type":20,"value":106},{"type":14,"tag":85,"props":4280,"children":4281},{"style":184},[4282],{"type":20,"value":4283},"add_function",{"type":14,"tag":85,"props":4285,"children":4286},{"style":98},[4287],{"type":20,"value":192},{"type":14,"tag":85,"props":4289,"children":4290},{"style":870},[4291],{"type":20,"value":4292},"\"printf\"",{"type":14,"tag":85,"props":4294,"children":4295},{"style":98},[4296],{"type":20,"value":4297},", printf_type, ",{"type":14,"tag":85,"props":4299,"children":4300},{"style":184},[4301],{"type":20,"value":4302},"None",{"type":14,"tag":85,"props":4304,"children":4305},{"style":98},[4306],{"type":20,"value":904},{"type":14,"tag":85,"props":4308,"children":4309},{"class":87,"line":387},[4310],{"type":14,"tag":85,"props":4311,"children":4312},{"style":98},[4313],{"type":20,"value":821},{"type":14,"tag":85,"props":4315,"children":4316},{"class":87,"line":410},[4317],{"type":14,"tag":85,"props":4318,"children":4319},{"emptyLinePlaceholder":268},[4320],{"type":20,"value":271},{"type":14,"tag":85,"props":4322,"children":4323},{"class":87,"line":419},[4324,4328,4333,4337,4341,4345,4350,4354,4358,4362,4366,4370,4374,4378,4382,4386,4391,4395,4400],{"type":14,"tag":85,"props":4325,"children":4326},{"style":92},[4327],{"type":20,"value":713},{"type":14,"tag":85,"props":4329,"children":4330},{"style":184},[4331],{"type":20,"value":4332}," compile_int_expression",{"type":14,"tag":85,"props":4334,"children":4335},{"style":98},[4336],{"type":20,"value":192},{"type":14,"tag":85,"props":4338,"children":4339},{"style":92},[4340],{"type":20,"value":727},{"type":14,"tag":85,"props":4342,"children":4343},{"style":730},[4344],{"type":20,"value":733},{"type":14,"tag":85,"props":4346,"children":4347},{"style":98},[4348],{"type":20,"value":4349},", expression",{"type":14,"tag":85,"props":4351,"children":4352},{"style":92},[4353],{"type":20,"value":952},{"type":14,"tag":85,"props":4355,"children":4356},{"style":92},[4357],{"type":20,"value":957},{"type":14,"tag":85,"props":4359,"children":4360},{"style":184},[4361],{"type":20,"value":206},{"type":14,"tag":85,"props":4363,"children":4364},{"style":92},[4365],{"type":20,"value":667},{"type":14,"tag":85,"props":4367,"children":4368},{"style":184},[4369],{"type":20,"value":479},{"type":14,"tag":85,"props":4371,"children":4372},{"style":98},[4373],{"type":20,"value":738},{"type":14,"tag":85,"props":4375,"children":4376},{"style":92},[4377],{"type":20,"value":743},{"type":14,"tag":85,"props":4379,"children":4380},{"style":184},[4381],{"type":20,"value":2664},{"type":14,"tag":85,"props":4383,"children":4384},{"style":92},[4385],{"type":20,"value":667},{"type":14,"tag":85,"props":4387,"children":4388},{"style":184},[4389],{"type":20,"value":4390},"values",{"type":14,"tag":85,"props":4392,"children":4393},{"style":92},[4394],{"type":20,"value":667},{"type":14,"tag":85,"props":4396,"children":4397},{"style":184},[4398],{"type":20,"value":4399},"IntValue",{"type":14,"tag":85,"props":4401,"children":4402},{"style":98},[4403],{"type":20,"value":384},{"type":14,"tag":85,"props":4405,"children":4406},{"class":87,"line":427},[4407,4411],{"type":14,"tag":85,"props":4408,"children":4409},{"style":92},[4410],{"type":20,"value":760},{"type":14,"tag":85,"props":4412,"children":4413},{"style":98},[4414],{"type":20,"value":1216},{"type":14,"tag":85,"props":4416,"children":4417},{"class":87,"line":443},[4418,4423,4427,4431,4435,4439,4443,4447,4451,4455,4460,4465,4469,4474,4478,4482,4487,4492,4497,4501,4506],{"type":14,"tag":85,"props":4419,"children":4420},{"style":184},[4421],{"type":20,"value":4422},"            ir",{"type":14,"tag":85,"props":4424,"children":4425},{"style":92},[4426],{"type":20,"value":667},{"type":14,"tag":85,"props":4428,"children":4429},{"style":184},[4430],{"type":20,"value":479},{"type":14,"tag":85,"props":4432,"children":4433},{"style":92},[4434],{"type":20,"value":667},{"type":14,"tag":85,"props":4436,"children":4437},{"style":184},[4438],{"type":20,"value":971},{"type":14,"tag":85,"props":4440,"children":4441},{"style":98},[4442],{"type":20,"value":1050},{"type":14,"tag":85,"props":4444,"children":4445},{"style":92},[4446],{"type":20,"value":795},{"type":14,"tag":85,"props":4448,"children":4449},{"style":730},[4450],{"type":20,"value":765},{"type":14,"tag":85,"props":4452,"children":4453},{"style":92},[4454],{"type":20,"value":106},{"type":14,"tag":85,"props":4456,"children":4457},{"style":184},[4458],{"type":20,"value":4459},"int_type",{"type":14,"tag":85,"props":4461,"children":4462},{"style":98},[4463],{"type":20,"value":4464},"()",{"type":14,"tag":85,"props":4466,"children":4467},{"style":92},[4468],{"type":20,"value":106},{"type":14,"tag":85,"props":4470,"children":4471},{"style":184},[4472],{"type":20,"value":4473},"const_int",{"type":14,"tag":85,"props":4475,"children":4476},{"style":98},[4477],{"type":20,"value":192},{"type":14,"tag":85,"props":4479,"children":4480},{"style":92},[4481],{"type":20,"value":1108},{"type":14,"tag":85,"props":4483,"children":4484},{"style":98},[4485],{"type":20,"value":4486},"int ",{"type":14,"tag":85,"props":4488,"children":4489},{"style":92},[4490],{"type":20,"value":4491},"as",{"type":14,"tag":85,"props":4493,"children":4494},{"style":184},[4495],{"type":20,"value":4496}," u64",{"type":14,"tag":85,"props":4498,"children":4499},{"style":98},[4500],{"type":20,"value":238},{"type":14,"tag":85,"props":4502,"children":4503},{"style":730},[4504],{"type":20,"value":4505},"false",{"type":14,"tag":85,"props":4507,"children":4508},{"style":98},[4509],{"type":20,"value":407},{"type":14,"tag":85,"props":4511,"children":4512},{"class":87,"line":464},[4513],{"type":14,"tag":85,"props":4514,"children":4515},{"style":98},[4516],{"type":20,"value":813},{"type":14,"tag":85,"props":4518,"children":4519},{"class":87,"line":486},[4520],{"type":14,"tag":85,"props":4521,"children":4522},{"style":98},[4523],{"type":20,"value":821},{"type":14,"tag":85,"props":4525,"children":4526},{"class":87,"line":494},[4527],{"type":14,"tag":85,"props":4528,"children":4529},{"emptyLinePlaceholder":268},[4530],{"type":20,"value":271},{"type":14,"tag":85,"props":4532,"children":4533},{"class":87,"line":502},[4534,4538,4543,4547,4551,4555,4560,4564,4568,4572,4576,4580],{"type":14,"tag":85,"props":4535,"children":4536},{"style":92},[4537],{"type":20,"value":713},{"type":14,"tag":85,"props":4539,"children":4540},{"style":184},[4541],{"type":20,"value":4542}," compile_print_statement",{"type":14,"tag":85,"props":4544,"children":4545},{"style":98},[4546],{"type":20,"value":192},{"type":14,"tag":85,"props":4548,"children":4549},{"style":92},[4550],{"type":20,"value":727},{"type":14,"tag":85,"props":4552,"children":4553},{"style":730},[4554],{"type":20,"value":733},{"type":14,"tag":85,"props":4556,"children":4557},{"style":98},[4558],{"type":20,"value":4559},", statement",{"type":14,"tag":85,"props":4561,"children":4562},{"style":92},[4563],{"type":20,"value":952},{"type":14,"tag":85,"props":4565,"children":4566},{"style":92},[4567],{"type":20,"value":957},{"type":14,"tag":85,"props":4569,"children":4570},{"style":184},[4571],{"type":20,"value":206},{"type":14,"tag":85,"props":4573,"children":4574},{"style":92},[4575],{"type":20,"value":667},{"type":14,"tag":85,"props":4577,"children":4578},{"style":184},[4579],{"type":20,"value":402},{"type":14,"tag":85,"props":4581,"children":4582},{"style":98},[4583],{"type":20,"value":4044},{"type":14,"tag":85,"props":4585,"children":4586},{"class":87,"line":518},[4587,4591,4596,4600,4604,4608,4612,4616,4621,4625,4629,4633,4637,4642],{"type":14,"tag":85,"props":4588,"children":4589},{"style":92},[4590],{"type":20,"value":1897},{"type":14,"tag":85,"props":4592,"children":4593},{"style":98},[4594],{"type":20,"value":4595}," printf ",{"type":14,"tag":85,"props":4597,"children":4598},{"style":92},[4599],{"type":20,"value":162},{"type":14,"tag":85,"props":4601,"children":4602},{"style":730},[4603],{"type":20,"value":765},{"type":14,"tag":85,"props":4605,"children":4606},{"style":92},[4607],{"type":20,"value":106},{"type":14,"tag":85,"props":4609,"children":4610},{"style":98},[4611],{"type":20,"value":1875},{"type":14,"tag":85,"props":4613,"children":4614},{"style":92},[4615],{"type":20,"value":106},{"type":14,"tag":85,"props":4617,"children":4618},{"style":184},[4619],{"type":20,"value":4620},"get_function",{"type":14,"tag":85,"props":4622,"children":4623},{"style":98},[4624],{"type":20,"value":192},{"type":14,"tag":85,"props":4626,"children":4627},{"style":870},[4628],{"type":20,"value":4292},{"type":14,"tag":85,"props":4630,"children":4631},{"style":98},[4632],{"type":20,"value":2175},{"type":14,"tag":85,"props":4634,"children":4635},{"style":92},[4636],{"type":20,"value":106},{"type":14,"tag":85,"props":4638,"children":4639},{"style":184},[4640],{"type":20,"value":4641},"unwrap",{"type":14,"tag":85,"props":4643,"children":4644},{"style":98},[4645],{"type":20,"value":1839},{"type":14,"tag":85,"props":4647,"children":4648},{"class":87,"line":539},[4649],{"type":14,"tag":85,"props":4650,"children":4651},{"emptyLinePlaceholder":268},[4652],{"type":20,"value":271},{"type":14,"tag":85,"props":4654,"children":4655},{"class":87,"line":561},[4656,4660,4665,4669,4674],{"type":14,"tag":85,"props":4657,"children":4658},{"style":92},[4659],{"type":20,"value":1897},{"type":14,"tag":85,"props":4661,"children":4662},{"style":98},[4663],{"type":20,"value":4664}," format_string ",{"type":14,"tag":85,"props":4666,"children":4667},{"style":92},[4668],{"type":20,"value":162},{"type":14,"tag":85,"props":4670,"children":4671},{"style":92},[4672],{"type":20,"value":4673}," match",{"type":14,"tag":85,"props":4675,"children":4676},{"style":98},[4677],{"type":20,"value":1578},{"type":14,"tag":85,"props":4679,"children":4680},{"class":87,"line":1802},[4681,4685,4689,4693,4697,4701,4705,4709,4714,4719,4724],{"type":14,"tag":85,"props":4682,"children":4683},{"style":184},[4684],{"type":20,"value":4422},{"type":14,"tag":85,"props":4686,"children":4687},{"style":92},[4688],{"type":20,"value":667},{"type":14,"tag":85,"props":4690,"children":4691},{"style":184},[4692],{"type":20,"value":402},{"type":14,"tag":85,"props":4694,"children":4695},{"style":92},[4696],{"type":20,"value":667},{"type":14,"tag":85,"props":4698,"children":4699},{"style":184},[4700],{"type":20,"value":577},{"type":14,"tag":85,"props":4702,"children":4703},{"style":98},[4704],{"type":20,"value":790},{"type":14,"tag":85,"props":4706,"children":4707},{"style":92},[4708],{"type":20,"value":795},{"type":14,"tag":85,"props":4710,"children":4711},{"style":870},[4712],{"type":20,"value":4713}," \"%d",{"type":14,"tag":85,"props":4715,"children":4716},{"style":730},[4717],{"type":20,"value":4718},"\\n",{"type":14,"tag":85,"props":4720,"children":4721},{"style":870},[4722],{"type":20,"value":4723},"\"",{"type":14,"tag":85,"props":4725,"children":4726},{"style":98},[4727],{"type":20,"value":805},{"type":14,"tag":85,"props":4729,"children":4730},{"class":87,"line":1842},[4731],{"type":14,"tag":85,"props":4732,"children":4733},{"style":98},[4734],{"type":20,"value":4735},"        };\n",{"type":14,"tag":85,"props":4737,"children":4738},{"class":87,"line":1850},[4739,4743,4747,4751],{"type":14,"tag":85,"props":4740,"children":4741},{"style":92},[4742],{"type":20,"value":1897},{"type":14,"tag":85,"props":4744,"children":4745},{"style":98},[4746],{"type":20,"value":4664},{"type":14,"tag":85,"props":4748,"children":4749},{"style":92},[4750],{"type":20,"value":162},{"type":14,"tag":85,"props":4752,"children":4753},{"style":730},[4754],{"type":20,"value":4755}," self\n",{"type":14,"tag":85,"props":4757,"children":4758},{"class":87,"line":1891},[4759,4764],{"type":14,"tag":85,"props":4760,"children":4761},{"style":92},[4762],{"type":20,"value":4763},"            .",{"type":14,"tag":85,"props":4765,"children":4766},{"style":98},[4767],{"type":20,"value":4768},"builder\n",{"type":14,"tag":85,"props":4770,"children":4771},{"class":87,"line":1926},[4772,4776,4781,4786,4791],{"type":14,"tag":85,"props":4773,"children":4774},{"style":92},[4775],{"type":20,"value":4763},{"type":14,"tag":85,"props":4777,"children":4778},{"style":184},[4779],{"type":20,"value":4780},"build_global_string_ptr",{"type":14,"tag":85,"props":4782,"children":4783},{"style":98},[4784],{"type":20,"value":4785},"(format_string, ",{"type":14,"tag":85,"props":4787,"children":4788},{"style":870},[4789],{"type":20,"value":4790},"\"format_string\"",{"type":14,"tag":85,"props":4792,"children":4793},{"style":98},[4794],{"type":20,"value":2620},{"type":14,"tag":85,"props":4796,"children":4797},{"class":87,"line":1934},[4798,4802,4807],{"type":14,"tag":85,"props":4799,"children":4800},{"style":92},[4801],{"type":20,"value":4763},{"type":14,"tag":85,"props":4803,"children":4804},{"style":184},[4805],{"type":20,"value":4806},"as_pointer_value",{"type":14,"tag":85,"props":4808,"children":4809},{"style":98},[4810],{"type":20,"value":1839},{"type":14,"tag":85,"props":4812,"children":4813},{"class":87,"line":1957},[4814],{"type":14,"tag":85,"props":4815,"children":4816},{"emptyLinePlaceholder":268},[4817],{"type":20,"value":271},{"type":14,"tag":85,"props":4819,"children":4820},{"class":87,"line":1965},[4821,4825],{"type":14,"tag":85,"props":4822,"children":4823},{"style":92},[4824],{"type":20,"value":760},{"type":14,"tag":85,"props":4826,"children":4827},{"style":98},[4828],{"type":20,"value":1578},{"type":14,"tag":85,"props":4830,"children":4831},{"class":87,"line":1973},[4832,4836,4840,4844,4848,4852,4856,4860],{"type":14,"tag":85,"props":4833,"children":4834},{"style":184},[4835],{"type":20,"value":4422},{"type":14,"tag":85,"props":4837,"children":4838},{"style":92},[4839],{"type":20,"value":667},{"type":14,"tag":85,"props":4841,"children":4842},{"style":184},[4843],{"type":20,"value":402},{"type":14,"tag":85,"props":4845,"children":4846},{"style":92},[4847],{"type":20,"value":667},{"type":14,"tag":85,"props":4849,"children":4850},{"style":184},[4851],{"type":20,"value":577},{"type":14,"tag":85,"props":4853,"children":4854},{"style":98},[4855],{"type":20,"value":1435},{"type":14,"tag":85,"props":4857,"children":4858},{"style":92},[4859],{"type":20,"value":795},{"type":14,"tag":85,"props":4861,"children":4862},{"style":98},[4863],{"type":20,"value":384},{"type":14,"tag":85,"props":4865,"children":4866},{"class":87,"line":2003},[4867,4872,4877,4881,4885,4889,4894],{"type":14,"tag":85,"props":4868,"children":4869},{"style":92},[4870],{"type":20,"value":4871},"                let",{"type":14,"tag":85,"props":4873,"children":4874},{"style":98},[4875],{"type":20,"value":4876}," int_value ",{"type":14,"tag":85,"props":4878,"children":4879},{"style":92},[4880],{"type":20,"value":162},{"type":14,"tag":85,"props":4882,"children":4883},{"style":730},[4884],{"type":20,"value":765},{"type":14,"tag":85,"props":4886,"children":4887},{"style":92},[4888],{"type":20,"value":106},{"type":14,"tag":85,"props":4890,"children":4891},{"style":184},[4892],{"type":20,"value":4893},"compile_int_expression",{"type":14,"tag":85,"props":4895,"children":4896},{"style":98},[4897],{"type":20,"value":4898},"(int_expression);\n",{"type":14,"tag":85,"props":4900,"children":4901},{"class":87,"line":3416},[4902,4907,4911,4915,4919,4924],{"type":14,"tag":85,"props":4903,"children":4904},{"style":730},[4905],{"type":20,"value":4906},"                self",{"type":14,"tag":85,"props":4908,"children":4909},{"style":92},[4910],{"type":20,"value":106},{"type":14,"tag":85,"props":4912,"children":4913},{"style":98},[4914],{"type":20,"value":2826},{"type":14,"tag":85,"props":4916,"children":4917},{"style":92},[4918],{"type":20,"value":106},{"type":14,"tag":85,"props":4920,"children":4921},{"style":184},[4922],{"type":20,"value":4923},"build_call",{"type":14,"tag":85,"props":4925,"children":4926},{"style":98},[4927],{"type":20,"value":2458},{"type":14,"tag":85,"props":4929,"children":4930},{"class":87,"line":3437},[4931],{"type":14,"tag":85,"props":4932,"children":4933},{"style":98},[4934],{"type":20,"value":4935},"                    printf,\n",{"type":14,"tag":85,"props":4937,"children":4938},{"class":87,"line":3445},[4939,4944,4949,4953,4957,4962,4966,4970],{"type":14,"tag":85,"props":4940,"children":4941},{"style":92},[4942],{"type":20,"value":4943},"                    &",{"type":14,"tag":85,"props":4945,"children":4946},{"style":98},[4947],{"type":20,"value":4948},"[format_string",{"type":14,"tag":85,"props":4950,"children":4951},{"style":92},[4952],{"type":20,"value":106},{"type":14,"tag":85,"props":4954,"children":4955},{"style":184},[4956],{"type":20,"value":4244},{"type":14,"tag":85,"props":4958,"children":4959},{"style":98},[4960],{"type":20,"value":4961},"(), int_value",{"type":14,"tag":85,"props":4963,"children":4964},{"style":92},[4965],{"type":20,"value":106},{"type":14,"tag":85,"props":4967,"children":4968},{"style":184},[4969],{"type":20,"value":4244},{"type":14,"tag":85,"props":4971,"children":4972},{"style":98},[4973],{"type":20,"value":4974},"()],\n",{"type":14,"tag":85,"props":4976,"children":4977},{"class":87,"line":3466},[4978,4983],{"type":14,"tag":85,"props":4979,"children":4980},{"style":870},[4981],{"type":20,"value":4982},"                    \"printf\"",{"type":14,"tag":85,"props":4984,"children":4985},{"style":98},[4986],{"type":20,"value":805},{"type":14,"tag":85,"props":4988,"children":4989},{"class":87,"line":3487},[4990],{"type":14,"tag":85,"props":4991,"children":4992},{"style":98},[4993],{"type":20,"value":4994},"                );\n",{"type":14,"tag":85,"props":4996,"children":4997},{"class":87,"line":3495},[4998],{"type":14,"tag":85,"props":4999,"children":5000},{"style":98},[5001],{"type":20,"value":5002},"            }\n",{"type":14,"tag":85,"props":5004,"children":5005},{"class":87,"line":3516},[5006],{"type":14,"tag":85,"props":5007,"children":5008},{"style":98},[5009],{"type":20,"value":813},{"type":14,"tag":85,"props":5011,"children":5012},{"class":87,"line":3537},[5013],{"type":14,"tag":85,"props":5014,"children":5015},{"style":98},[5016],{"type":20,"value":821},{"type":14,"tag":85,"props":5018,"children":5019},{"class":87,"line":3558},[5020],{"type":14,"tag":85,"props":5021,"children":5022},{"emptyLinePlaceholder":268},[5023],{"type":20,"value":271},{"type":14,"tag":85,"props":5025,"children":5026},{"class":87,"line":3566},[5027,5031,5036,5040,5044,5048,5052,5056,5060,5064,5068,5072],{"type":14,"tag":85,"props":5028,"children":5029},{"style":92},[5030],{"type":20,"value":713},{"type":14,"tag":85,"props":5032,"children":5033},{"style":184},[5034],{"type":20,"value":5035}," compile_statement",{"type":14,"tag":85,"props":5037,"children":5038},{"style":98},[5039],{"type":20,"value":192},{"type":14,"tag":85,"props":5041,"children":5042},{"style":92},[5043],{"type":20,"value":727},{"type":14,"tag":85,"props":5045,"children":5046},{"style":730},[5047],{"type":20,"value":733},{"type":14,"tag":85,"props":5049,"children":5050},{"style":98},[5051],{"type":20,"value":4559},{"type":14,"tag":85,"props":5053,"children":5054},{"style":92},[5055],{"type":20,"value":952},{"type":14,"tag":85,"props":5057,"children":5058},{"style":92},[5059],{"type":20,"value":957},{"type":14,"tag":85,"props":5061,"children":5062},{"style":184},[5063],{"type":20,"value":206},{"type":14,"tag":85,"props":5065,"children":5066},{"style":92},[5067],{"type":20,"value":667},{"type":14,"tag":85,"props":5069,"children":5070},{"style":184},[5071],{"type":20,"value":332},{"type":14,"tag":85,"props":5073,"children":5074},{"style":98},[5075],{"type":20,"value":4044},{"type":14,"tag":85,"props":5077,"children":5078},{"class":87,"line":3579},[5079,5083],{"type":14,"tag":85,"props":5080,"children":5081},{"style":92},[5082],{"type":20,"value":760},{"type":14,"tag":85,"props":5084,"children":5085},{"style":98},[5086],{"type":20,"value":1578},{"type":14,"tag":85,"props":5088,"children":5089},{"class":87,"line":3601},[5090,5094,5098,5102,5106,5110,5115,5119,5123,5127,5132],{"type":14,"tag":85,"props":5091,"children":5092},{"style":184},[5093],{"type":20,"value":4422},{"type":14,"tag":85,"props":5095,"children":5096},{"style":92},[5097],{"type":20,"value":667},{"type":14,"tag":85,"props":5099,"children":5100},{"style":184},[5101],{"type":20,"value":332},{"type":14,"tag":85,"props":5103,"children":5104},{"style":92},[5105],{"type":20,"value":667},{"type":14,"tag":85,"props":5107,"children":5108},{"style":184},[5109],{"type":20,"value":1602},{"type":14,"tag":85,"props":5111,"children":5112},{"style":98},[5113],{"type":20,"value":5114},"(print_statement) ",{"type":14,"tag":85,"props":5116,"children":5117},{"style":92},[5118],{"type":20,"value":795},{"type":14,"tag":85,"props":5120,"children":5121},{"style":730},[5122],{"type":20,"value":765},{"type":14,"tag":85,"props":5124,"children":5125},{"style":92},[5126],{"type":20,"value":106},{"type":14,"tag":85,"props":5128,"children":5129},{"style":184},[5130],{"type":20,"value":5131},"compile_print_statement",{"type":14,"tag":85,"props":5133,"children":5134},{"style":98},[5135],{"type":20,"value":5136},"(print_statement),\n",{"type":14,"tag":85,"props":5138,"children":5139},{"class":87,"line":3610},[5140],{"type":14,"tag":85,"props":5141,"children":5142},{"style":98},[5143],{"type":20,"value":813},{"type":14,"tag":85,"props":5145,"children":5146},{"class":87,"line":3619},[5147],{"type":14,"tag":85,"props":5148,"children":5149},{"style":98},[5150],{"type":20,"value":821},{"type":14,"tag":85,"props":5152,"children":5153},{"class":87,"line":3628},[5154],{"type":14,"tag":85,"props":5155,"children":5156},{"emptyLinePlaceholder":268},[5157],{"type":20,"value":271},{"type":14,"tag":85,"props":5159,"children":5160},{"class":87,"line":3636},[5161,5165,5169,5174,5178,5182,5186,5191,5195,5199,5203,5207,5211],{"type":14,"tag":85,"props":5162,"children":5163},{"style":92},[5164],{"type":20,"value":2974},{"type":14,"tag":85,"props":5166,"children":5167},{"style":92},[5168],{"type":20,"value":1732},{"type":14,"tag":85,"props":5170,"children":5171},{"style":184},[5172],{"type":20,"value":5173}," compile_module",{"type":14,"tag":85,"props":5175,"children":5176},{"style":98},[5177],{"type":20,"value":192},{"type":14,"tag":85,"props":5179,"children":5180},{"style":92},[5181],{"type":20,"value":4035},{"type":14,"tag":85,"props":5183,"children":5184},{"style":730},[5185],{"type":20,"value":765},{"type":14,"tag":85,"props":5187,"children":5188},{"style":98},[5189],{"type":20,"value":5190},", module",{"type":14,"tag":85,"props":5192,"children":5193},{"style":92},[5194],{"type":20,"value":952},{"type":14,"tag":85,"props":5196,"children":5197},{"style":92},[5198],{"type":20,"value":957},{"type":14,"tag":85,"props":5200,"children":5201},{"style":184},[5202],{"type":20,"value":206},{"type":14,"tag":85,"props":5204,"children":5205},{"style":92},[5206],{"type":20,"value":667},{"type":14,"tag":85,"props":5208,"children":5209},{"style":184},[5210],{"type":20,"value":1763},{"type":14,"tag":85,"props":5212,"children":5213},{"style":98},[5214],{"type":20,"value":4044},{"type":14,"tag":85,"props":5216,"children":5217},{"class":87,"line":3644},[5218,5222,5226,5231],{"type":14,"tag":85,"props":5219,"children":5220},{"style":730},[5221],{"type":20,"value":4266},{"type":14,"tag":85,"props":5223,"children":5224},{"style":92},[5225],{"type":20,"value":106},{"type":14,"tag":85,"props":5227,"children":5228},{"style":184},[5229],{"type":20,"value":5230},"compile_libc_definitions",{"type":14,"tag":85,"props":5232,"children":5233},{"style":98},[5234],{"type":20,"value":1839},{"type":14,"tag":85,"props":5236,"children":5238},{"class":87,"line":5237},47,[5239],{"type":14,"tag":85,"props":5240,"children":5241},{"style":259},[5242],{"type":20,"value":5243},"        // In the future we will have functions, for now put everything in main()\n",{"type":14,"tag":85,"props":5245,"children":5247},{"class":87,"line":5246},48,[5248],{"type":14,"tag":85,"props":5249,"children":5250},{"emptyLinePlaceholder":268},[5251],{"type":20,"value":271},{"type":14,"tag":85,"props":5253,"children":5255},{"class":87,"line":5254},49,[5256,5260,5264,5268,5272,5276,5280,5284,5288],{"type":14,"tag":85,"props":5257,"children":5258},{"style":92},[5259],{"type":20,"value":1897},{"type":14,"tag":85,"props":5261,"children":5262},{"style":98},[5263],{"type":20,"value":4056},{"type":14,"tag":85,"props":5265,"children":5266},{"style":92},[5267],{"type":20,"value":162},{"type":14,"tag":85,"props":5269,"children":5270},{"style":730},[5271],{"type":20,"value":765},{"type":14,"tag":85,"props":5273,"children":5274},{"style":92},[5275],{"type":20,"value":106},{"type":14,"tag":85,"props":5277,"children":5278},{"style":98},[5279],{"type":20,"value":2161},{"type":14,"tag":85,"props":5281,"children":5282},{"style":92},[5283],{"type":20,"value":106},{"type":14,"tag":85,"props":5285,"children":5286},{"style":184},[5287],{"type":20,"value":3872},{"type":14,"tag":85,"props":5289,"children":5290},{"style":98},[5291],{"type":20,"value":1839},{"type":14,"tag":85,"props":5293,"children":5295},{"class":87,"line":5294},50,[5296,5300,5305,5309,5313,5317,5321,5325,5329,5334,5338],{"type":14,"tag":85,"props":5297,"children":5298},{"style":92},[5299],{"type":20,"value":1897},{"type":14,"tag":85,"props":5301,"children":5302},{"style":98},[5303],{"type":20,"value":5304}," main_type ",{"type":14,"tag":85,"props":5306,"children":5307},{"style":92},[5308],{"type":20,"value":162},{"type":14,"tag":85,"props":5310,"children":5311},{"style":98},[5312],{"type":20,"value":4213},{"type":14,"tag":85,"props":5314,"children":5315},{"style":92},[5316],{"type":20,"value":106},{"type":14,"tag":85,"props":5318,"children":5319},{"style":184},[5320],{"type":20,"value":4222},{"type":14,"tag":85,"props":5322,"children":5323},{"style":98},[5324],{"type":20,"value":192},{"type":14,"tag":85,"props":5326,"children":5327},{"style":92},[5328],{"type":20,"value":727},{"type":14,"tag":85,"props":5330,"children":5331},{"style":98},[5332],{"type":20,"value":5333},"[], ",{"type":14,"tag":85,"props":5335,"children":5336},{"style":730},[5337],{"type":20,"value":4505},{"type":14,"tag":85,"props":5339,"children":5340},{"style":98},[5341],{"type":20,"value":904},{"type":14,"tag":85,"props":5343,"children":5345},{"class":87,"line":5344},51,[5346,5350,5355,5359,5363,5367,5371,5375,5379,5383,5387,5392,5396],{"type":14,"tag":85,"props":5347,"children":5348},{"style":92},[5349],{"type":20,"value":1897},{"type":14,"tag":85,"props":5351,"children":5352},{"style":98},[5353],{"type":20,"value":5354}," main ",{"type":14,"tag":85,"props":5356,"children":5357},{"style":92},[5358],{"type":20,"value":162},{"type":14,"tag":85,"props":5360,"children":5361},{"style":730},[5362],{"type":20,"value":765},{"type":14,"tag":85,"props":5364,"children":5365},{"style":92},[5366],{"type":20,"value":106},{"type":14,"tag":85,"props":5368,"children":5369},{"style":98},[5370],{"type":20,"value":1875},{"type":14,"tag":85,"props":5372,"children":5373},{"style":92},[5374],{"type":20,"value":106},{"type":14,"tag":85,"props":5376,"children":5377},{"style":184},[5378],{"type":20,"value":4283},{"type":14,"tag":85,"props":5380,"children":5381},{"style":98},[5382],{"type":20,"value":192},{"type":14,"tag":85,"props":5384,"children":5385},{"style":870},[5386],{"type":20,"value":3064},{"type":14,"tag":85,"props":5388,"children":5389},{"style":98},[5390],{"type":20,"value":5391},", main_type, ",{"type":14,"tag":85,"props":5393,"children":5394},{"style":184},[5395],{"type":20,"value":4302},{"type":14,"tag":85,"props":5397,"children":5398},{"style":98},[5399],{"type":20,"value":904},{"type":14,"tag":85,"props":5401,"children":5403},{"class":87,"line":5402},52,[5404,5408,5413,5417,5421,5425,5429,5433,5438,5443,5448],{"type":14,"tag":85,"props":5405,"children":5406},{"style":92},[5407],{"type":20,"value":1897},{"type":14,"tag":85,"props":5409,"children":5410},{"style":98},[5411],{"type":20,"value":5412}," main_block ",{"type":14,"tag":85,"props":5414,"children":5415},{"style":92},[5416],{"type":20,"value":162},{"type":14,"tag":85,"props":5418,"children":5419},{"style":730},[5420],{"type":20,"value":765},{"type":14,"tag":85,"props":5422,"children":5423},{"style":92},[5424],{"type":20,"value":106},{"type":14,"tag":85,"props":5426,"children":5427},{"style":98},[5428],{"type":20,"value":2161},{"type":14,"tag":85,"props":5430,"children":5431},{"style":92},[5432],{"type":20,"value":106},{"type":14,"tag":85,"props":5434,"children":5435},{"style":184},[5436],{"type":20,"value":5437},"append_basic_block",{"type":14,"tag":85,"props":5439,"children":5440},{"style":98},[5441],{"type":20,"value":5442},"(main, ",{"type":14,"tag":85,"props":5444,"children":5445},{"style":870},[5446],{"type":20,"value":5447},"\"entry\"",{"type":14,"tag":85,"props":5449,"children":5450},{"style":98},[5451],{"type":20,"value":904},{"type":14,"tag":85,"props":5453,"children":5455},{"class":87,"line":5454},53,[5456,5460,5464,5468,5472,5477],{"type":14,"tag":85,"props":5457,"children":5458},{"style":730},[5459],{"type":20,"value":4266},{"type":14,"tag":85,"props":5461,"children":5462},{"style":92},[5463],{"type":20,"value":106},{"type":14,"tag":85,"props":5465,"children":5466},{"style":98},[5467],{"type":20,"value":2826},{"type":14,"tag":85,"props":5469,"children":5470},{"style":92},[5471],{"type":20,"value":106},{"type":14,"tag":85,"props":5473,"children":5474},{"style":184},[5475],{"type":20,"value":5476},"position_at_end",{"type":14,"tag":85,"props":5478,"children":5479},{"style":98},[5480],{"type":20,"value":5481},"(main_block);\n",{"type":14,"tag":85,"props":5483,"children":5485},{"class":87,"line":5484},54,[5486],{"type":14,"tag":85,"props":5487,"children":5488},{"emptyLinePlaceholder":268},[5489],{"type":20,"value":271},{"type":14,"tag":85,"props":5491,"children":5493},{"class":87,"line":5492},55,[5494,5499,5503,5507,5511,5515,5519,5523],{"type":14,"tag":85,"props":5495,"children":5496},{"style":92},[5497],{"type":20,"value":5498},"        for",{"type":14,"tag":85,"props":5500,"children":5501},{"style":98},[5502],{"type":20,"value":1861},{"type":14,"tag":85,"props":5504,"children":5505},{"style":92},[5506],{"type":20,"value":1866},{"type":14,"tag":85,"props":5508,"children":5509},{"style":92},[5510],{"type":20,"value":957},{"type":14,"tag":85,"props":5512,"children":5513},{"style":98},[5514],{"type":20,"value":1875},{"type":14,"tag":85,"props":5516,"children":5517},{"style":92},[5518],{"type":20,"value":106},{"type":14,"tag":85,"props":5520,"children":5521},{"style":730},[5522],{"type":20,"value":1884},{"type":14,"tag":85,"props":5524,"children":5525},{"style":98},[5526],{"type":20,"value":384},{"type":14,"tag":85,"props":5528,"children":5530},{"class":87,"line":5529},56,[5531,5536,5540,5545],{"type":14,"tag":85,"props":5532,"children":5533},{"style":730},[5534],{"type":20,"value":5535},"            self",{"type":14,"tag":85,"props":5537,"children":5538},{"style":92},[5539],{"type":20,"value":106},{"type":14,"tag":85,"props":5541,"children":5542},{"style":184},[5543],{"type":20,"value":5544},"compile_statement",{"type":14,"tag":85,"props":5546,"children":5547},{"style":98},[5548],{"type":20,"value":5549},"(statement);\n",{"type":14,"tag":85,"props":5551,"children":5553},{"class":87,"line":5552},57,[5554],{"type":14,"tag":85,"props":5555,"children":5556},{"style":98},[5557],{"type":20,"value":813},{"type":14,"tag":85,"props":5559,"children":5561},{"class":87,"line":5560},58,[5562],{"type":14,"tag":85,"props":5563,"children":5564},{"emptyLinePlaceholder":268},[5565],{"type":20,"value":271},{"type":14,"tag":85,"props":5567,"children":5569},{"class":87,"line":5568},59,[5570,5574,5578],{"type":14,"tag":85,"props":5571,"children":5572},{"style":730},[5573],{"type":20,"value":4266},{"type":14,"tag":85,"props":5575,"children":5576},{"style":92},[5577],{"type":20,"value":106},{"type":14,"tag":85,"props":5579,"children":5580},{"style":98},[5581],{"type":20,"value":4768},{"type":14,"tag":85,"props":5583,"children":5585},{"class":87,"line":5584},60,[5586,5590,5595,5599,5604,5608,5612,5616,5620,5624,5628,5632,5636,5640],{"type":14,"tag":85,"props":5587,"children":5588},{"style":92},[5589],{"type":20,"value":4763},{"type":14,"tag":85,"props":5591,"children":5592},{"style":184},[5593],{"type":20,"value":5594},"build_return",{"type":14,"tag":85,"props":5596,"children":5597},{"style":98},[5598],{"type":20,"value":192},{"type":14,"tag":85,"props":5600,"children":5601},{"style":184},[5602],{"type":20,"value":5603},"Some",{"type":14,"tag":85,"props":5605,"children":5606},{"style":98},[5607],{"type":20,"value":192},{"type":14,"tag":85,"props":5609,"children":5610},{"style":92},[5611],{"type":20,"value":727},{"type":14,"tag":85,"props":5613,"children":5614},{"style":98},[5615],{"type":20,"value":3872},{"type":14,"tag":85,"props":5617,"children":5618},{"style":92},[5619],{"type":20,"value":106},{"type":14,"tag":85,"props":5621,"children":5622},{"style":184},[5623],{"type":20,"value":4473},{"type":14,"tag":85,"props":5625,"children":5626},{"style":98},[5627],{"type":20,"value":192},{"type":14,"tag":85,"props":5629,"children":5630},{"style":730},[5631],{"type":20,"value":1884},{"type":14,"tag":85,"props":5633,"children":5634},{"style":98},[5635],{"type":20,"value":238},{"type":14,"tag":85,"props":5637,"children":5638},{"style":730},[5639],{"type":20,"value":4505},{"type":14,"tag":85,"props":5641,"children":5642},{"style":98},[5643],{"type":20,"value":5644},")));\n",{"type":14,"tag":85,"props":5646,"children":5648},{"class":87,"line":5647},61,[5649],{"type":14,"tag":85,"props":5650,"children":5651},{"style":98},[5652],{"type":20,"value":821},{"type":14,"tag":22,"props":5654,"children":5655},{},[5656],{"type":20,"value":5657},"We need to add the libc functions definitions we will be using, we will be using more in the future so stay tuned ",{"type":14,"tag":22,"props":5659,"children":5660},{},[5661,5663,5669],{"type":20,"value":5662},"The most complex part here is the print statement, but it should look very similar to what we did in part 1! We just do some conditional selecting of the formatting string, so the constructed call might look like ",{"type":14,"tag":28,"props":5664,"children":5666},{"className":5665},[],[5667],{"type":20,"value":5668},"printf(\"%d\\n\", 1)",{"type":20,"value":106},{"type":14,"tag":22,"props":5671,"children":5672},{},[5673],{"type":20,"value":5674},"We can now save this, and here is a small optimization I will do! In the last post we used the text version of LLVM IR, but there is a bytecode version that will take up less space and be more efficient!",{"type":14,"tag":75,"props":5676,"children":5678},{"code":5677,"language":78,"meta":7,"className":79,"style":7},"    pub fn output_to_file(&mut self, file_path: &std::path::Path, options: &CompilerOptions) {\n        if !options.dont_optimize {\n            self.fpm.run_on(&self.module);\n        }\n\n        self.module.write_bitcode_to_path(file_path);\n\n        if options.output_llvm {\n            self.module.print_to_stderr();\n        }\n    }\n",[5679],{"type":14,"tag":28,"props":5680,"children":5681},{"__ignoreMap":7},[5682,5767,5794,5840,5847,5854,5883,5890,5910,5938,5945],{"type":14,"tag":85,"props":5683,"children":5684},{"class":87,"line":88},[5685,5689,5693,5698,5702,5706,5710,5715,5719,5723,5728,5732,5737,5741,5746,5750,5754,5758,5763],{"type":14,"tag":85,"props":5686,"children":5687},{"style":92},[5688],{"type":20,"value":2974},{"type":14,"tag":85,"props":5690,"children":5691},{"style":92},[5692],{"type":20,"value":1732},{"type":14,"tag":85,"props":5694,"children":5695},{"style":184},[5696],{"type":20,"value":5697}," output_to_file",{"type":14,"tag":85,"props":5699,"children":5700},{"style":98},[5701],{"type":20,"value":192},{"type":14,"tag":85,"props":5703,"children":5704},{"style":92},[5705],{"type":20,"value":4035},{"type":14,"tag":85,"props":5707,"children":5708},{"style":730},[5709],{"type":20,"value":765},{"type":14,"tag":85,"props":5711,"children":5712},{"style":98},[5713],{"type":20,"value":5714},", file_path",{"type":14,"tag":85,"props":5716,"children":5717},{"style":92},[5718],{"type":20,"value":952},{"type":14,"tag":85,"props":5720,"children":5721},{"style":92},[5722],{"type":20,"value":957},{"type":14,"tag":85,"props":5724,"children":5725},{"style":184},[5726],{"type":20,"value":5727},"std",{"type":14,"tag":85,"props":5729,"children":5730},{"style":92},[5731],{"type":20,"value":667},{"type":14,"tag":85,"props":5733,"children":5734},{"style":184},[5735],{"type":20,"value":5736},"path",{"type":14,"tag":85,"props":5738,"children":5739},{"style":92},[5740],{"type":20,"value":667},{"type":14,"tag":85,"props":5742,"children":5743},{"style":184},[5744],{"type":20,"value":5745},"Path",{"type":14,"tag":85,"props":5747,"children":5748},{"style":98},[5749],{"type":20,"value":2074},{"type":14,"tag":85,"props":5751,"children":5752},{"style":92},[5753],{"type":20,"value":952},{"type":14,"tag":85,"props":5755,"children":5756},{"style":92},[5757],{"type":20,"value":957},{"type":14,"tag":85,"props":5759,"children":5760},{"style":184},[5761],{"type":20,"value":5762},"CompilerOptions",{"type":14,"tag":85,"props":5764,"children":5765},{"style":98},[5766],{"type":20,"value":4044},{"type":14,"tag":85,"props":5768,"children":5769},{"class":87,"line":170},[5770,5775,5780,5785,5789],{"type":14,"tag":85,"props":5771,"children":5772},{"style":92},[5773],{"type":20,"value":5774},"        if",{"type":14,"tag":85,"props":5776,"children":5777},{"style":92},[5778],{"type":20,"value":5779}," !",{"type":14,"tag":85,"props":5781,"children":5782},{"style":98},[5783],{"type":20,"value":5784},"options",{"type":14,"tag":85,"props":5786,"children":5787},{"style":92},[5788],{"type":20,"value":106},{"type":14,"tag":85,"props":5790,"children":5791},{"style":98},[5792],{"type":20,"value":5793},"dont_optimize {\n",{"type":14,"tag":85,"props":5795,"children":5796},{"class":87,"line":274},[5797,5801,5805,5810,5814,5819,5823,5827,5831,5835],{"type":14,"tag":85,"props":5798,"children":5799},{"style":730},[5800],{"type":20,"value":5535},{"type":14,"tag":85,"props":5802,"children":5803},{"style":92},[5804],{"type":20,"value":106},{"type":14,"tag":85,"props":5806,"children":5807},{"style":98},[5808],{"type":20,"value":5809},"fpm",{"type":14,"tag":85,"props":5811,"children":5812},{"style":92},[5813],{"type":20,"value":106},{"type":14,"tag":85,"props":5815,"children":5816},{"style":184},[5817],{"type":20,"value":5818},"run_on",{"type":14,"tag":85,"props":5820,"children":5821},{"style":98},[5822],{"type":20,"value":192},{"type":14,"tag":85,"props":5824,"children":5825},{"style":92},[5826],{"type":20,"value":727},{"type":14,"tag":85,"props":5828,"children":5829},{"style":730},[5830],{"type":20,"value":733},{"type":14,"tag":85,"props":5832,"children":5833},{"style":92},[5834],{"type":20,"value":106},{"type":14,"tag":85,"props":5836,"children":5837},{"style":98},[5838],{"type":20,"value":5839},"module);\n",{"type":14,"tag":85,"props":5841,"children":5842},{"class":87,"line":293},[5843],{"type":14,"tag":85,"props":5844,"children":5845},{"style":98},[5846],{"type":20,"value":813},{"type":14,"tag":85,"props":5848,"children":5849},{"class":87,"line":340},[5850],{"type":14,"tag":85,"props":5851,"children":5852},{"emptyLinePlaceholder":268},[5853],{"type":20,"value":271},{"type":14,"tag":85,"props":5855,"children":5856},{"class":87,"line":348},[5857,5861,5865,5869,5873,5878],{"type":14,"tag":85,"props":5858,"children":5859},{"style":730},[5860],{"type":20,"value":4266},{"type":14,"tag":85,"props":5862,"children":5863},{"style":92},[5864],{"type":20,"value":106},{"type":14,"tag":85,"props":5866,"children":5867},{"style":98},[5868],{"type":20,"value":1875},{"type":14,"tag":85,"props":5870,"children":5871},{"style":92},[5872],{"type":20,"value":106},{"type":14,"tag":85,"props":5874,"children":5875},{"style":184},[5876],{"type":20,"value":5877},"write_bitcode_to_path",{"type":14,"tag":85,"props":5879,"children":5880},{"style":98},[5881],{"type":20,"value":5882},"(file_path);\n",{"type":14,"tag":85,"props":5884,"children":5885},{"class":87,"line":364},[5886],{"type":14,"tag":85,"props":5887,"children":5888},{"emptyLinePlaceholder":268},[5889],{"type":20,"value":271},{"type":14,"tag":85,"props":5891,"children":5892},{"class":87,"line":387},[5893,5897,5901,5905],{"type":14,"tag":85,"props":5894,"children":5895},{"style":92},[5896],{"type":20,"value":5774},{"type":14,"tag":85,"props":5898,"children":5899},{"style":98},[5900],{"type":20,"value":2363},{"type":14,"tag":85,"props":5902,"children":5903},{"style":92},[5904],{"type":20,"value":106},{"type":14,"tag":85,"props":5906,"children":5907},{"style":98},[5908],{"type":20,"value":5909},"output_llvm {\n",{"type":14,"tag":85,"props":5911,"children":5912},{"class":87,"line":410},[5913,5917,5921,5925,5929,5934],{"type":14,"tag":85,"props":5914,"children":5915},{"style":730},[5916],{"type":20,"value":5535},{"type":14,"tag":85,"props":5918,"children":5919},{"style":92},[5920],{"type":20,"value":106},{"type":14,"tag":85,"props":5922,"children":5923},{"style":98},[5924],{"type":20,"value":1875},{"type":14,"tag":85,"props":5926,"children":5927},{"style":92},[5928],{"type":20,"value":106},{"type":14,"tag":85,"props":5930,"children":5931},{"style":184},[5932],{"type":20,"value":5933},"print_to_stderr",{"type":14,"tag":85,"props":5935,"children":5936},{"style":98},[5937],{"type":20,"value":1839},{"type":14,"tag":85,"props":5939,"children":5940},{"class":87,"line":419},[5941],{"type":14,"tag":85,"props":5942,"children":5943},{"style":98},[5944],{"type":20,"value":813},{"type":14,"tag":85,"props":5946,"children":5947},{"class":87,"line":427},[5948],{"type":14,"tag":85,"props":5949,"children":5950},{"style":98},[5951],{"type":20,"value":821},{"type":14,"tag":22,"props":5953,"children":5954},{},[5955],{"type":20,"value":5956},"And yes we do generate the output twice if we have the debug flag set, but it is a debug flag, it doesn't really matter.\nWe also run optimization in this part because we already have the compiler options!",{"type":14,"tag":22,"props":5958,"children":5959},{},[5960,5962,5968,5970,5981],{"type":20,"value":5961},"Now we just have to call this from our ",{"type":14,"tag":28,"props":5963,"children":5965},{"className":5964},[],[5966],{"type":20,"value":5967},"build",{"type":20,"value":5969}," function, but one question, in what file should we save the result? well, here the ",{"type":14,"tag":46,"props":5971,"children":5974},{"href":5972,"rel":5973},"https://crates.io/crates/temp-file",[50],[5975],{"type":14,"tag":28,"props":5976,"children":5978},{"className":5977},[],[5979],{"type":20,"value":5980},"temp-file",{"type":20,"value":5982}," crate will help us! it will allow us to create temporary files for use during compiling!",{"type":14,"tag":75,"props":5984,"children":5988},{"code":5985,"language":5986,"meta":7,"className":5987,"style":7},"cargo add temp-file\n","bash","language-bash shiki shiki-themes github-dark",[5989],{"type":14,"tag":28,"props":5990,"children":5991},{"__ignoreMap":7},[5992],{"type":14,"tag":85,"props":5993,"children":5994},{"class":87,"line":88},[5995,6000,6005],{"type":14,"tag":85,"props":5996,"children":5997},{"style":184},[5998],{"type":20,"value":5999},"cargo",{"type":14,"tag":85,"props":6001,"children":6002},{"style":870},[6003],{"type":20,"value":6004}," add",{"type":14,"tag":85,"props":6006,"children":6007},{"style":870},[6008],{"type":20,"value":6009}," temp-file\n",{"type":14,"tag":22,"props":6011,"children":6012},{},[6013],{"type":20,"value":6014},"then we can generate and use our temporary file",{"type":14,"tag":75,"props":6016,"children":6018},{"code":6017,"language":78,"meta":7,"className":79,"style":7},"// lib.rs - build(...)\n    let inkwell_context = inkwell::context::Context::create();\n    let mut code_gen = code_gen::CodeGen::new(&inkwell_context);\n    code_gen.compile_module(&ir);\n\n    let llvm_ir_output_file = temp_file::empty();\n    code_gen.output_to_file(llvm_ir_output_file.path(), &options);\n",[6019],{"type":14,"tag":28,"props":6020,"children":6021},{"__ignoreMap":7},[6022,6030,6078,6132,6162,6169,6203],{"type":14,"tag":85,"props":6023,"children":6024},{"class":87,"line":88},[6025],{"type":14,"tag":85,"props":6026,"children":6027},{"style":259},[6028],{"type":20,"value":6029},"// lib.rs - build(...)\n",{"type":14,"tag":85,"props":6031,"children":6032},{"class":87,"line":170},[6033,6037,6042,6046,6050,6054,6058,6062,6066,6070,6074],{"type":14,"tag":85,"props":6034,"children":6035},{"style":92},[6036],{"type":20,"value":1367},{"type":14,"tag":85,"props":6038,"children":6039},{"style":98},[6040],{"type":20,"value":6041}," inkwell_context ",{"type":14,"tag":85,"props":6043,"children":6044},{"style":92},[6045],{"type":20,"value":162},{"type":14,"tag":85,"props":6047,"children":6048},{"style":184},[6049],{"type":20,"value":2664},{"type":14,"tag":85,"props":6051,"children":6052},{"style":92},[6053],{"type":20,"value":667},{"type":14,"tag":85,"props":6055,"children":6056},{"style":184},[6057],{"type":20,"value":2161},{"type":14,"tag":85,"props":6059,"children":6060},{"style":92},[6061],{"type":20,"value":667},{"type":14,"tag":85,"props":6063,"children":6064},{"style":184},[6065],{"type":20,"value":2681},{"type":14,"tag":85,"props":6067,"children":6068},{"style":92},[6069],{"type":20,"value":667},{"type":14,"tag":85,"props":6071,"children":6072},{"style":184},[6073],{"type":20,"value":3146},{"type":14,"tag":85,"props":6075,"children":6076},{"style":98},[6077],{"type":20,"value":1839},{"type":14,"tag":85,"props":6079,"children":6080},{"class":87,"line":274},[6081,6085,6089,6094,6098,6103,6107,6111,6115,6119,6123,6127],{"type":14,"tag":85,"props":6082,"children":6083},{"style":92},[6084],{"type":20,"value":1367},{"type":14,"tag":85,"props":6086,"children":6087},{"style":92},[6088],{"type":20,"value":1812},{"type":14,"tag":85,"props":6090,"children":6091},{"style":98},[6092],{"type":20,"value":6093}," code_gen ",{"type":14,"tag":85,"props":6095,"children":6096},{"style":92},[6097],{"type":20,"value":162},{"type":14,"tag":85,"props":6099,"children":6100},{"style":184},[6101],{"type":20,"value":6102}," code_gen",{"type":14,"tag":85,"props":6104,"children":6105},{"style":92},[6106],{"type":20,"value":667},{"type":14,"tag":85,"props":6108,"children":6109},{"style":184},[6110],{"type":20,"value":2954},{"type":14,"tag":85,"props":6112,"children":6113},{"style":92},[6114],{"type":20,"value":667},{"type":14,"tag":85,"props":6116,"children":6117},{"style":184},[6118],{"type":20,"value":1834},{"type":14,"tag":85,"props":6120,"children":6121},{"style":98},[6122],{"type":20,"value":192},{"type":14,"tag":85,"props":6124,"children":6125},{"style":92},[6126],{"type":20,"value":727},{"type":14,"tag":85,"props":6128,"children":6129},{"style":98},[6130],{"type":20,"value":6131},"inkwell_context);\n",{"type":14,"tag":85,"props":6133,"children":6134},{"class":87,"line":293},[6135,6140,6144,6149,6153,6157],{"type":14,"tag":85,"props":6136,"children":6137},{"style":98},[6138],{"type":20,"value":6139},"    code_gen",{"type":14,"tag":85,"props":6141,"children":6142},{"style":92},[6143],{"type":20,"value":106},{"type":14,"tag":85,"props":6145,"children":6146},{"style":184},[6147],{"type":20,"value":6148},"compile_module",{"type":14,"tag":85,"props":6150,"children":6151},{"style":98},[6152],{"type":20,"value":192},{"type":14,"tag":85,"props":6154,"children":6155},{"style":92},[6156],{"type":20,"value":727},{"type":14,"tag":85,"props":6158,"children":6159},{"style":98},[6160],{"type":20,"value":6161},"ir);\n",{"type":14,"tag":85,"props":6163,"children":6164},{"class":87,"line":340},[6165],{"type":14,"tag":85,"props":6166,"children":6167},{"emptyLinePlaceholder":268},[6168],{"type":20,"value":271},{"type":14,"tag":85,"props":6170,"children":6171},{"class":87,"line":348},[6172,6176,6181,6185,6190,6194,6199],{"type":14,"tag":85,"props":6173,"children":6174},{"style":92},[6175],{"type":20,"value":1367},{"type":14,"tag":85,"props":6177,"children":6178},{"style":98},[6179],{"type":20,"value":6180}," llvm_ir_output_file ",{"type":14,"tag":85,"props":6182,"children":6183},{"style":92},[6184],{"type":20,"value":162},{"type":14,"tag":85,"props":6186,"children":6187},{"style":184},[6188],{"type":20,"value":6189}," temp_file",{"type":14,"tag":85,"props":6191,"children":6192},{"style":92},[6193],{"type":20,"value":667},{"type":14,"tag":85,"props":6195,"children":6196},{"style":184},[6197],{"type":20,"value":6198},"empty",{"type":14,"tag":85,"props":6200,"children":6201},{"style":98},[6202],{"type":20,"value":1839},{"type":14,"tag":85,"props":6204,"children":6205},{"class":87,"line":364},[6206,6210,6214,6219,6224,6228,6232,6237,6241],{"type":14,"tag":85,"props":6207,"children":6208},{"style":98},[6209],{"type":20,"value":6139},{"type":14,"tag":85,"props":6211,"children":6212},{"style":92},[6213],{"type":20,"value":106},{"type":14,"tag":85,"props":6215,"children":6216},{"style":184},[6217],{"type":20,"value":6218},"output_to_file",{"type":14,"tag":85,"props":6220,"children":6221},{"style":98},[6222],{"type":20,"value":6223},"(llvm_ir_output_file",{"type":14,"tag":85,"props":6225,"children":6226},{"style":92},[6227],{"type":20,"value":106},{"type":14,"tag":85,"props":6229,"children":6230},{"style":184},[6231],{"type":20,"value":5736},{"type":14,"tag":85,"props":6233,"children":6234},{"style":98},[6235],{"type":20,"value":6236},"(), ",{"type":14,"tag":85,"props":6238,"children":6239},{"style":92},[6240],{"type":20,"value":727},{"type":14,"tag":85,"props":6242,"children":6243},{"style":98},[6244],{"type":20,"value":6245},"options);\n",{"type":14,"tag":22,"props":6247,"children":6248},{},[6249,6251,6257],{"type":20,"value":6250},"We can now run this, ",{"type":14,"tag":28,"props":6252,"children":6254},{"className":6253},[],[6255],{"type":20,"value":6256},"cargo run -- run test.viv --output-llvm",{"type":20,"value":6258},", and we should get",{"type":14,"tag":75,"props":6260,"children":6262},{"code":6261},"; ModuleID = 'main'\nsource_filename = \"main\"\n\n@format_string.1 = private unnamed_addr constant [4 x i8] c\"%d\\0A\\00\", align 1\n\ndeclare i32 @printf(ptr %0, ...) local_unnamed_addr\n\ndefine i32 @main() local_unnamed_addr {\nentry:\n  %printf = tail call i32 (ptr, ...) @printf(ptr noundef nonnull @format_string.1, i32 1)\n  %printf1 = tail call i32 (ptr, ...) @printf(ptr noundef nonnull @format_string.1, i32 2)\n  ret i32 0\n}\n",[6263],{"type":14,"tag":28,"props":6264,"children":6265},{"__ignoreMap":7},[6266],{"type":20,"value":6261},{"type":14,"tag":204,"props":6268,"children":6270},{"id":6269},"compiling-to-binary",[6271],{"type":20,"value":6272},"Compiling to binary",{"type":14,"tag":22,"props":6274,"children":6275},{},[6276,6278,6284,6286,6292,6294,6300],{"type":20,"value":6277},"Now we need to compile this LLVM IR down to a binary, to do this we will spawn subprocesses of ",{"type":14,"tag":28,"props":6279,"children":6281},{"className":6280},[],[6282],{"type":20,"value":6283},"llc",{"type":20,"value":6285}," and ",{"type":14,"tag":28,"props":6287,"children":6289},{"className":6288},[],[6290],{"type":20,"value":6291},"clang",{"type":20,"value":6293},"/",{"type":14,"tag":28,"props":6295,"children":6297},{"className":6296},[],[6298],{"type":20,"value":6299},"gcc",{"type":20,"value":106},{"type":14,"tag":22,"props":6302,"children":6303},{},[6304],{"type":20,"value":6305},"To do this we will create some helper functions!",{"type":14,"tag":75,"props":6307,"children":6309},{"code":6308,"language":78,"meta":7,"className":79,"style":7},"// lib.rs\nfn find_on_path(program: &str) -> Option\u003Cstd::path::PathBuf> {\n    let path = std::env::var_os(\"PATH\")?;\n\n    for dir in std::env::split_paths(&path) {\n        let candidate = dir.join(program);\n\n        if candidate.is_file() {\n            return Some(candidate);\n        }\n    }\n\n    None\n}\n\nfn find_any_on_path(programs: Vec\u003C&str>) -> Option\u003Cstd::path::PathBuf> {\n    for program in programs {\n        if let Some(path) = find_on_path(program) {\n            return Some(path);\n        }\n    }\n\n    None\n}\n",[6310],{"type":14,"tag":28,"props":6311,"children":6312},{"__ignoreMap":7},[6313,6320,6388,6447,6454,6504,6539,6546,6572,6590,6597,6604,6611,6619,6626,6633,6707,6728,6762,6778,6785,6792,6799,6806],{"type":14,"tag":85,"props":6314,"children":6315},{"class":87,"line":88},[6316],{"type":14,"tag":85,"props":6317,"children":6318},{"style":259},[6319],{"type":20,"value":2028},{"type":14,"tag":85,"props":6321,"children":6322},{"class":87,"line":170},[6323,6327,6332,6337,6341,6345,6349,6353,6357,6362,6367,6371,6375,6379,6384],{"type":14,"tag":85,"props":6324,"children":6325},{"style":92},[6326],{"type":20,"value":937},{"type":14,"tag":85,"props":6328,"children":6329},{"style":184},[6330],{"type":20,"value":6331}," find_on_path",{"type":14,"tag":85,"props":6333,"children":6334},{"style":98},[6335],{"type":20,"value":6336},"(program",{"type":14,"tag":85,"props":6338,"children":6339},{"style":92},[6340],{"type":20,"value":952},{"type":14,"tag":85,"props":6342,"children":6343},{"style":92},[6344],{"type":20,"value":957},{"type":14,"tag":85,"props":6346,"children":6347},{"style":184},[6348],{"type":20,"value":2069},{"type":14,"tag":85,"props":6350,"children":6351},{"style":98},[6352],{"type":20,"value":738},{"type":14,"tag":85,"props":6354,"children":6355},{"style":92},[6356],{"type":20,"value":743},{"type":14,"tag":85,"props":6358,"children":6359},{"style":184},[6360],{"type":20,"value":6361}," Option",{"type":14,"tag":85,"props":6363,"children":6364},{"style":98},[6365],{"type":20,"value":6366},"\u003Cstd",{"type":14,"tag":85,"props":6368,"children":6369},{"style":92},[6370],{"type":20,"value":667},{"type":14,"tag":85,"props":6372,"children":6373},{"style":98},[6374],{"type":20,"value":5736},{"type":14,"tag":85,"props":6376,"children":6377},{"style":92},[6378],{"type":20,"value":667},{"type":14,"tag":85,"props":6380,"children":6381},{"style":184},[6382],{"type":20,"value":6383},"PathBuf",{"type":14,"tag":85,"props":6385,"children":6386},{"style":98},[6387],{"type":20,"value":1007},{"type":14,"tag":85,"props":6389,"children":6390},{"class":87,"line":274},[6391,6395,6400,6404,6408,6412,6417,6421,6426,6430,6435,6439,6443],{"type":14,"tag":85,"props":6392,"children":6393},{"style":92},[6394],{"type":20,"value":1367},{"type":14,"tag":85,"props":6396,"children":6397},{"style":98},[6398],{"type":20,"value":6399}," path ",{"type":14,"tag":85,"props":6401,"children":6402},{"style":92},[6403],{"type":20,"value":162},{"type":14,"tag":85,"props":6405,"children":6406},{"style":184},[6407],{"type":20,"value":2129},{"type":14,"tag":85,"props":6409,"children":6410},{"style":92},[6411],{"type":20,"value":667},{"type":14,"tag":85,"props":6413,"children":6414},{"style":184},[6415],{"type":20,"value":6416},"env",{"type":14,"tag":85,"props":6418,"children":6419},{"style":92},[6420],{"type":20,"value":667},{"type":14,"tag":85,"props":6422,"children":6423},{"style":184},[6424],{"type":20,"value":6425},"var_os",{"type":14,"tag":85,"props":6427,"children":6428},{"style":98},[6429],{"type":20,"value":192},{"type":14,"tag":85,"props":6431,"children":6432},{"style":870},[6433],{"type":20,"value":6434},"\"PATH\"",{"type":14,"tag":85,"props":6436,"children":6437},{"style":98},[6438],{"type":20,"value":2175},{"type":14,"tag":85,"props":6440,"children":6441},{"style":92},[6442],{"type":20,"value":1390},{"type":14,"tag":85,"props":6444,"children":6445},{"style":98},[6446],{"type":20,"value":1395},{"type":14,"tag":85,"props":6448,"children":6449},{"class":87,"line":293},[6450],{"type":14,"tag":85,"props":6451,"children":6452},{"emptyLinePlaceholder":268},[6453],{"type":20,"value":271},{"type":14,"tag":85,"props":6455,"children":6456},{"class":87,"line":340},[6457,6461,6466,6470,6474,6478,6482,6486,6491,6495,6499],{"type":14,"tag":85,"props":6458,"children":6459},{"style":92},[6460],{"type":20,"value":1856},{"type":14,"tag":85,"props":6462,"children":6463},{"style":98},[6464],{"type":20,"value":6465}," dir ",{"type":14,"tag":85,"props":6467,"children":6468},{"style":92},[6469],{"type":20,"value":1866},{"type":14,"tag":85,"props":6471,"children":6472},{"style":184},[6473],{"type":20,"value":2129},{"type":14,"tag":85,"props":6475,"children":6476},{"style":92},[6477],{"type":20,"value":667},{"type":14,"tag":85,"props":6479,"children":6480},{"style":184},[6481],{"type":20,"value":6416},{"type":14,"tag":85,"props":6483,"children":6484},{"style":92},[6485],{"type":20,"value":667},{"type":14,"tag":85,"props":6487,"children":6488},{"style":184},[6489],{"type":20,"value":6490},"split_paths",{"type":14,"tag":85,"props":6492,"children":6493},{"style":98},[6494],{"type":20,"value":192},{"type":14,"tag":85,"props":6496,"children":6497},{"style":92},[6498],{"type":20,"value":727},{"type":14,"tag":85,"props":6500,"children":6501},{"style":98},[6502],{"type":20,"value":6503},"path) {\n",{"type":14,"tag":85,"props":6505,"children":6506},{"class":87,"line":348},[6507,6511,6516,6520,6525,6529,6534],{"type":14,"tag":85,"props":6508,"children":6509},{"style":92},[6510],{"type":20,"value":1897},{"type":14,"tag":85,"props":6512,"children":6513},{"style":98},[6514],{"type":20,"value":6515}," candidate ",{"type":14,"tag":85,"props":6517,"children":6518},{"style":92},[6519],{"type":20,"value":162},{"type":14,"tag":85,"props":6521,"children":6522},{"style":98},[6523],{"type":20,"value":6524}," dir",{"type":14,"tag":85,"props":6526,"children":6527},{"style":92},[6528],{"type":20,"value":106},{"type":14,"tag":85,"props":6530,"children":6531},{"style":184},[6532],{"type":20,"value":6533},"join",{"type":14,"tag":85,"props":6535,"children":6536},{"style":98},[6537],{"type":20,"value":6538},"(program);\n",{"type":14,"tag":85,"props":6540,"children":6541},{"class":87,"line":364},[6542],{"type":14,"tag":85,"props":6543,"children":6544},{"emptyLinePlaceholder":268},[6545],{"type":20,"value":271},{"type":14,"tag":85,"props":6547,"children":6548},{"class":87,"line":387},[6549,6553,6558,6562,6567],{"type":14,"tag":85,"props":6550,"children":6551},{"style":92},[6552],{"type":20,"value":5774},{"type":14,"tag":85,"props":6554,"children":6555},{"style":98},[6556],{"type":20,"value":6557}," candidate",{"type":14,"tag":85,"props":6559,"children":6560},{"style":92},[6561],{"type":20,"value":106},{"type":14,"tag":85,"props":6563,"children":6564},{"style":184},[6565],{"type":20,"value":6566},"is_file",{"type":14,"tag":85,"props":6568,"children":6569},{"style":98},[6570],{"type":20,"value":6571},"() {\n",{"type":14,"tag":85,"props":6573,"children":6574},{"class":87,"line":410},[6575,6580,6585],{"type":14,"tag":85,"props":6576,"children":6577},{"style":92},[6578],{"type":20,"value":6579},"            return",{"type":14,"tag":85,"props":6581,"children":6582},{"style":184},[6583],{"type":20,"value":6584}," Some",{"type":14,"tag":85,"props":6586,"children":6587},{"style":98},[6588],{"type":20,"value":6589},"(candidate);\n",{"type":14,"tag":85,"props":6591,"children":6592},{"class":87,"line":419},[6593],{"type":14,"tag":85,"props":6594,"children":6595},{"style":98},[6596],{"type":20,"value":813},{"type":14,"tag":85,"props":6598,"children":6599},{"class":87,"line":427},[6600],{"type":14,"tag":85,"props":6601,"children":6602},{"style":98},[6603],{"type":20,"value":821},{"type":14,"tag":85,"props":6605,"children":6606},{"class":87,"line":443},[6607],{"type":14,"tag":85,"props":6608,"children":6609},{"emptyLinePlaceholder":268},[6610],{"type":20,"value":271},{"type":14,"tag":85,"props":6612,"children":6613},{"class":87,"line":464},[6614],{"type":14,"tag":85,"props":6615,"children":6616},{"style":184},[6617],{"type":20,"value":6618},"    None\n",{"type":14,"tag":85,"props":6620,"children":6621},{"class":87,"line":486},[6622],{"type":14,"tag":85,"props":6623,"children":6624},{"style":98},[6625],{"type":20,"value":416},{"type":14,"tag":85,"props":6627,"children":6628},{"class":87,"line":494},[6629],{"type":14,"tag":85,"props":6630,"children":6631},{"emptyLinePlaceholder":268},[6632],{"type":20,"value":271},{"type":14,"tag":85,"props":6634,"children":6635},{"class":87,"line":502},[6636,6640,6645,6650,6654,6658,6662,6666,6670,6675,6679,6683,6687,6691,6695,6699,6703],{"type":14,"tag":85,"props":6637,"children":6638},{"style":92},[6639],{"type":20,"value":937},{"type":14,"tag":85,"props":6641,"children":6642},{"style":184},[6643],{"type":20,"value":6644}," find_any_on_path",{"type":14,"tag":85,"props":6646,"children":6647},{"style":98},[6648],{"type":20,"value":6649},"(programs",{"type":14,"tag":85,"props":6651,"children":6652},{"style":92},[6653],{"type":20,"value":952},{"type":14,"tag":85,"props":6655,"children":6656},{"style":184},[6657],{"type":20,"value":322},{"type":14,"tag":85,"props":6659,"children":6660},{"style":98},[6661],{"type":20,"value":327},{"type":14,"tag":85,"props":6663,"children":6664},{"style":92},[6665],{"type":20,"value":727},{"type":14,"tag":85,"props":6667,"children":6668},{"style":184},[6669],{"type":20,"value":2069},{"type":14,"tag":85,"props":6671,"children":6672},{"style":98},[6673],{"type":20,"value":6674},">) ",{"type":14,"tag":85,"props":6676,"children":6677},{"style":92},[6678],{"type":20,"value":743},{"type":14,"tag":85,"props":6680,"children":6681},{"style":184},[6682],{"type":20,"value":6361},{"type":14,"tag":85,"props":6684,"children":6685},{"style":98},[6686],{"type":20,"value":6366},{"type":14,"tag":85,"props":6688,"children":6689},{"style":92},[6690],{"type":20,"value":667},{"type":14,"tag":85,"props":6692,"children":6693},{"style":98},[6694],{"type":20,"value":5736},{"type":14,"tag":85,"props":6696,"children":6697},{"style":92},[6698],{"type":20,"value":667},{"type":14,"tag":85,"props":6700,"children":6701},{"style":184},[6702],{"type":20,"value":6383},{"type":14,"tag":85,"props":6704,"children":6705},{"style":98},[6706],{"type":20,"value":1007},{"type":14,"tag":85,"props":6708,"children":6709},{"class":87,"line":518},[6710,6714,6719,6723],{"type":14,"tag":85,"props":6711,"children":6712},{"style":92},[6713],{"type":20,"value":1856},{"type":14,"tag":85,"props":6715,"children":6716},{"style":98},[6717],{"type":20,"value":6718}," program ",{"type":14,"tag":85,"props":6720,"children":6721},{"style":92},[6722],{"type":20,"value":1866},{"type":14,"tag":85,"props":6724,"children":6725},{"style":98},[6726],{"type":20,"value":6727}," programs {\n",{"type":14,"tag":85,"props":6729,"children":6730},{"class":87,"line":539},[6731,6735,6740,6744,6749,6753,6757],{"type":14,"tag":85,"props":6732,"children":6733},{"style":92},[6734],{"type":20,"value":5774},{"type":14,"tag":85,"props":6736,"children":6737},{"style":92},[6738],{"type":20,"value":6739}," let",{"type":14,"tag":85,"props":6741,"children":6742},{"style":184},[6743],{"type":20,"value":6584},{"type":14,"tag":85,"props":6745,"children":6746},{"style":98},[6747],{"type":20,"value":6748},"(path) ",{"type":14,"tag":85,"props":6750,"children":6751},{"style":92},[6752],{"type":20,"value":162},{"type":14,"tag":85,"props":6754,"children":6755},{"style":184},[6756],{"type":20,"value":6331},{"type":14,"tag":85,"props":6758,"children":6759},{"style":98},[6760],{"type":20,"value":6761},"(program) {\n",{"type":14,"tag":85,"props":6763,"children":6764},{"class":87,"line":561},[6765,6769,6773],{"type":14,"tag":85,"props":6766,"children":6767},{"style":92},[6768],{"type":20,"value":6579},{"type":14,"tag":85,"props":6770,"children":6771},{"style":184},[6772],{"type":20,"value":6584},{"type":14,"tag":85,"props":6774,"children":6775},{"style":98},[6776],{"type":20,"value":6777},"(path);\n",{"type":14,"tag":85,"props":6779,"children":6780},{"class":87,"line":1802},[6781],{"type":14,"tag":85,"props":6782,"children":6783},{"style":98},[6784],{"type":20,"value":813},{"type":14,"tag":85,"props":6786,"children":6787},{"class":87,"line":1842},[6788],{"type":14,"tag":85,"props":6789,"children":6790},{"style":98},[6791],{"type":20,"value":821},{"type":14,"tag":85,"props":6793,"children":6794},{"class":87,"line":1850},[6795],{"type":14,"tag":85,"props":6796,"children":6797},{"emptyLinePlaceholder":268},[6798],{"type":20,"value":271},{"type":14,"tag":85,"props":6800,"children":6801},{"class":87,"line":1891},[6802],{"type":14,"tag":85,"props":6803,"children":6804},{"style":184},[6805],{"type":20,"value":6618},{"type":14,"tag":85,"props":6807,"children":6808},{"class":87,"line":1926},[6809],{"type":14,"tag":85,"props":6810,"children":6811},{"style":98},[6812],{"type":20,"value":416},{"type":14,"tag":22,"props":6814,"children":6815},{},[6816,6818,6824],{"type":20,"value":6817},"These two functions will let us search the ",{"type":14,"tag":28,"props":6819,"children":6821},{"className":6820},[],[6822],{"type":20,"value":6823},"PATH",{"type":20,"value":6825}," env variable for the command line tools we need to invoke!",{"type":14,"tag":22,"props":6827,"children":6828},{},[6829],{"type":20,"value":6830},"We then use these to do our 2 steps in compiling from an LLVM ir to a binary",{"type":14,"tag":75,"props":6832,"children":6834},{"code":6833,"language":78,"meta":7,"className":79,"style":7},"fn compile_to_objectfile(from: &str, to: &str) -> anyhow::Result\u003C()> {\n    let clang = find_on_path(\"llc\").ok_or(anyhow::anyhow!(\"Llc not found on path\"))?;\n    std::process::Command::new(clang)\n        .args([from, \"-filetype=obj\", \"-o\", to])\n        .spawn()?\n        .wait()?\n        .success()\n        .then_some(())\n        .ok_or(anyhow::anyhow!(\"Llc failed\"))?;\n\n    Ok(())\n}\n\nfn compile_to_binary(from: &str, to: &str) -> anyhow::Result\u003C()> {\n    let clang = find_any_on_path(vec![\"clang\", \"gcc\"])\n        .ok_or(anyhow::anyhow!(\"Clang or gcc not found on path\"))?;\n    std::process::Command::new(clang)\n        .args([from, \"-no-pie\", \"-o\", to])\n        .spawn()?\n        .wait()?\n        .success()\n        .then_some(())\n        .ok_or(anyhow::anyhow!(\"Clang/gcc failed\"))?;\n\n    Ok(())\n}\n",[6835],{"type":14,"tag":28,"props":6836,"children":6837},{"__ignoreMap":7},[6838,6908,6990,7029,7066,7087,7107,7124,7140,7188,7195,7206,7213,7220,7288,7340,7388,7423,7455,7474,7493,7508,7523,7571,7578,7589],{"type":14,"tag":85,"props":6839,"children":6840},{"class":87,"line":88},[6841,6845,6850,6855,6859,6863,6867,6872,6876,6880,6884,6888,6892,6896,6900,6904],{"type":14,"tag":85,"props":6842,"children":6843},{"style":92},[6844],{"type":20,"value":937},{"type":14,"tag":85,"props":6846,"children":6847},{"style":184},[6848],{"type":20,"value":6849}," compile_to_objectfile",{"type":14,"tag":85,"props":6851,"children":6852},{"style":98},[6853],{"type":20,"value":6854},"(from",{"type":14,"tag":85,"props":6856,"children":6857},{"style":92},[6858],{"type":20,"value":952},{"type":14,"tag":85,"props":6860,"children":6861},{"style":92},[6862],{"type":20,"value":957},{"type":14,"tag":85,"props":6864,"children":6865},{"style":184},[6866],{"type":20,"value":2069},{"type":14,"tag":85,"props":6868,"children":6869},{"style":98},[6870],{"type":20,"value":6871},", to",{"type":14,"tag":85,"props":6873,"children":6874},{"style":92},[6875],{"type":20,"value":952},{"type":14,"tag":85,"props":6877,"children":6878},{"style":92},[6879],{"type":20,"value":957},{"type":14,"tag":85,"props":6881,"children":6882},{"style":184},[6883],{"type":20,"value":2069},{"type":14,"tag":85,"props":6885,"children":6886},{"style":98},[6887],{"type":20,"value":738},{"type":14,"tag":85,"props":6889,"children":6890},{"style":92},[6891],{"type":20,"value":743},{"type":14,"tag":85,"props":6893,"children":6894},{"style":184},[6895],{"type":20,"value":984},{"type":14,"tag":85,"props":6897,"children":6898},{"style":92},[6899],{"type":20,"value":667},{"type":14,"tag":85,"props":6901,"children":6902},{"style":184},[6903],{"type":20,"value":993},{"type":14,"tag":85,"props":6905,"children":6906},{"style":98},[6907],{"type":20,"value":2108},{"type":14,"tag":85,"props":6909,"children":6910},{"class":87,"line":170},[6911,6915,6920,6924,6928,6932,6937,6941,6945,6950,6954,6959,6963,6968,6972,6977,6982,6986],{"type":14,"tag":85,"props":6912,"children":6913},{"style":92},[6914],{"type":20,"value":1367},{"type":14,"tag":85,"props":6916,"children":6917},{"style":98},[6918],{"type":20,"value":6919}," clang ",{"type":14,"tag":85,"props":6921,"children":6922},{"style":92},[6923],{"type":20,"value":162},{"type":14,"tag":85,"props":6925,"children":6926},{"style":184},[6927],{"type":20,"value":6331},{"type":14,"tag":85,"props":6929,"children":6930},{"style":98},[6931],{"type":20,"value":192},{"type":14,"tag":85,"props":6933,"children":6934},{"style":870},[6935],{"type":20,"value":6936},"\"llc\"",{"type":14,"tag":85,"props":6938,"children":6939},{"style":98},[6940],{"type":20,"value":2175},{"type":14,"tag":85,"props":6942,"children":6943},{"style":92},[6944],{"type":20,"value":106},{"type":14,"tag":85,"props":6946,"children":6947},{"style":184},[6948],{"type":20,"value":6949},"ok_or",{"type":14,"tag":85,"props":6951,"children":6952},{"style":98},[6953],{"type":20,"value":192},{"type":14,"tag":85,"props":6955,"children":6956},{"style":184},[6957],{"type":20,"value":6958},"anyhow",{"type":14,"tag":85,"props":6960,"children":6961},{"style":92},[6962],{"type":20,"value":667},{"type":14,"tag":85,"props":6964,"children":6965},{"style":184},[6966],{"type":20,"value":6967},"anyhow!",{"type":14,"tag":85,"props":6969,"children":6970},{"style":98},[6971],{"type":20,"value":192},{"type":14,"tag":85,"props":6973,"children":6974},{"style":870},[6975],{"type":20,"value":6976},"\"Llc not found on path\"",{"type":14,"tag":85,"props":6978,"children":6979},{"style":98},[6980],{"type":20,"value":6981},"))",{"type":14,"tag":85,"props":6983,"children":6984},{"style":92},[6985],{"type":20,"value":1390},{"type":14,"tag":85,"props":6987,"children":6988},{"style":98},[6989],{"type":20,"value":1395},{"type":14,"tag":85,"props":6991,"children":6992},{"class":87,"line":274},[6993,6998,7002,7007,7011,7016,7020,7024],{"type":14,"tag":85,"props":6994,"children":6995},{"style":184},[6996],{"type":20,"value":6997},"    std",{"type":14,"tag":85,"props":6999,"children":7000},{"style":92},[7001],{"type":20,"value":667},{"type":14,"tag":85,"props":7003,"children":7004},{"style":184},[7005],{"type":20,"value":7006},"process",{"type":14,"tag":85,"props":7008,"children":7009},{"style":92},[7010],{"type":20,"value":667},{"type":14,"tag":85,"props":7012,"children":7013},{"style":184},[7014],{"type":20,"value":7015},"Command",{"type":14,"tag":85,"props":7017,"children":7018},{"style":92},[7019],{"type":20,"value":667},{"type":14,"tag":85,"props":7021,"children":7022},{"style":184},[7023],{"type":20,"value":1834},{"type":14,"tag":85,"props":7025,"children":7026},{"style":98},[7027],{"type":20,"value":7028},"(clang)\n",{"type":14,"tag":85,"props":7030,"children":7031},{"class":87,"line":293},[7032,7037,7042,7047,7052,7056,7061],{"type":14,"tag":85,"props":7033,"children":7034},{"style":92},[7035],{"type":20,"value":7036},"        .",{"type":14,"tag":85,"props":7038,"children":7039},{"style":184},[7040],{"type":20,"value":7041},"args",{"type":14,"tag":85,"props":7043,"children":7044},{"style":98},[7045],{"type":20,"value":7046},"([from, ",{"type":14,"tag":85,"props":7048,"children":7049},{"style":870},[7050],{"type":20,"value":7051},"\"-filetype=obj\"",{"type":14,"tag":85,"props":7053,"children":7054},{"style":98},[7055],{"type":20,"value":238},{"type":14,"tag":85,"props":7057,"children":7058},{"style":870},[7059],{"type":20,"value":7060},"\"-o\"",{"type":14,"tag":85,"props":7062,"children":7063},{"style":98},[7064],{"type":20,"value":7065},", to])\n",{"type":14,"tag":85,"props":7067,"children":7068},{"class":87,"line":340},[7069,7073,7078,7082],{"type":14,"tag":85,"props":7070,"children":7071},{"style":92},[7072],{"type":20,"value":7036},{"type":14,"tag":85,"props":7074,"children":7075},{"style":184},[7076],{"type":20,"value":7077},"spawn",{"type":14,"tag":85,"props":7079,"children":7080},{"style":98},[7081],{"type":20,"value":4464},{"type":14,"tag":85,"props":7083,"children":7084},{"style":92},[7085],{"type":20,"value":7086},"?\n",{"type":14,"tag":85,"props":7088,"children":7089},{"class":87,"line":348},[7090,7094,7099,7103],{"type":14,"tag":85,"props":7091,"children":7092},{"style":92},[7093],{"type":20,"value":7036},{"type":14,"tag":85,"props":7095,"children":7096},{"style":184},[7097],{"type":20,"value":7098},"wait",{"type":14,"tag":85,"props":7100,"children":7101},{"style":98},[7102],{"type":20,"value":4464},{"type":14,"tag":85,"props":7104,"children":7105},{"style":92},[7106],{"type":20,"value":7086},{"type":14,"tag":85,"props":7108,"children":7109},{"class":87,"line":364},[7110,7114,7119],{"type":14,"tag":85,"props":7111,"children":7112},{"style":92},[7113],{"type":20,"value":7036},{"type":14,"tag":85,"props":7115,"children":7116},{"style":184},[7117],{"type":20,"value":7118},"success",{"type":14,"tag":85,"props":7120,"children":7121},{"style":98},[7122],{"type":20,"value":7123},"()\n",{"type":14,"tag":85,"props":7125,"children":7126},{"class":87,"line":387},[7127,7131,7136],{"type":14,"tag":85,"props":7128,"children":7129},{"style":92},[7130],{"type":20,"value":7036},{"type":14,"tag":85,"props":7132,"children":7133},{"style":184},[7134],{"type":20,"value":7135},"then_some",{"type":14,"tag":85,"props":7137,"children":7138},{"style":98},[7139],{"type":20,"value":2419},{"type":14,"tag":85,"props":7141,"children":7142},{"class":87,"line":410},[7143,7147,7151,7155,7159,7163,7167,7171,7176,7180,7184],{"type":14,"tag":85,"props":7144,"children":7145},{"style":92},[7146],{"type":20,"value":7036},{"type":14,"tag":85,"props":7148,"children":7149},{"style":184},[7150],{"type":20,"value":6949},{"type":14,"tag":85,"props":7152,"children":7153},{"style":98},[7154],{"type":20,"value":192},{"type":14,"tag":85,"props":7156,"children":7157},{"style":184},[7158],{"type":20,"value":6958},{"type":14,"tag":85,"props":7160,"children":7161},{"style":92},[7162],{"type":20,"value":667},{"type":14,"tag":85,"props":7164,"children":7165},{"style":184},[7166],{"type":20,"value":6967},{"type":14,"tag":85,"props":7168,"children":7169},{"style":98},[7170],{"type":20,"value":192},{"type":14,"tag":85,"props":7172,"children":7173},{"style":870},[7174],{"type":20,"value":7175},"\"Llc failed\"",{"type":14,"tag":85,"props":7177,"children":7178},{"style":98},[7179],{"type":20,"value":6981},{"type":14,"tag":85,"props":7181,"children":7182},{"style":92},[7183],{"type":20,"value":1390},{"type":14,"tag":85,"props":7185,"children":7186},{"style":98},[7187],{"type":20,"value":1395},{"type":14,"tag":85,"props":7189,"children":7190},{"class":87,"line":419},[7191],{"type":14,"tag":85,"props":7192,"children":7193},{"emptyLinePlaceholder":268},[7194],{"type":20,"value":271},{"type":14,"tag":85,"props":7196,"children":7197},{"class":87,"line":427},[7198,7202],{"type":14,"tag":85,"props":7199,"children":7200},{"style":184},[7201],{"type":20,"value":1979},{"type":14,"tag":85,"props":7203,"children":7204},{"style":98},[7205],{"type":20,"value":2419},{"type":14,"tag":85,"props":7207,"children":7208},{"class":87,"line":443},[7209],{"type":14,"tag":85,"props":7210,"children":7211},{"style":98},[7212],{"type":20,"value":416},{"type":14,"tag":85,"props":7214,"children":7215},{"class":87,"line":464},[7216],{"type":14,"tag":85,"props":7217,"children":7218},{"emptyLinePlaceholder":268},[7219],{"type":20,"value":271},{"type":14,"tag":85,"props":7221,"children":7222},{"class":87,"line":486},[7223,7227,7232,7236,7240,7244,7248,7252,7256,7260,7264,7268,7272,7276,7280,7284],{"type":14,"tag":85,"props":7224,"children":7225},{"style":92},[7226],{"type":20,"value":937},{"type":14,"tag":85,"props":7228,"children":7229},{"style":184},[7230],{"type":20,"value":7231}," compile_to_binary",{"type":14,"tag":85,"props":7233,"children":7234},{"style":98},[7235],{"type":20,"value":6854},{"type":14,"tag":85,"props":7237,"children":7238},{"style":92},[7239],{"type":20,"value":952},{"type":14,"tag":85,"props":7241,"children":7242},{"style":92},[7243],{"type":20,"value":957},{"type":14,"tag":85,"props":7245,"children":7246},{"style":184},[7247],{"type":20,"value":2069},{"type":14,"tag":85,"props":7249,"children":7250},{"style":98},[7251],{"type":20,"value":6871},{"type":14,"tag":85,"props":7253,"children":7254},{"style":92},[7255],{"type":20,"value":952},{"type":14,"tag":85,"props":7257,"children":7258},{"style":92},[7259],{"type":20,"value":957},{"type":14,"tag":85,"props":7261,"children":7262},{"style":184},[7263],{"type":20,"value":2069},{"type":14,"tag":85,"props":7265,"children":7266},{"style":98},[7267],{"type":20,"value":738},{"type":14,"tag":85,"props":7269,"children":7270},{"style":92},[7271],{"type":20,"value":743},{"type":14,"tag":85,"props":7273,"children":7274},{"style":184},[7275],{"type":20,"value":984},{"type":14,"tag":85,"props":7277,"children":7278},{"style":92},[7279],{"type":20,"value":667},{"type":14,"tag":85,"props":7281,"children":7282},{"style":184},[7283],{"type":20,"value":993},{"type":14,"tag":85,"props":7285,"children":7286},{"style":98},[7287],{"type":20,"value":2108},{"type":14,"tag":85,"props":7289,"children":7290},{"class":87,"line":494},[7291,7295,7299,7303,7307,7311,7316,7321,7326,7330,7335],{"type":14,"tag":85,"props":7292,"children":7293},{"style":92},[7294],{"type":20,"value":1367},{"type":14,"tag":85,"props":7296,"children":7297},{"style":98},[7298],{"type":20,"value":6919},{"type":14,"tag":85,"props":7300,"children":7301},{"style":92},[7302],{"type":20,"value":162},{"type":14,"tag":85,"props":7304,"children":7305},{"style":184},[7306],{"type":20,"value":6644},{"type":14,"tag":85,"props":7308,"children":7309},{"style":98},[7310],{"type":20,"value":192},{"type":14,"tag":85,"props":7312,"children":7313},{"style":184},[7314],{"type":20,"value":7315},"vec!",{"type":14,"tag":85,"props":7317,"children":7318},{"style":98},[7319],{"type":20,"value":7320},"[",{"type":14,"tag":85,"props":7322,"children":7323},{"style":870},[7324],{"type":20,"value":7325},"\"clang\"",{"type":14,"tag":85,"props":7327,"children":7328},{"style":98},[7329],{"type":20,"value":238},{"type":14,"tag":85,"props":7331,"children":7332},{"style":870},[7333],{"type":20,"value":7334},"\"gcc\"",{"type":14,"tag":85,"props":7336,"children":7337},{"style":98},[7338],{"type":20,"value":7339},"])\n",{"type":14,"tag":85,"props":7341,"children":7342},{"class":87,"line":502},[7343,7347,7351,7355,7359,7363,7367,7371,7376,7380,7384],{"type":14,"tag":85,"props":7344,"children":7345},{"style":92},[7346],{"type":20,"value":7036},{"type":14,"tag":85,"props":7348,"children":7349},{"style":184},[7350],{"type":20,"value":6949},{"type":14,"tag":85,"props":7352,"children":7353},{"style":98},[7354],{"type":20,"value":192},{"type":14,"tag":85,"props":7356,"children":7357},{"style":184},[7358],{"type":20,"value":6958},{"type":14,"tag":85,"props":7360,"children":7361},{"style":92},[7362],{"type":20,"value":667},{"type":14,"tag":85,"props":7364,"children":7365},{"style":184},[7366],{"type":20,"value":6967},{"type":14,"tag":85,"props":7368,"children":7369},{"style":98},[7370],{"type":20,"value":192},{"type":14,"tag":85,"props":7372,"children":7373},{"style":870},[7374],{"type":20,"value":7375},"\"Clang or gcc not found on path\"",{"type":14,"tag":85,"props":7377,"children":7378},{"style":98},[7379],{"type":20,"value":6981},{"type":14,"tag":85,"props":7381,"children":7382},{"style":92},[7383],{"type":20,"value":1390},{"type":14,"tag":85,"props":7385,"children":7386},{"style":98},[7387],{"type":20,"value":1395},{"type":14,"tag":85,"props":7389,"children":7390},{"class":87,"line":518},[7391,7395,7399,7403,7407,7411,7415,7419],{"type":14,"tag":85,"props":7392,"children":7393},{"style":184},[7394],{"type":20,"value":6997},{"type":14,"tag":85,"props":7396,"children":7397},{"style":92},[7398],{"type":20,"value":667},{"type":14,"tag":85,"props":7400,"children":7401},{"style":184},[7402],{"type":20,"value":7006},{"type":14,"tag":85,"props":7404,"children":7405},{"style":92},[7406],{"type":20,"value":667},{"type":14,"tag":85,"props":7408,"children":7409},{"style":184},[7410],{"type":20,"value":7015},{"type":14,"tag":85,"props":7412,"children":7413},{"style":92},[7414],{"type":20,"value":667},{"type":14,"tag":85,"props":7416,"children":7417},{"style":184},[7418],{"type":20,"value":1834},{"type":14,"tag":85,"props":7420,"children":7421},{"style":98},[7422],{"type":20,"value":7028},{"type":14,"tag":85,"props":7424,"children":7425},{"class":87,"line":539},[7426,7430,7434,7438,7443,7447,7451],{"type":14,"tag":85,"props":7427,"children":7428},{"style":92},[7429],{"type":20,"value":7036},{"type":14,"tag":85,"props":7431,"children":7432},{"style":184},[7433],{"type":20,"value":7041},{"type":14,"tag":85,"props":7435,"children":7436},{"style":98},[7437],{"type":20,"value":7046},{"type":14,"tag":85,"props":7439,"children":7440},{"style":870},[7441],{"type":20,"value":7442},"\"-no-pie\"",{"type":14,"tag":85,"props":7444,"children":7445},{"style":98},[7446],{"type":20,"value":238},{"type":14,"tag":85,"props":7448,"children":7449},{"style":870},[7450],{"type":20,"value":7060},{"type":14,"tag":85,"props":7452,"children":7453},{"style":98},[7454],{"type":20,"value":7065},{"type":14,"tag":85,"props":7456,"children":7457},{"class":87,"line":561},[7458,7462,7466,7470],{"type":14,"tag":85,"props":7459,"children":7460},{"style":92},[7461],{"type":20,"value":7036},{"type":14,"tag":85,"props":7463,"children":7464},{"style":184},[7465],{"type":20,"value":7077},{"type":14,"tag":85,"props":7467,"children":7468},{"style":98},[7469],{"type":20,"value":4464},{"type":14,"tag":85,"props":7471,"children":7472},{"style":92},[7473],{"type":20,"value":7086},{"type":14,"tag":85,"props":7475,"children":7476},{"class":87,"line":1802},[7477,7481,7485,7489],{"type":14,"tag":85,"props":7478,"children":7479},{"style":92},[7480],{"type":20,"value":7036},{"type":14,"tag":85,"props":7482,"children":7483},{"style":184},[7484],{"type":20,"value":7098},{"type":14,"tag":85,"props":7486,"children":7487},{"style":98},[7488],{"type":20,"value":4464},{"type":14,"tag":85,"props":7490,"children":7491},{"style":92},[7492],{"type":20,"value":7086},{"type":14,"tag":85,"props":7494,"children":7495},{"class":87,"line":1842},[7496,7500,7504],{"type":14,"tag":85,"props":7497,"children":7498},{"style":92},[7499],{"type":20,"value":7036},{"type":14,"tag":85,"props":7501,"children":7502},{"style":184},[7503],{"type":20,"value":7118},{"type":14,"tag":85,"props":7505,"children":7506},{"style":98},[7507],{"type":20,"value":7123},{"type":14,"tag":85,"props":7509,"children":7510},{"class":87,"line":1850},[7511,7515,7519],{"type":14,"tag":85,"props":7512,"children":7513},{"style":92},[7514],{"type":20,"value":7036},{"type":14,"tag":85,"props":7516,"children":7517},{"style":184},[7518],{"type":20,"value":7135},{"type":14,"tag":85,"props":7520,"children":7521},{"style":98},[7522],{"type":20,"value":2419},{"type":14,"tag":85,"props":7524,"children":7525},{"class":87,"line":1891},[7526,7530,7534,7538,7542,7546,7550,7554,7559,7563,7567],{"type":14,"tag":85,"props":7527,"children":7528},{"style":92},[7529],{"type":20,"value":7036},{"type":14,"tag":85,"props":7531,"children":7532},{"style":184},[7533],{"type":20,"value":6949},{"type":14,"tag":85,"props":7535,"children":7536},{"style":98},[7537],{"type":20,"value":192},{"type":14,"tag":85,"props":7539,"children":7540},{"style":184},[7541],{"type":20,"value":6958},{"type":14,"tag":85,"props":7543,"children":7544},{"style":92},[7545],{"type":20,"value":667},{"type":14,"tag":85,"props":7547,"children":7548},{"style":184},[7549],{"type":20,"value":6967},{"type":14,"tag":85,"props":7551,"children":7552},{"style":98},[7553],{"type":20,"value":192},{"type":14,"tag":85,"props":7555,"children":7556},{"style":870},[7557],{"type":20,"value":7558},"\"Clang/gcc failed\"",{"type":14,"tag":85,"props":7560,"children":7561},{"style":98},[7562],{"type":20,"value":6981},{"type":14,"tag":85,"props":7564,"children":7565},{"style":92},[7566],{"type":20,"value":1390},{"type":14,"tag":85,"props":7568,"children":7569},{"style":98},[7570],{"type":20,"value":1395},{"type":14,"tag":85,"props":7572,"children":7573},{"class":87,"line":1926},[7574],{"type":14,"tag":85,"props":7575,"children":7576},{"emptyLinePlaceholder":268},[7577],{"type":20,"value":271},{"type":14,"tag":85,"props":7579,"children":7580},{"class":87,"line":1934},[7581,7585],{"type":14,"tag":85,"props":7582,"children":7583},{"style":184},[7584],{"type":20,"value":1979},{"type":14,"tag":85,"props":7586,"children":7587},{"style":98},[7588],{"type":20,"value":2419},{"type":14,"tag":85,"props":7590,"children":7591},{"class":87,"line":1957},[7592],{"type":14,"tag":85,"props":7593,"children":7594},{"style":98},[7595],{"type":20,"value":416},{"type":14,"tag":22,"props":7597,"children":7598},{},[7599,7601,7606],{"type":20,"value":7600},"Then we can use these in the ",{"type":14,"tag":28,"props":7602,"children":7604},{"className":7603},[],[7605],{"type":20,"value":5967},{"type":20,"value":7607}," function",{"type":14,"tag":75,"props":7609,"children":7611},{"code":7610,"language":78,"meta":7,"className":79,"style":7},"pub fn build(\n    file_name: &str,\n    output_file: &str,\n    options: CompilerOptions,\n) -> anyhow::Result\u003C()> {\n    // ...\n\n    let llvm_ir_output_file = temp_file::empty();\n    code_gen.output_to_file(llvm_ir_output_file.path(), &options);\n\n    let object_file = temp_file::empty();\n    compile_to_objectfile(\n        llvm_ir_output_file.path().to_str().unwrap(),\n        object_file.path().to_str().unwrap(),\n    )?;\n    compile_to_binary(object_file.path().to_str().unwrap(), output_file)?;\n\n    Ok(())\n}\n",[7612],{"type":14,"tag":28,"props":7613,"children":7614},{"__ignoreMap":7},[7615,7634,7658,7682,7702,7729,7737,7744,7775,7814,7821,7853,7865,7910,7954,7970,8028,8035,8046],{"type":14,"tag":85,"props":7616,"children":7617},{"class":87,"line":88},[7618,7622,7626,7630],{"type":14,"tag":85,"props":7619,"children":7620},{"style":92},[7621],{"type":20,"value":299},{"type":14,"tag":85,"props":7623,"children":7624},{"style":92},[7625],{"type":20,"value":1732},{"type":14,"tag":85,"props":7627,"children":7628},{"style":184},[7629],{"type":20,"value":2051},{"type":14,"tag":85,"props":7631,"children":7632},{"style":98},[7633],{"type":20,"value":2458},{"type":14,"tag":85,"props":7635,"children":7636},{"class":87,"line":170},[7637,7642,7646,7650,7654],{"type":14,"tag":85,"props":7638,"children":7639},{"style":98},[7640],{"type":20,"value":7641},"    file_name",{"type":14,"tag":85,"props":7643,"children":7644},{"style":92},[7645],{"type":20,"value":952},{"type":14,"tag":85,"props":7647,"children":7648},{"style":92},[7649],{"type":20,"value":957},{"type":14,"tag":85,"props":7651,"children":7652},{"style":184},[7653],{"type":20,"value":2069},{"type":14,"tag":85,"props":7655,"children":7656},{"style":98},[7657],{"type":20,"value":805},{"type":14,"tag":85,"props":7659,"children":7660},{"class":87,"line":274},[7661,7666,7670,7674,7678],{"type":14,"tag":85,"props":7662,"children":7663},{"style":98},[7664],{"type":20,"value":7665},"    output_file",{"type":14,"tag":85,"props":7667,"children":7668},{"style":92},[7669],{"type":20,"value":952},{"type":14,"tag":85,"props":7671,"children":7672},{"style":92},[7673],{"type":20,"value":957},{"type":14,"tag":85,"props":7675,"children":7676},{"style":184},[7677],{"type":20,"value":2069},{"type":14,"tag":85,"props":7679,"children":7680},{"style":98},[7681],{"type":20,"value":805},{"type":14,"tag":85,"props":7683,"children":7684},{"class":87,"line":293},[7685,7690,7694,7698],{"type":14,"tag":85,"props":7686,"children":7687},{"style":98},[7688],{"type":20,"value":7689},"    options",{"type":14,"tag":85,"props":7691,"children":7692},{"style":92},[7693],{"type":20,"value":952},{"type":14,"tag":85,"props":7695,"children":7696},{"style":184},[7697],{"type":20,"value":2083},{"type":14,"tag":85,"props":7699,"children":7700},{"style":98},[7701],{"type":20,"value":805},{"type":14,"tag":85,"props":7703,"children":7704},{"class":87,"line":340},[7705,7709,7713,7717,7721,7725],{"type":14,"tag":85,"props":7706,"children":7707},{"style":98},[7708],{"type":20,"value":738},{"type":14,"tag":85,"props":7710,"children":7711},{"style":92},[7712],{"type":20,"value":743},{"type":14,"tag":85,"props":7714,"children":7715},{"style":184},[7716],{"type":20,"value":984},{"type":14,"tag":85,"props":7718,"children":7719},{"style":92},[7720],{"type":20,"value":667},{"type":14,"tag":85,"props":7722,"children":7723},{"style":184},[7724],{"type":20,"value":993},{"type":14,"tag":85,"props":7726,"children":7727},{"style":98},[7728],{"type":20,"value":2108},{"type":14,"tag":85,"props":7730,"children":7731},{"class":87,"line":348},[7732],{"type":14,"tag":85,"props":7733,"children":7734},{"style":259},[7735],{"type":20,"value":7736},"    // ...\n",{"type":14,"tag":85,"props":7738,"children":7739},{"class":87,"line":364},[7740],{"type":14,"tag":85,"props":7741,"children":7742},{"emptyLinePlaceholder":268},[7743],{"type":20,"value":271},{"type":14,"tag":85,"props":7745,"children":7746},{"class":87,"line":387},[7747,7751,7755,7759,7763,7767,7771],{"type":14,"tag":85,"props":7748,"children":7749},{"style":92},[7750],{"type":20,"value":1367},{"type":14,"tag":85,"props":7752,"children":7753},{"style":98},[7754],{"type":20,"value":6180},{"type":14,"tag":85,"props":7756,"children":7757},{"style":92},[7758],{"type":20,"value":162},{"type":14,"tag":85,"props":7760,"children":7761},{"style":184},[7762],{"type":20,"value":6189},{"type":14,"tag":85,"props":7764,"children":7765},{"style":92},[7766],{"type":20,"value":667},{"type":14,"tag":85,"props":7768,"children":7769},{"style":184},[7770],{"type":20,"value":6198},{"type":14,"tag":85,"props":7772,"children":7773},{"style":98},[7774],{"type":20,"value":1839},{"type":14,"tag":85,"props":7776,"children":7777},{"class":87,"line":410},[7778,7782,7786,7790,7794,7798,7802,7806,7810],{"type":14,"tag":85,"props":7779,"children":7780},{"style":98},[7781],{"type":20,"value":6139},{"type":14,"tag":85,"props":7783,"children":7784},{"style":92},[7785],{"type":20,"value":106},{"type":14,"tag":85,"props":7787,"children":7788},{"style":184},[7789],{"type":20,"value":6218},{"type":14,"tag":85,"props":7791,"children":7792},{"style":98},[7793],{"type":20,"value":6223},{"type":14,"tag":85,"props":7795,"children":7796},{"style":92},[7797],{"type":20,"value":106},{"type":14,"tag":85,"props":7799,"children":7800},{"style":184},[7801],{"type":20,"value":5736},{"type":14,"tag":85,"props":7803,"children":7804},{"style":98},[7805],{"type":20,"value":6236},{"type":14,"tag":85,"props":7807,"children":7808},{"style":92},[7809],{"type":20,"value":727},{"type":14,"tag":85,"props":7811,"children":7812},{"style":98},[7813],{"type":20,"value":6245},{"type":14,"tag":85,"props":7815,"children":7816},{"class":87,"line":419},[7817],{"type":14,"tag":85,"props":7818,"children":7819},{"emptyLinePlaceholder":268},[7820],{"type":20,"value":271},{"type":14,"tag":85,"props":7822,"children":7823},{"class":87,"line":427},[7824,7828,7833,7837,7841,7845,7849],{"type":14,"tag":85,"props":7825,"children":7826},{"style":92},[7827],{"type":20,"value":1367},{"type":14,"tag":85,"props":7829,"children":7830},{"style":98},[7831],{"type":20,"value":7832}," object_file ",{"type":14,"tag":85,"props":7834,"children":7835},{"style":92},[7836],{"type":20,"value":162},{"type":14,"tag":85,"props":7838,"children":7839},{"style":184},[7840],{"type":20,"value":6189},{"type":14,"tag":85,"props":7842,"children":7843},{"style":92},[7844],{"type":20,"value":667},{"type":14,"tag":85,"props":7846,"children":7847},{"style":184},[7848],{"type":20,"value":6198},{"type":14,"tag":85,"props":7850,"children":7851},{"style":98},[7852],{"type":20,"value":1839},{"type":14,"tag":85,"props":7854,"children":7855},{"class":87,"line":443},[7856,7861],{"type":14,"tag":85,"props":7857,"children":7858},{"style":184},[7859],{"type":20,"value":7860},"    compile_to_objectfile",{"type":14,"tag":85,"props":7862,"children":7863},{"style":98},[7864],{"type":20,"value":2458},{"type":14,"tag":85,"props":7866,"children":7867},{"class":87,"line":464},[7868,7873,7877,7881,7885,7889,7894,7898,7902,7906],{"type":14,"tag":85,"props":7869,"children":7870},{"style":98},[7871],{"type":20,"value":7872},"        llvm_ir_output_file",{"type":14,"tag":85,"props":7874,"children":7875},{"style":92},[7876],{"type":20,"value":106},{"type":14,"tag":85,"props":7878,"children":7879},{"style":184},[7880],{"type":20,"value":5736},{"type":14,"tag":85,"props":7882,"children":7883},{"style":98},[7884],{"type":20,"value":4464},{"type":14,"tag":85,"props":7886,"children":7887},{"style":92},[7888],{"type":20,"value":106},{"type":14,"tag":85,"props":7890,"children":7891},{"style":184},[7892],{"type":20,"value":7893},"to_str",{"type":14,"tag":85,"props":7895,"children":7896},{"style":98},[7897],{"type":20,"value":4464},{"type":14,"tag":85,"props":7899,"children":7900},{"style":92},[7901],{"type":20,"value":106},{"type":14,"tag":85,"props":7903,"children":7904},{"style":184},[7905],{"type":20,"value":4641},{"type":14,"tag":85,"props":7907,"children":7908},{"style":98},[7909],{"type":20,"value":3802},{"type":14,"tag":85,"props":7911,"children":7912},{"class":87,"line":486},[7913,7918,7922,7926,7930,7934,7938,7942,7946,7950],{"type":14,"tag":85,"props":7914,"children":7915},{"style":98},[7916],{"type":20,"value":7917},"        object_file",{"type":14,"tag":85,"props":7919,"children":7920},{"style":92},[7921],{"type":20,"value":106},{"type":14,"tag":85,"props":7923,"children":7924},{"style":184},[7925],{"type":20,"value":5736},{"type":14,"tag":85,"props":7927,"children":7928},{"style":98},[7929],{"type":20,"value":4464},{"type":14,"tag":85,"props":7931,"children":7932},{"style":92},[7933],{"type":20,"value":106},{"type":14,"tag":85,"props":7935,"children":7936},{"style":184},[7937],{"type":20,"value":7893},{"type":14,"tag":85,"props":7939,"children":7940},{"style":98},[7941],{"type":20,"value":4464},{"type":14,"tag":85,"props":7943,"children":7944},{"style":92},[7945],{"type":20,"value":106},{"type":14,"tag":85,"props":7947,"children":7948},{"style":184},[7949],{"type":20,"value":4641},{"type":14,"tag":85,"props":7951,"children":7952},{"style":98},[7953],{"type":20,"value":3802},{"type":14,"tag":85,"props":7955,"children":7956},{"class":87,"line":494},[7957,7962,7966],{"type":14,"tag":85,"props":7958,"children":7959},{"style":98},[7960],{"type":20,"value":7961},"    )",{"type":14,"tag":85,"props":7963,"children":7964},{"style":92},[7965],{"type":20,"value":1390},{"type":14,"tag":85,"props":7967,"children":7968},{"style":98},[7969],{"type":20,"value":1395},{"type":14,"tag":85,"props":7971,"children":7972},{"class":87,"line":502},[7973,7978,7983,7987,7991,7995,7999,8003,8007,8011,8015,8020,8024],{"type":14,"tag":85,"props":7974,"children":7975},{"style":184},[7976],{"type":20,"value":7977},"    compile_to_binary",{"type":14,"tag":85,"props":7979,"children":7980},{"style":98},[7981],{"type":20,"value":7982},"(object_file",{"type":14,"tag":85,"props":7984,"children":7985},{"style":92},[7986],{"type":20,"value":106},{"type":14,"tag":85,"props":7988,"children":7989},{"style":184},[7990],{"type":20,"value":5736},{"type":14,"tag":85,"props":7992,"children":7993},{"style":98},[7994],{"type":20,"value":4464},{"type":14,"tag":85,"props":7996,"children":7997},{"style":92},[7998],{"type":20,"value":106},{"type":14,"tag":85,"props":8000,"children":8001},{"style":184},[8002],{"type":20,"value":7893},{"type":14,"tag":85,"props":8004,"children":8005},{"style":98},[8006],{"type":20,"value":4464},{"type":14,"tag":85,"props":8008,"children":8009},{"style":92},[8010],{"type":20,"value":106},{"type":14,"tag":85,"props":8012,"children":8013},{"style":184},[8014],{"type":20,"value":4641},{"type":14,"tag":85,"props":8016,"children":8017},{"style":98},[8018],{"type":20,"value":8019},"(), output_file)",{"type":14,"tag":85,"props":8021,"children":8022},{"style":92},[8023],{"type":20,"value":1390},{"type":14,"tag":85,"props":8025,"children":8026},{"style":98},[8027],{"type":20,"value":1395},{"type":14,"tag":85,"props":8029,"children":8030},{"class":87,"line":518},[8031],{"type":14,"tag":85,"props":8032,"children":8033},{"emptyLinePlaceholder":268},[8034],{"type":20,"value":271},{"type":14,"tag":85,"props":8036,"children":8037},{"class":87,"line":539},[8038,8042],{"type":14,"tag":85,"props":8039,"children":8040},{"style":184},[8041],{"type":20,"value":1979},{"type":14,"tag":85,"props":8043,"children":8044},{"style":98},[8045],{"type":20,"value":2419},{"type":14,"tag":85,"props":8047,"children":8048},{"class":87,"line":561},[8049],{"type":14,"tag":85,"props":8050,"children":8051},{"style":98},[8052],{"type":20,"value":416},{"type":14,"tag":22,"props":8054,"children":8055},{},[8056],{"type":20,"value":8057},"let's update our Run code to generate an output file and run it",{"type":14,"tag":75,"props":8059,"children":8061},{"code":8060,"language":78,"meta":7,"className":79,"style":7},"// main.rs\n    match arguments.command {\n        CompilerCommand::Run { input_file } => {\n            let output_file = temp_file::empty();\n            build(\n                &input_file,\n                output_file.path().to_str().unwrap(),\n                compiler_options,\n            )\n            .context(\"Building input file\")?;\n\n            let output = std::process::Command::new(output_file.path())\n                .spawn()?\n                .wait()?;\n\n            std::process::exit(output.code().unwrap_or(1));\n        }\n    }\n\n",[8062],{"type":14,"tag":28,"props":8063,"children":8064},{"__ignoreMap":7},[8065,8073,8094,8124,8156,8168,8181,8225,8233,8241,8273,8280,8342,8362,8385,8392,8457,8464],{"type":14,"tag":85,"props":8066,"children":8067},{"class":87,"line":88},[8068],{"type":14,"tag":85,"props":8069,"children":8070},{"style":259},[8071],{"type":20,"value":8072},"// main.rs\n",{"type":14,"tag":85,"props":8074,"children":8075},{"class":87,"line":170},[8076,8080,8085,8089],{"type":14,"tag":85,"props":8077,"children":8078},{"style":92},[8079],{"type":20,"value":1015},{"type":14,"tag":85,"props":8081,"children":8082},{"style":98},[8083],{"type":20,"value":8084}," arguments",{"type":14,"tag":85,"props":8086,"children":8087},{"style":92},[8088],{"type":20,"value":106},{"type":14,"tag":85,"props":8090,"children":8091},{"style":98},[8092],{"type":20,"value":8093},"command {\n",{"type":14,"tag":85,"props":8095,"children":8096},{"class":87,"line":274},[8097,8102,8106,8111,8116,8120],{"type":14,"tag":85,"props":8098,"children":8099},{"style":184},[8100],{"type":20,"value":8101},"        CompilerCommand",{"type":14,"tag":85,"props":8103,"children":8104},{"style":92},[8105],{"type":20,"value":667},{"type":14,"tag":85,"props":8107,"children":8108},{"style":184},[8109],{"type":20,"value":8110},"Run",{"type":14,"tag":85,"props":8112,"children":8113},{"style":98},[8114],{"type":20,"value":8115}," { input_file } ",{"type":14,"tag":85,"props":8117,"children":8118},{"style":92},[8119],{"type":20,"value":795},{"type":14,"tag":85,"props":8121,"children":8122},{"style":98},[8123],{"type":20,"value":384},{"type":14,"tag":85,"props":8125,"children":8126},{"class":87,"line":293},[8127,8131,8136,8140,8144,8148,8152],{"type":14,"tag":85,"props":8128,"children":8129},{"style":92},[8130],{"type":20,"value":1623},{"type":14,"tag":85,"props":8132,"children":8133},{"style":98},[8134],{"type":20,"value":8135}," output_file ",{"type":14,"tag":85,"props":8137,"children":8138},{"style":92},[8139],{"type":20,"value":162},{"type":14,"tag":85,"props":8141,"children":8142},{"style":184},[8143],{"type":20,"value":6189},{"type":14,"tag":85,"props":8145,"children":8146},{"style":92},[8147],{"type":20,"value":667},{"type":14,"tag":85,"props":8149,"children":8150},{"style":184},[8151],{"type":20,"value":6198},{"type":14,"tag":85,"props":8153,"children":8154},{"style":98},[8155],{"type":20,"value":1839},{"type":14,"tag":85,"props":8157,"children":8158},{"class":87,"line":340},[8159,8164],{"type":14,"tag":85,"props":8160,"children":8161},{"style":184},[8162],{"type":20,"value":8163},"            build",{"type":14,"tag":85,"props":8165,"children":8166},{"style":98},[8167],{"type":20,"value":2458},{"type":14,"tag":85,"props":8169,"children":8170},{"class":87,"line":348},[8171,8176],{"type":14,"tag":85,"props":8172,"children":8173},{"style":92},[8174],{"type":20,"value":8175},"                &",{"type":14,"tag":85,"props":8177,"children":8178},{"style":98},[8179],{"type":20,"value":8180},"input_file,\n",{"type":14,"tag":85,"props":8182,"children":8183},{"class":87,"line":364},[8184,8189,8193,8197,8201,8205,8209,8213,8217,8221],{"type":14,"tag":85,"props":8185,"children":8186},{"style":98},[8187],{"type":20,"value":8188},"                output_file",{"type":14,"tag":85,"props":8190,"children":8191},{"style":92},[8192],{"type":20,"value":106},{"type":14,"tag":85,"props":8194,"children":8195},{"style":184},[8196],{"type":20,"value":5736},{"type":14,"tag":85,"props":8198,"children":8199},{"style":98},[8200],{"type":20,"value":4464},{"type":14,"tag":85,"props":8202,"children":8203},{"style":92},[8204],{"type":20,"value":106},{"type":14,"tag":85,"props":8206,"children":8207},{"style":184},[8208],{"type":20,"value":7893},{"type":14,"tag":85,"props":8210,"children":8211},{"style":98},[8212],{"type":20,"value":4464},{"type":14,"tag":85,"props":8214,"children":8215},{"style":92},[8216],{"type":20,"value":106},{"type":14,"tag":85,"props":8218,"children":8219},{"style":184},[8220],{"type":20,"value":4641},{"type":14,"tag":85,"props":8222,"children":8223},{"style":98},[8224],{"type":20,"value":3802},{"type":14,"tag":85,"props":8226,"children":8227},{"class":87,"line":387},[8228],{"type":14,"tag":85,"props":8229,"children":8230},{"style":98},[8231],{"type":20,"value":8232},"                compiler_options,\n",{"type":14,"tag":85,"props":8234,"children":8235},{"class":87,"line":410},[8236],{"type":14,"tag":85,"props":8237,"children":8238},{"style":98},[8239],{"type":20,"value":8240},"            )\n",{"type":14,"tag":85,"props":8242,"children":8243},{"class":87,"line":419},[8244,8248,8252,8256,8261,8265,8269],{"type":14,"tag":85,"props":8245,"children":8246},{"style":92},[8247],{"type":20,"value":4763},{"type":14,"tag":85,"props":8249,"children":8250},{"style":184},[8251],{"type":20,"value":2161},{"type":14,"tag":85,"props":8253,"children":8254},{"style":98},[8255],{"type":20,"value":192},{"type":14,"tag":85,"props":8257,"children":8258},{"style":870},[8259],{"type":20,"value":8260},"\"Building input file\"",{"type":14,"tag":85,"props":8262,"children":8263},{"style":98},[8264],{"type":20,"value":2175},{"type":14,"tag":85,"props":8266,"children":8267},{"style":92},[8268],{"type":20,"value":1390},{"type":14,"tag":85,"props":8270,"children":8271},{"style":98},[8272],{"type":20,"value":1395},{"type":14,"tag":85,"props":8274,"children":8275},{"class":87,"line":427},[8276],{"type":14,"tag":85,"props":8277,"children":8278},{"emptyLinePlaceholder":268},[8279],{"type":20,"value":271},{"type":14,"tag":85,"props":8281,"children":8282},{"class":87,"line":443},[8283,8287,8292,8296,8300,8304,8308,8312,8316,8320,8324,8329,8333,8337],{"type":14,"tag":85,"props":8284,"children":8285},{"style":92},[8286],{"type":20,"value":1623},{"type":14,"tag":85,"props":8288,"children":8289},{"style":98},[8290],{"type":20,"value":8291}," output ",{"type":14,"tag":85,"props":8293,"children":8294},{"style":92},[8295],{"type":20,"value":162},{"type":14,"tag":85,"props":8297,"children":8298},{"style":184},[8299],{"type":20,"value":2129},{"type":14,"tag":85,"props":8301,"children":8302},{"style":92},[8303],{"type":20,"value":667},{"type":14,"tag":85,"props":8305,"children":8306},{"style":184},[8307],{"type":20,"value":7006},{"type":14,"tag":85,"props":8309,"children":8310},{"style":92},[8311],{"type":20,"value":667},{"type":14,"tag":85,"props":8313,"children":8314},{"style":184},[8315],{"type":20,"value":7015},{"type":14,"tag":85,"props":8317,"children":8318},{"style":92},[8319],{"type":20,"value":667},{"type":14,"tag":85,"props":8321,"children":8322},{"style":184},[8323],{"type":20,"value":1834},{"type":14,"tag":85,"props":8325,"children":8326},{"style":98},[8327],{"type":20,"value":8328},"(output_file",{"type":14,"tag":85,"props":8330,"children":8331},{"style":92},[8332],{"type":20,"value":106},{"type":14,"tag":85,"props":8334,"children":8335},{"style":184},[8336],{"type":20,"value":5736},{"type":14,"tag":85,"props":8338,"children":8339},{"style":98},[8340],{"type":20,"value":8341},"())\n",{"type":14,"tag":85,"props":8343,"children":8344},{"class":87,"line":464},[8345,8350,8354,8358],{"type":14,"tag":85,"props":8346,"children":8347},{"style":92},[8348],{"type":20,"value":8349},"                .",{"type":14,"tag":85,"props":8351,"children":8352},{"style":184},[8353],{"type":20,"value":7077},{"type":14,"tag":85,"props":8355,"children":8356},{"style":98},[8357],{"type":20,"value":4464},{"type":14,"tag":85,"props":8359,"children":8360},{"style":92},[8361],{"type":20,"value":7086},{"type":14,"tag":85,"props":8363,"children":8364},{"class":87,"line":486},[8365,8369,8373,8377,8381],{"type":14,"tag":85,"props":8366,"children":8367},{"style":92},[8368],{"type":20,"value":8349},{"type":14,"tag":85,"props":8370,"children":8371},{"style":184},[8372],{"type":20,"value":7098},{"type":14,"tag":85,"props":8374,"children":8375},{"style":98},[8376],{"type":20,"value":4464},{"type":14,"tag":85,"props":8378,"children":8379},{"style":92},[8380],{"type":20,"value":1390},{"type":14,"tag":85,"props":8382,"children":8383},{"style":98},[8384],{"type":20,"value":1395},{"type":14,"tag":85,"props":8386,"children":8387},{"class":87,"line":494},[8388],{"type":14,"tag":85,"props":8389,"children":8390},{"emptyLinePlaceholder":268},[8391],{"type":20,"value":271},{"type":14,"tag":85,"props":8393,"children":8394},{"class":87,"line":502},[8395,8400,8404,8408,8412,8417,8422,8426,8430,8434,8438,8443,8447,8452],{"type":14,"tag":85,"props":8396,"children":8397},{"style":184},[8398],{"type":20,"value":8399},"            std",{"type":14,"tag":85,"props":8401,"children":8402},{"style":92},[8403],{"type":20,"value":667},{"type":14,"tag":85,"props":8405,"children":8406},{"style":184},[8407],{"type":20,"value":7006},{"type":14,"tag":85,"props":8409,"children":8410},{"style":92},[8411],{"type":20,"value":667},{"type":14,"tag":85,"props":8413,"children":8414},{"style":184},[8415],{"type":20,"value":8416},"exit",{"type":14,"tag":85,"props":8418,"children":8419},{"style":98},[8420],{"type":20,"value":8421},"(output",{"type":14,"tag":85,"props":8423,"children":8424},{"style":92},[8425],{"type":20,"value":106},{"type":14,"tag":85,"props":8427,"children":8428},{"style":184},[8429],{"type":20,"value":28},{"type":14,"tag":85,"props":8431,"children":8432},{"style":98},[8433],{"type":20,"value":4464},{"type":14,"tag":85,"props":8435,"children":8436},{"style":92},[8437],{"type":20,"value":106},{"type":14,"tag":85,"props":8439,"children":8440},{"style":184},[8441],{"type":20,"value":8442},"unwrap_or",{"type":14,"tag":85,"props":8444,"children":8445},{"style":98},[8446],{"type":20,"value":192},{"type":14,"tag":85,"props":8448,"children":8449},{"style":730},[8450],{"type":20,"value":8451},"1",{"type":14,"tag":85,"props":8453,"children":8454},{"style":98},[8455],{"type":20,"value":8456},"));\n",{"type":14,"tag":85,"props":8458,"children":8459},{"class":87,"line":518},[8460],{"type":14,"tag":85,"props":8461,"children":8462},{"style":98},[8463],{"type":20,"value":813},{"type":14,"tag":85,"props":8465,"children":8466},{"class":87,"line":539},[8467],{"type":14,"tag":85,"props":8468,"children":8469},{"style":98},[8470],{"type":20,"value":821},{"type":14,"tag":22,"props":8472,"children":8473},{},[8474,8476,8482,8484,8489,8490,8496,8498],{"type":20,"value":8475},"if we now just run our script, ",{"type":14,"tag":28,"props":8477,"children":8479},{"className":8478},[],[8480],{"type":20,"value":8481},"cargo run -- run test.viv",{"type":20,"value":8483}," you should see ",{"type":14,"tag":28,"props":8485,"children":8487},{"className":8486},[],[8488],{"type":20,"value":8451},{"type":20,"value":6285},{"type":14,"tag":28,"props":8491,"children":8493},{"className":8492},[],[8494],{"type":20,"value":8495},"2",{"type":20,"value":8497}," being printed on the terminal! Congratulations! We now have a fully working compiler ",{"type":14,"tag":66,"props":8499,"children":8500},{},[],{"type":14,"tag":54,"props":8502,"children":8504},{"id":8503},"build-command",[8505],{"type":20,"value":8506},"Build command",{"type":14,"tag":22,"props":8508,"children":8509},{},[8510,8512,8517],{"type":20,"value":8511},"Just one last thing I want to add before we wrap up, add a ",{"type":14,"tag":28,"props":8513,"children":8515},{"className":8514},[],[8516],{"type":20,"value":5967},{"type":20,"value":8518}," command, what use is a compiler if we can't save our binary?",{"type":14,"tag":75,"props":8520,"children":8522},{"code":8521,"language":78,"meta":7,"className":79,"style":7},"// main.rs\n\n#[derive(Subcommand)]\nenum CompilerCommand {\n    /// Compile and run file\n    Run { input_file: String },\n    /// Compile file\n    Build {\n        input_file: String,\n        output_file: String,\n    },\n}\n\n// ...\n\n    match arguments.command {\n        CompilerCommand::Run { input_file } => {\n            // ...\n        }\n        CompilerCommand::Build {\n            input_file,\n            output_file,\n        } => {\n            build(&input_file, &output_file, compiler_options).context(\"Building input file\")?;\n        }\n    }\n",[8523],{"type":14,"tag":28,"props":8524,"children":8525},{"__ignoreMap":7},[8526,8533,8540,8556,8572,8580,8607,8615,8627,8647,8667,8675,8682,8689,8697,8704,8723,8750,8758,8765,8785,8793,8801,8817,8874,8881],{"type":14,"tag":85,"props":8527,"children":8528},{"class":87,"line":88},[8529],{"type":14,"tag":85,"props":8530,"children":8531},{"style":259},[8532],{"type":20,"value":8072},{"type":14,"tag":85,"props":8534,"children":8535},{"class":87,"line":170},[8536],{"type":14,"tag":85,"props":8537,"children":8538},{"emptyLinePlaceholder":268},[8539],{"type":20,"value":271},{"type":14,"tag":85,"props":8541,"children":8542},{"class":87,"line":274},[8543,8547,8552],{"type":14,"tag":85,"props":8544,"children":8545},{"style":98},[8546],{"type":20,"value":280},{"type":14,"tag":85,"props":8548,"children":8549},{"style":184},[8550],{"type":20,"value":8551},"Subcommand",{"type":14,"tag":85,"props":8553,"children":8554},{"style":98},[8555],{"type":20,"value":290},{"type":14,"tag":85,"props":8557,"children":8558},{"class":87,"line":293},[8559,8563,8568],{"type":14,"tag":85,"props":8560,"children":8561},{"style":92},[8562],{"type":20,"value":638},{"type":14,"tag":85,"props":8564,"children":8565},{"style":184},[8566],{"type":20,"value":8567}," CompilerCommand",{"type":14,"tag":85,"props":8569,"children":8570},{"style":98},[8571],{"type":20,"value":384},{"type":14,"tag":85,"props":8573,"children":8574},{"class":87,"line":340},[8575],{"type":14,"tag":85,"props":8576,"children":8577},{"style":259},[8578],{"type":20,"value":8579},"    /// Compile and run file\n",{"type":14,"tag":85,"props":8581,"children":8582},{"class":87,"line":348},[8583,8588,8593,8597,8602],{"type":14,"tag":85,"props":8584,"children":8585},{"style":184},[8586],{"type":20,"value":8587},"    Run",{"type":14,"tag":85,"props":8589,"children":8590},{"style":98},[8591],{"type":20,"value":8592}," { input_file",{"type":14,"tag":85,"props":8594,"children":8595},{"style":92},[8596],{"type":20,"value":952},{"type":14,"tag":85,"props":8598,"children":8599},{"style":184},[8600],{"type":20,"value":8601}," String",{"type":14,"tag":85,"props":8603,"children":8604},{"style":98},[8605],{"type":20,"value":8606}," },\n",{"type":14,"tag":85,"props":8608,"children":8609},{"class":87,"line":364},[8610],{"type":14,"tag":85,"props":8611,"children":8612},{"style":259},[8613],{"type":20,"value":8614},"    /// Compile file\n",{"type":14,"tag":85,"props":8616,"children":8617},{"class":87,"line":387},[8618,8623],{"type":14,"tag":85,"props":8619,"children":8620},{"style":184},[8621],{"type":20,"value":8622},"    Build",{"type":14,"tag":85,"props":8624,"children":8625},{"style":98},[8626],{"type":20,"value":384},{"type":14,"tag":85,"props":8628,"children":8629},{"class":87,"line":410},[8630,8635,8639,8643],{"type":14,"tag":85,"props":8631,"children":8632},{"style":98},[8633],{"type":20,"value":8634},"        input_file",{"type":14,"tag":85,"props":8636,"children":8637},{"style":92},[8638],{"type":20,"value":952},{"type":14,"tag":85,"props":8640,"children":8641},{"style":184},[8642],{"type":20,"value":8601},{"type":14,"tag":85,"props":8644,"children":8645},{"style":98},[8646],{"type":20,"value":805},{"type":14,"tag":85,"props":8648,"children":8649},{"class":87,"line":419},[8650,8655,8659,8663],{"type":14,"tag":85,"props":8651,"children":8652},{"style":98},[8653],{"type":20,"value":8654},"        output_file",{"type":14,"tag":85,"props":8656,"children":8657},{"style":92},[8658],{"type":20,"value":952},{"type":14,"tag":85,"props":8660,"children":8661},{"style":184},[8662],{"type":20,"value":8601},{"type":14,"tag":85,"props":8664,"children":8665},{"style":98},[8666],{"type":20,"value":805},{"type":14,"tag":85,"props":8668,"children":8669},{"class":87,"line":427},[8670],{"type":14,"tag":85,"props":8671,"children":8672},{"style":98},[8673],{"type":20,"value":8674},"    },\n",{"type":14,"tag":85,"props":8676,"children":8677},{"class":87,"line":443},[8678],{"type":14,"tag":85,"props":8679,"children":8680},{"style":98},[8681],{"type":20,"value":416},{"type":14,"tag":85,"props":8683,"children":8684},{"class":87,"line":464},[8685],{"type":14,"tag":85,"props":8686,"children":8687},{"emptyLinePlaceholder":268},[8688],{"type":20,"value":271},{"type":14,"tag":85,"props":8690,"children":8691},{"class":87,"line":486},[8692],{"type":14,"tag":85,"props":8693,"children":8694},{"style":259},[8695],{"type":20,"value":8696},"// ...\n",{"type":14,"tag":85,"props":8698,"children":8699},{"class":87,"line":494},[8700],{"type":14,"tag":85,"props":8701,"children":8702},{"emptyLinePlaceholder":268},[8703],{"type":20,"value":271},{"type":14,"tag":85,"props":8705,"children":8706},{"class":87,"line":502},[8707,8711,8715,8719],{"type":14,"tag":85,"props":8708,"children":8709},{"style":92},[8710],{"type":20,"value":1015},{"type":14,"tag":85,"props":8712,"children":8713},{"style":98},[8714],{"type":20,"value":8084},{"type":14,"tag":85,"props":8716,"children":8717},{"style":92},[8718],{"type":20,"value":106},{"type":14,"tag":85,"props":8720,"children":8721},{"style":98},[8722],{"type":20,"value":8093},{"type":14,"tag":85,"props":8724,"children":8725},{"class":87,"line":518},[8726,8730,8734,8738,8742,8746],{"type":14,"tag":85,"props":8727,"children":8728},{"style":184},[8729],{"type":20,"value":8101},{"type":14,"tag":85,"props":8731,"children":8732},{"style":92},[8733],{"type":20,"value":667},{"type":14,"tag":85,"props":8735,"children":8736},{"style":184},[8737],{"type":20,"value":8110},{"type":14,"tag":85,"props":8739,"children":8740},{"style":98},[8741],{"type":20,"value":8115},{"type":14,"tag":85,"props":8743,"children":8744},{"style":92},[8745],{"type":20,"value":795},{"type":14,"tag":85,"props":8747,"children":8748},{"style":98},[8749],{"type":20,"value":384},{"type":14,"tag":85,"props":8751,"children":8752},{"class":87,"line":539},[8753],{"type":14,"tag":85,"props":8754,"children":8755},{"style":259},[8756],{"type":20,"value":8757},"            // ...\n",{"type":14,"tag":85,"props":8759,"children":8760},{"class":87,"line":561},[8761],{"type":14,"tag":85,"props":8762,"children":8763},{"style":98},[8764],{"type":20,"value":813},{"type":14,"tag":85,"props":8766,"children":8767},{"class":87,"line":1802},[8768,8772,8776,8781],{"type":14,"tag":85,"props":8769,"children":8770},{"style":184},[8771],{"type":20,"value":8101},{"type":14,"tag":85,"props":8773,"children":8774},{"style":92},[8775],{"type":20,"value":667},{"type":14,"tag":85,"props":8777,"children":8778},{"style":184},[8779],{"type":20,"value":8780},"Build",{"type":14,"tag":85,"props":8782,"children":8783},{"style":98},[8784],{"type":20,"value":384},{"type":14,"tag":85,"props":8786,"children":8787},{"class":87,"line":1842},[8788],{"type":14,"tag":85,"props":8789,"children":8790},{"style":98},[8791],{"type":20,"value":8792},"            input_file,\n",{"type":14,"tag":85,"props":8794,"children":8795},{"class":87,"line":1850},[8796],{"type":14,"tag":85,"props":8797,"children":8798},{"style":98},[8799],{"type":20,"value":8800},"            output_file,\n",{"type":14,"tag":85,"props":8802,"children":8803},{"class":87,"line":1891},[8804,8809,8813],{"type":14,"tag":85,"props":8805,"children":8806},{"style":98},[8807],{"type":20,"value":8808},"        } ",{"type":14,"tag":85,"props":8810,"children":8811},{"style":92},[8812],{"type":20,"value":795},{"type":14,"tag":85,"props":8814,"children":8815},{"style":98},[8816],{"type":20,"value":384},{"type":14,"tag":85,"props":8818,"children":8819},{"class":87,"line":1926},[8820,8824,8828,8832,8837,8841,8846,8850,8854,8858,8862,8866,8870],{"type":14,"tag":85,"props":8821,"children":8822},{"style":184},[8823],{"type":20,"value":8163},{"type":14,"tag":85,"props":8825,"children":8826},{"style":98},[8827],{"type":20,"value":192},{"type":14,"tag":85,"props":8829,"children":8830},{"style":92},[8831],{"type":20,"value":727},{"type":14,"tag":85,"props":8833,"children":8834},{"style":98},[8835],{"type":20,"value":8836},"input_file, ",{"type":14,"tag":85,"props":8838,"children":8839},{"style":92},[8840],{"type":20,"value":727},{"type":14,"tag":85,"props":8842,"children":8843},{"style":98},[8844],{"type":20,"value":8845},"output_file, compiler_options)",{"type":14,"tag":85,"props":8847,"children":8848},{"style":92},[8849],{"type":20,"value":106},{"type":14,"tag":85,"props":8851,"children":8852},{"style":184},[8853],{"type":20,"value":2161},{"type":14,"tag":85,"props":8855,"children":8856},{"style":98},[8857],{"type":20,"value":192},{"type":14,"tag":85,"props":8859,"children":8860},{"style":870},[8861],{"type":20,"value":8260},{"type":14,"tag":85,"props":8863,"children":8864},{"style":98},[8865],{"type":20,"value":2175},{"type":14,"tag":85,"props":8867,"children":8868},{"style":92},[8869],{"type":20,"value":1390},{"type":14,"tag":85,"props":8871,"children":8872},{"style":98},[8873],{"type":20,"value":1395},{"type":14,"tag":85,"props":8875,"children":8876},{"class":87,"line":1934},[8877],{"type":14,"tag":85,"props":8878,"children":8879},{"style":98},[8880],{"type":20,"value":813},{"type":14,"tag":85,"props":8882,"children":8883},{"class":87,"line":1957},[8884],{"type":14,"tag":85,"props":8885,"children":8886},{"style":98},[8887],{"type":20,"value":821},{"type":14,"tag":22,"props":8889,"children":8890},{},[8891],{"type":20,"value":8892},"we can now test our new command.",{"type":14,"tag":75,"props":8894,"children":8896},{"code":8895,"language":5986,"meta":7,"className":5987,"style":7},"cargo run -- build test.viv test \n./test\n",[8897],{"type":14,"tag":28,"props":8898,"children":8899},{"__ignoreMap":7},[8900,8936],{"type":14,"tag":85,"props":8901,"children":8902},{"class":87,"line":88},[8903,8907,8912,8917,8921,8926,8931],{"type":14,"tag":85,"props":8904,"children":8905},{"style":184},[8906],{"type":20,"value":5999},{"type":14,"tag":85,"props":8908,"children":8909},{"style":870},[8910],{"type":20,"value":8911}," run",{"type":14,"tag":85,"props":8913,"children":8914},{"style":730},[8915],{"type":20,"value":8916}," --",{"type":14,"tag":85,"props":8918,"children":8919},{"style":870},[8920],{"type":20,"value":2051},{"type":14,"tag":85,"props":8922,"children":8923},{"style":870},[8924],{"type":20,"value":8925}," test.viv",{"type":14,"tag":85,"props":8927,"children":8928},{"style":870},[8929],{"type":20,"value":8930}," test",{"type":14,"tag":85,"props":8932,"children":8933},{"style":98},[8934],{"type":20,"value":8935}," \n",{"type":14,"tag":85,"props":8937,"children":8938},{"class":87,"line":170},[8939],{"type":14,"tag":85,"props":8940,"children":8941},{"style":184},[8942],{"type":20,"value":8943},"./test\n",{"type":14,"tag":54,"props":8945,"children":8947},{"id":8946},"conlusion",[8948],{"type":20,"value":8949},"Conlusion",{"type":14,"tag":22,"props":8951,"children":8952},{},[8953],{"type":20,"value":8954},"So today we made a complete compiler, fair enough it does only support printing numbers, but my god wasn't it fun! So much learning, if you want you can go ahead and play with this, try changing the syntax, and maybe even add more features yourself?",{"type":14,"tag":54,"props":8956,"children":8958},{"id":8957},"next-steps",[8959],{"type":20,"value":8960},"Next steps",{"type":14,"tag":22,"props":8962,"children":8963},{},[8964],{"type":20,"value":8965},"In the next post we will create the next obvious feature booleans!\n... wait really? booleans? we don't even have operators!",{"type":14,"tag":22,"props":8967,"children":8968},{},[8969,8971,8976,8978,8983],{"type":20,"value":8970},"And yhe you are right, it is a bit unusual, our first operator will be ",{"type":14,"tag":28,"props":8972,"children":8974},{"className":8973},[],[8975],{"type":20,"value":116},{"type":20,"value":8977},", but there is a good reason. I want to start writing integration tests, and for that, we need ",{"type":14,"tag":28,"props":8979,"children":8981},{"className":8980},[],[8982],{"type":20,"value":116},{"type":20,"value":106},{"type":14,"tag":22,"props":8985,"children":8986},{},[8987],{"type":20,"value":8988},"But we will do that next! If you have any questions feel free to leave them in the comments below.",{"type":14,"tag":8990,"props":8991,"children":8992},"style",{},[8993],{"type":20,"value":8994},"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":7,"searchDepth":170,"depth":170,"links":8996},[8997,9001,9005,9006,9007],{"id":56,"depth":170,"text":59,"children":8998},[8999,9000],{"id":206,"depth":274,"text":209},{"id":582,"depth":274,"text":585},{"id":2623,"depth":170,"text":2626,"children":9002},[9003,9004],{"id":2642,"depth":274,"text":2645},{"id":6269,"depth":274,"text":6272},{"id":8503,"depth":170,"text":8506},{"id":8946,"depth":170,"text":8949},{"id":8957,"depth":170,"text":8960},"markdown","content:blog:3.compiler_3.md","content","blog/3.compiler_3.md","md",1703982906029]